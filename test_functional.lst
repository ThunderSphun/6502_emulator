AS65 Assembler for R6502 [1.42].                                     Page    1
---------------------------- test_functional.asm -----------------------------

                             ;
                             ; 6 5 0 2   F U N C T I O N A L   T E S T
                             ;
                             ; Copyright (C) 2012-2020  Klaus Dormann
                             ;
                             ; This program is free software: you can redistri
                             ; it under the terms of the GNU General Public Li
                             ; the Free Software Foundation, either version 3 
                             ; (at your option) any later version.
                             ;
                             ; This program is distributed in the hope that it
                             ; but WITHOUT ANY WARRANTY; without even the impl
                             ; MERCHANTABILITY or FITNESS FOR A PARTICULAR PUR
                             ; GNU General Public License for more details.
                             ;
                             ; You should have received a copy of the GNU Gene
                             ; along with this program.  If not, see <http://w
                             
                             
                             ; This program is designed to test all opcodes of
                             ; addressing modes with focus on propper setting 
                             ; register bits.
                             ; 
                             ; version 05-jan-2020
                             ; contact info at http://2m5.de or email K@2m5.de
                             ;
                             ; assembled with AS65 written by Frank A. Kingswo
                             ; The assembler as65_142.zip can be obtained from
                             ; command line switches: -l -m -s2 -w -h0
                             ;                         |  |  |   |  no page he
                             ;                         |  |  |   wide listing 
                             ;                         |  |  write intel hex f
                             ;                         |  expand macros in lis
                             ;                         generate pass2 listing
                             ;
                             ; No IO - should be run from a monitor with acces
                             ; To run load intel hex image with a load command
                             ; (code_segment) and enter a go command.
                             ; Loop on program counter determines error or suc
                             ; Check listing for relevant traps (jump/branch *
                             ; Please note that in early tests some instructio
                             ; they are actually tested!
                             ;
                             ; RESET, NMI or IRQ should not occur and will be 
                             ; Tests documented behavior of the original NMOS 
                             ; opcodes. Additional opcodes of newer versions o
                             ; not be tested. Decimal ops will only be tested 
                             ; N V Z flags will be ignored.
                             ;
                             ; Debugging hints:
                             ;     Most of the code is written sequentially. i
                             ;   immediately preceeding code for the instructi
                             ;   tested first, flags are checked second by pus
                             ;   pulling them to the accumulator after the res
                             ;   flags are no longer valid for the tested inst
                             ;     If the tested instruction was indexed, the 
                             ;   also be checked. Opposed to the flags, X and 
                             ;
                             ; versions:
                             ;   28-jul-2012  1st version distributed for test
                             ;   29-jul-2012  fixed references to location 0, 
                             ;                added license - GPLv3
AS65 Assembler for R6502 [1.42].                                     Page    2
---------------------------- test_functional.asm -----------------------------

                             ;   30-jul-2012  added configuration options
                             ;   01-aug-2012  added trap macro to allow user t
                             ;   01-dec-2012  fixed trap in branch field must 
                             ;   02-mar-2013  fixed PLA flags not tested
                             ;   19-jul-2013  allowed ROM vectors to be loaded
                             ;                added test sequence check to det
                             ;   23-jul-2013  added RAM integrity check option
                             ;   16-aug-2013  added error report to standard o
                             ;   13-dec-2014  added binary/decimal opcode tabl
                             ;   14-dec-2014  improved relative address test
                             ;   23-aug-2015  added option to disable self mod
                             ;   24-aug-2015  all self modifying immediate opc
                             ;                added small branch offset pretes
                             ;   21-oct-2015  added option to disable decimal 
                             ;   04-dec-2017  fixed BRK only tested with inter
                             ;                added option to skip the remaind
                             ;                in report.i65
                             ;   05-jan-2020  fixed shifts not testing zero re
                             ;                is shifted out
                             
                             ; C O N F I G U R A T I O N
                             
                             ;ROM_vectors writable (0=no, 1=yes)
                             ;if ROM vectors can not be used interrupts will n
                             ;as a consequence BRK can not be tested but will 
0001 =                       ROM_vectors = 1
                             
                             ;load_data_direct (0=move from code segment, 1=lo
                             ;loading directly is preferred but may not be sup
                             ;0 produces only consecutive object code, 1 is no
0001 =                       load_data_direct = 1
                             
                             ;I_flag behavior (0=force enabled, 1=force disabl
                             ;change) 2 requires extra code and is not recomme
                             ;tested if you allow changing the interrupt statu
0003 =                       I_flag = 3
                             
                             ;configure memory - try to stay away from memory 
                             ;zero_page memory start address, $52 (82) consecu
                             ;                                add 2 if I_flag 
000a =                       zero_page = $a  
                             
                             ;data_segment memory start address, $7B (123) con
0200 =                       data_segment = $200  
                                 if (data_segment & $ff) != 0
                                     ERROR ERROR ERROR low byte of data_segmen
                                 endif  
                             
                             ;code_segment memory start address, 13.1kB of con
                             ;                                   add 2.5 kB if
0400 =                       code_segment = $400  
                             
                             ;self modifying code may be disabled to allow run
                             ;0=part of the code is self modifying and must re
                             ;1=tests disabled: branch range
0000 =                       disable_selfmod = 0
                             
                             ;report errors through I/O channel (0=use standar
                             ;report.i65 as I/O channel, add 3.5 kB)
0000 =                       report = 0
                             
                             ;RAM integrity test option. Checks for undesired 
AS65 Assembler for R6502 [1.42].                                     Page    3
---------------------------- test_functional.asm -----------------------------

                             ;set lowest non RAM or RAM mirror address page (-
                             ;leave disabled if a monitor, OS or background in
ffff =                       ram_top = -1
                             
                             ;disable test decimal mode ADC & SBC, 0=enable, 1
                             ;2=disable including decimal flag in processor st
0000 =                       disable_decimal = 0
                             
                                     noopt       ;do not take shortcuts
                             
                             ;macros for error & success traps to allow user m
                             ;example:
                             ;trap    macro
                             ;        jsr my_error_handler
                             ;        endm
                             ;trap_eq macro
                             ;        bne skip\?
                             ;        trap           ;failed equal (zero)
                             ;skip\?
                             ;        endm
                             ;
                             ; my_error_handler should pop the calling address
                             ; putting larger portions of code (more than 3 by
                             ; may lead to branch range problems for some test
                                 if report = 0
                             trap    macro
                                     jmp *           ;failed anyway
                                     endm
                             trap_eq macro
                                     beq *           ;failed equal (zero)
                                     endm
                             trap_ne macro
                                     bne *           ;failed not equal (non ze
                                     endm
                             trap_cs macro
                                     bcs *           ;failed carry set
                                     endm
                             trap_cc macro
                                     bcc *           ;failed carry clear
                                     endm
                             trap_mi macro
                                     bmi *           ;failed minus (bit 7 set)
                                     endm
                             trap_pl macro
                                     bpl *           ;failed plus (bit 7 clear
                                     endm
                             trap_vs macro
                                     bvs *           ;failed overflow set
                                     endm
                             trap_vc macro
                                     bvc *           ;failed overflow clear
                                     endm
                             ; please observe that during the test the stack g
                             ; therefore a RTS inside the success macro is not
                             success macro
                                     jmp *           ;test passed, no errors
                                     endm
                                 endif
                                 if report = 1
                             trap    macro
                                     jsr report_error
                                     endm
AS65 Assembler for R6502 [1.42].                                     Page    4
---------------------------- test_functional.asm -----------------------------

                             trap_eq macro
                                     bne skip\?
                                     trap           ;failed equal (zero)
                             skip\?
                                     endm
                             trap_ne macro
                                     beq skip\?
                                     trap            ;failed not equal (non ze
                             skip\?
                                     endm
                             trap_cs macro
                                     bcc skip\?
                                     trap            ;failed carry set
                             skip\?
                                     endm
                             trap_cc macro
                                     bcs skip\?
                                     trap            ;failed carry clear
                             skip\?
                                     endm
                             trap_mi macro
                                     bpl skip\?
                                     trap            ;failed minus (bit 7 set)
                             skip\?
                                     endm
                             trap_pl macro
                                     bmi skip\?
                                     trap            ;failed plus (bit 7 clear
                             skip\?
                                     endm
                             trap_vs macro
                                     bvc skip\?
                                     trap            ;failed overflow set
                             skip\?
                                     endm
                             trap_vc macro
                                     bvs skip\?
                                     trap            ;failed overflow clear
                             skip\?
                                     endm
                             ; please observe that during the test the stack g
                             ; therefore a RTS inside the success macro is not
                             success macro
                                     jsr report_success
                                     endm
                                 endif
                             
                             
0001 =                       carry   equ %00000001   ;flag bits in status
0002 =                       zero    equ %00000010
0004 =                       intdis  equ %00000100
0008 =                       decmode equ %00001000
0010 =                       break   equ %00010000
0020 =                       reserv  equ %00100000
0040 =                       overfl  equ %01000000
0080 =                       minus   equ %10000000
                             
0001 =                       fc      equ carry
0002 =                       fz      equ zero
0003 =                       fzc     equ carry+zero
0040 =                       fv      equ overfl
0042 =                       fvz     equ overfl+zero
AS65 Assembler for R6502 [1.42].                                     Page    5
---------------------------- test_functional.asm -----------------------------

0080 =                       fn      equ minus
0081 =                       fnc     equ minus+carry
0082 =                       fnz     equ minus+zero
0083 =                       fnzc    equ minus+zero+carry
00c0 =                       fnv     equ minus+overfl
                             
0030 =                       fao     equ break+reserv    ;bits always on after
0034 =                       fai     equ fao+intdis      ;+ forced interrupt d
0038 =                       faod    equ fao+decmode     ;+ ignore decimal
003c =                       faid    equ fai+decmode     ;+ ignore decimal
00ff =                       m8      equ $ff             ;8 bit mask
00fb =                       m8i     equ $ff&~intdis     ;8 bit mask - interru
                             
                             ;macros to allow masking of status bits.
                             ;masking test of decimal bit
                             ;masking of interrupt enable/disable on load and 
                             ;masking of always on bits after PHP or BRK (unus
                                 if disable_decimal < 2
                                     if I_flag = 0
                             load_flag   macro
                                         lda #\1&m8i         ;force enable int
                                         endm
                             cmp_flag    macro
                                         cmp #(\1|fao)&m8i   ;I_flag is always
                                         endm
                             eor_flag    macro
                                         eor #(\1&m8i|fao)   ;mask I, invert e
                                         endm
                                     endif
                                     if I_flag = 1
                             load_flag   macro
                                         lda #\1|intdis      ;force disable in
                                         endm
                             cmp_flag    macro
                                         cmp #(\1|fai)&m8    ;I_flag is always
                                         endm
                             eor_flag    macro
                                         eor #(\1|fai)       ;invert expected 
                                         endm
                                     endif
                                     if I_flag = 2
                             load_flag   macro
                                         lda #\1
                                         ora flag_I_on       ;restore I-flag
                                         and flag_I_off
                                         endm
                             cmp_flag    macro
                                         eor flag_I_on       ;I_flag is never 
                                         cmp #(\1|fao)&m8i   ;expected flags +
                                         endm
                             eor_flag    macro
                                         eor flag_I_on       ;I_flag is never 
                                         eor #(\1&m8i|fao)   ;mask I, invert e
                                         endm
                                     endif
                                     if I_flag = 3
                             load_flag   macro
                                         lda #\1             ;allow test to ch
                                         endm
                             cmp_flag    macro
                                         cmp #(\1|fao)&m8    ;expected flags +
                                         endm
AS65 Assembler for R6502 [1.42].                                     Page    6
---------------------------- test_functional.asm -----------------------------

                             eor_flag    macro
                                         eor #\1|fao         ;invert expected 
                                         endm
                                     endif
                                 else
                                     if I_flag = 0
                             load_flag   macro
                                         lda #\1&m8i         ;force enable int
                                         endm
                             cmp_flag    macro
                                         ora #decmode        ;ignore decimal m
                                         cmp #(\1|faod)&m8i  ;I_flag is always
                                         endm
                             eor_flag    macro
                                         ora #decmode        ;ignore decimal m
                                         eor #(\1&m8i|faod)  ;mask I, invert e
                                         endm
                                     endif
                                     if I_flag = 1
                             load_flag   macro
                                         lda #\1|intdis      ;force disable in
                                         endm
                             cmp_flag    macro
                                         ora #decmode        ;ignore decimal m
                                         cmp #(\1|faid)&m8   ;I_flag is always
                                         endm
                             eor_flag    macro
                                         ora #decmode        ;ignore decimal m
                                         eor #(\1|faid)      ;invert expected 
                                         endm
                                     endif
                                     if I_flag = 2
                             load_flag   macro
                                         lda #\1
                                         ora flag_I_on       ;restore I-flag
                                         and flag_I_off
                                         endm
                             cmp_flag    macro
                                         eor flag_I_on       ;I_flag is never 
                                         ora #decmode        ;ignore decimal m
                                         cmp #(\1|faod)&m8i  ;expected flags +
                                         endm
                             eor_flag    macro
                                         eor flag_I_on       ;I_flag is never 
                                         ora #decmode        ;ignore decimal m
                                         eor #(\1&m8i|faod)  ;mask I, invert e
                                         endm
                                     endif
                                     if I_flag = 3
                             load_flag   macro
                                         lda #\1             ;allow test to ch
                                         endm
                             cmp_flag    macro
                                         ora #decmode        ;ignore decimal m
                                         cmp #(\1|faod)&m8   ;expected flags +
                                         endm
                             eor_flag    macro
                                         ora #decmode        ;ignore decimal m
                                         eor #\1|faod        ;invert expected 
                                         endm
                                     endif
                                 endif
AS65 Assembler for R6502 [1.42].                                     Page    7
---------------------------- test_functional.asm -----------------------------

                             
                             ;macros to set (register|memory|zeropage) & statu
                             set_stat    macro       ;setting flags in the pro
                                         load_flag \1
                                         pha         ;use stack to load status
                                         plp
                                         endm
                             
                             set_a       macro       ;precharging accu & statu
                                         load_flag \2
                                         pha         ;use stack to load status
                                         lda #\1     ;precharge accu
                                         plp
                                         endm
                             
                             set_x       macro       ;precharging index & stat
                                         load_flag \2
                                         pha         ;use stack to load status
                                         ldx #\1     ;precharge index x
                                         plp
                                         endm
                             
                             set_y       macro       ;precharging index & stat
                                         load_flag \2
                                         pha         ;use stack to load status
                                         ldy #\1     ;precharge index y
                                         plp
                                         endm
                             
                             set_ax      macro       ;precharging indexed accu
                                         load_flag \2
                                         pha         ;use stack to load status
                                         lda \1,x    ;precharge accu
                                         plp
                                         endm
                             
                             set_ay      macro       ;precharging indexed accu
                                         load_flag \2
                                         pha         ;use stack to load status
                                         lda \1,y    ;precharge accu
                                         plp
                                         endm
                             
                             set_z       macro       ;precharging indexed zp &
                                         load_flag \2
                                         pha         ;use stack to load status
                                         lda \1,x    ;load to zeropage
                                         sta zpt
                                         plp
                                         endm
                             
                             set_zx      macro       ;precharging zp,x & immed
                                         load_flag \2
                                         pha         ;use stack to load status
                                         lda \1,x    ;load to indexed zeropage
                                         sta zpt,x
                                         plp
                                         endm
                             
                             set_abs     macro       ;precharging indexed memo
                                         load_flag \2
                                         pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page    8
---------------------------- test_functional.asm -----------------------------

                                         lda \1,x    ;load to memory
                                         sta abst
                                         plp
                                         endm
                             
                             set_absx    macro       ;precharging abs,x & imme
                                         load_flag \2
                                         pha         ;use stack to load status
                                         lda \1,x    ;load to indexed memory
                                         sta abst,x
                                         plp
                                         endm
                             
                             ;macros to test (register|memory|zeropage) & stat
                             tst_stat    macro       ;testing flags in the pro
                                         php         ;save status
                                         pla         ;use stack to retrieve st
                                         pha
                                         cmp_flag \1
                                         trap_ne
                                         plp         ;restore status
                                         endm
                                         
                             tst_a       macro       ;testing result in accu &
                                         php         ;save flags
                                         cmp #\1     ;test result
                                         trap_ne
                                         pla         ;load status
                                         pha
                                         cmp_flag \2
                                         trap_ne
                                         plp         ;restore status
                                         endm
                             
                             tst_x       macro       ;testing result in x inde
                                         php         ;save flags
                                         cpx #\1     ;test result
                                         trap_ne
                                         pla         ;load status
                                         pha
                                         cmp_flag \2
                                         trap_ne
                                         plp         ;restore status
                                         endm
                             
                             tst_y       macro       ;testing result in y inde
                                         php         ;save flags
                                         cpy #\1     ;test result
                                         trap_ne
                                         pla         ;load status
                                         pha
                                         cmp_flag \2
                                         trap_ne
                                         plp         ;restore status
                                         endm
                             
                             tst_ax      macro       ;indexed testing result i
                                         php         ;save flags
                                         cmp \1,x    ;test result
                                         trap_ne
                                         pla         ;load status
                                         eor_flag \3
AS65 Assembler for R6502 [1.42].                                     Page    9
---------------------------- test_functional.asm -----------------------------

                                         cmp \2,x    ;test flags
                                         trap_ne     ;
                                         endm
                             
                             tst_ay      macro       ;indexed testing result i
                                         php         ;save flags
                                         cmp \1,y    ;test result
                                         trap_ne     ;
                                         pla         ;load status
                                         eor_flag \3
                                         cmp \2,y    ;test flags
                                         trap_ne
                                         endm
                                     
                             tst_z       macro       ;indexed testing result i
                                         php         ;save flags
                                         lda zpt
                                         cmp \1,x    ;test result
                                         trap_ne
                                         pla         ;load status
                                         eor_flag \3
                                         cmp \2,x    ;test flags
                                         trap_ne
                                         endm
                             
                             tst_zx      macro       ;testing result in zp,x &
                                         php         ;save flags
                                         lda zpt,x
                                         cmp \1,x    ;test result
                                         trap_ne
                                         pla         ;load status
                                         eor_flag \3
                                         cmp \2,x    ;test flags
                                         trap_ne
                                         endm
                             
                             tst_abs     macro       ;indexed testing result i
                                         php         ;save flags
                                         lda abst
                                         cmp \1,x    ;test result
                                         trap_ne
                                         pla         ;load status
                                         eor_flag \3
                                         cmp \2,x    ;test flags
                                         trap_ne
                                         endm
                             
                             tst_absx    macro       ;testing result in abs,x 
                                         php         ;save flags
                                         lda abst,x
                                         cmp \1,x    ;test result
                                         trap_ne
                                         pla         ;load status
                                         eor_flag \3
                                         cmp \2,x    ;test flags
                                         trap_ne
                                         endm
                                         
                             ; RAM integrity test
                             ;   verifies that none of the previous tests has 
                             ;   designated write areas.
                             ;   uses zpt word as indirect pointer, zpt+2 word
AS65 Assembler for R6502 [1.42].                                     Page   10
---------------------------- test_functional.asm -----------------------------

                                     if ram_top > -1
                             check_ram   macro 
                                         cld
                                         lda #0
                                         sta zpt         ;set low byte of indi
                                         sta zpt+3       ;checksum high byte
                                       if disable_selfmod = 0
                                         sta range_adr   ;reset self modifying
                                       endif
                                         clc
                                         ldx #zp_bss-zero_page ;zeropage - wri
                             ccs3\?      adc zero_page,x
                                         bcc ccs2\?
                                         inc zpt+3       ;carry to high byte
                                         clc
                             ccs2\?      inx
                                         bne ccs3\?
                                         ldx #hi(abs1)   ;set high byte of ind
                                         stx zpt+1
                                         ldy #lo(abs1)   ;data after write & e
                             ccs5\?      adc (zpt),y
                                         bcc ccs4\?
                                         inc zpt+3       ;carry to high byte
                                         clc
                             ccs4\?      iny
                                         bne ccs5\?
                                         inx             ;advance RAM high add
                                         stx zpt+1
                                         cpx #ram_top
                                         bne ccs5\?
                                         sta zpt+2       ;checksum low is
                                         cmp ram_chksm   ;checksum low expecte
                                         trap_ne         ;checksum mismatch
                                         lda zpt+3       ;checksum high is
                                         cmp ram_chksm+1 ;checksum high expect
                                         trap_ne         ;checksum mismatch
                                         endm            
                                     else
                             check_ram   macro
                                         ;RAM check disabled - RAM size not se
                                         endm
                                     endif
                             
                             next_test   macro           ;make sure, tests don
                                         lda test_case   ;previous test
                                         cmp #test_num
                                         trap_ne         ;test is out of seque
                             test_num = test_num + 1
                                         lda #test_num   ;*** next tests' numb
                                         sta test_case
                                         ;check_ram       ;uncomment to find a
                                         endm
                             
                                 if load_data_direct = 1
                                     data
                                 else
                                     bss                 ;uninitialized segmen
                                 endif
000a =                               org zero_page
                             ;break test interrupt save
000a : 00                    irq_a   ds  1               ;a register
000b : 00                    irq_x   ds  1               ;x register
AS65 Assembler for R6502 [1.42].                                     Page   11
---------------------------- test_functional.asm -----------------------------

                                 if I_flag = 2
                             ;masking for I bit in status
                             flag_I_on   ds  1           ;or mask to load flag
                             flag_I_off  ds  1           ;and mask to load fla
                                 endif
000c :                       zpt                         ;6 bytes store/modify
                             ;add/subtract operand generation and result/flag 
000c : 00                    adfc    ds  1               ;carry flag before op
000d : 00                    ad1     ds  1               ;operand 1 - accumula
000e : 00                    ad2     ds  1               ;operand 2 - memory /
000f : 00                    adrl    ds  1               ;expected result bits
0010 : 00                    adrh    ds  1               ;expected result bit 
0011 : 00                    adrf    ds  1               ;expected flags NV000
0012 : 00                    sb2     ds  1               ;operand 2 complement
0013 :                       zp_bss
0013 : 8001                  zps     db  $80,1           ;additional shift pat
0015 : c3824100              zp1     db  $c3,$82,$41,0   ;test patterns for LD
0019 : 7f                    zp7f    db  $7f             ;test pattern for com
                             ;logical zeropage operands
001a : 001f7180              zpOR    db  0,$1f,$71,$80   ;test pattern for OR
001e : 0fff7f80              zpAN    db  $0f,$ff,$7f,$80 ;test pattern for AND
0022 : ff0f8f8f              zpEO    db  $ff,$0f,$8f,$8f ;test pattern for EOR
                             ;indirect addressing pointers
0026 : 0000                  ind1    dw  abs1            ;indirect pointer to 
0028 : 0000                          dw  abs1+1
002a : 0000                          dw  abs1+2
002c : 0000                          dw  abs1+3
002e : 0000                          dw  abs7f
0030 : 0000                  inw1    dw  abs1-$f8        ;indirect pointer for
0032 : 0000                  indt    dw  abst            ;indirect pointer to 
0034 : 0000                          dw  abst+1
0036 : 0000                          dw  abst+2
0038 : 0000                          dw  abst+3
003a : 0000                  inwt    dw  abst-$f8        ;indirect pointer for
003c : 0000                  indAN   dw  absAN           ;indirect pointer to 
003e : 0000                          dw  absAN+1
0040 : 0000                          dw  absAN+2
0042 : 0000                          dw  absAN+3
0044 : 0000                  indEO   dw  absEO           ;indirect pointer to 
0046 : 0000                          dw  absEO+1
0048 : 0000                          dw  absEO+2
004a : 0000                          dw  absEO+3
004c : 0000                  indOR   dw  absOR           ;indirect pointer to 
004e : 0000                          dw  absOR+1
0050 : 0000                          dw  absOR+2
0052 : 0000                          dw  absOR+3
                             ;add/subtract indirect pointers
0054 : 0000                  adi2    dw  ada2            ;indirect pointer to 
0056 : 0000                  sbi2    dw  sba2            ;indirect pointer to 
0058 : 0000                  adiy2   dw  ada2-$ff        ;with offset for indi
005a : 0000                  sbiy2   dw  sba2-$ff
005c :                       zp_bss_end
                                
0200 =                               org data_segment
0200 : 00                    test_case   ds  1           ;current test number
0201 : 0000                  ram_chksm   ds  2           ;checksum for RAM int
                             ;add/subtract operand copy - abs tests write area
0203 :                       abst                        ;6 bytes store/modify
0203 : 00                    ada2    ds  1               ;operand 2
0204 : 00                    sba2    ds  1               ;operand 2 complement
0205 : 00000000                      ds  4               ;fill remaining bytes
0209 :                       data_bss
AS65 Assembler for R6502 [1.42].                                     Page   12
---------------------------- test_functional.asm -----------------------------

                                 if load_data_direct = 1
0209 : 2900             [ 2] ex_andi and #0              ;execute immediate op
020b : 60               [ 6]         rts
020c : 4900             [ 2] ex_eori eor #0              ;execute immediate op
020e : 60               [ 6]         rts
020f : 0900             [ 2] ex_orai ora #0              ;execute immediate op
0211 : 60               [ 6]         rts
0212 : 6900             [ 2] ex_adci adc #0              ;execute immediate op
0214 : 60               [ 6]         rts
0215 : e900             [ 2] ex_sbci sbc #0              ;execute immediate op
0217 : 60               [ 6]         rts
                                 else
                             ex_andi ds  3
                             ex_eori ds  3
                             ex_orai ds  3
                             ex_adci ds  3
                             ex_sbci ds  3
                                 endif
                             ;zps    db  $80,1           ;additional shift pat
0218 : c3824100              abs1    db  $c3,$82,$41,0   ;test patterns for LD
021c : 7f                    abs7f   db  $7f             ;test pattern for com
                             ;loads
021d : 80800002              fLDx    db  fn,fn,0,fz              ;expected fla
                             ;shifts
0221 :                       rASL                                ;expected res
0221 : 000286048200          rROL    db  0,2,$86,$04,$82,0
0227 : 010387058301          rROLc   db  1,3,$87,$05,$83,1       ;expected res
022d :                       rLSR                                ;expected res
022d : 400061412000          rROR    db  $40,0,$61,$41,$20,0
0233 : c080e1c1a080          rRORc   db  $c0,$80,$e1,$c1,$a0,$80 ;expected res
0239 :                       fASL                                ;expected fla
0239 : 030081018002          fROL    db  fzc,0,fnc,fc,fn,fz      ;no carry in
023f : 010081018000          fROLc   db  fc,0,fnc,fc,fn,0        ;carry in 
0245 :                       fLSR 
0245 : 000301000102          fROR    db  0,fzc,fc,0,fc,fz        ;no carry in
024b : 808181808180          fRORc   db  fn,fnc,fnc,fn,fnc,fn    ;carry in
                             ;increments (decrements)
0251 : 7f80ff0001            rINC    db  $7f,$80,$ff,0,1         ;expected res
0256 : 0080800200            fINC    db  0,fn,fn,fz,0            ;expected fla
                             ;logical memory operand
025b : 001f7180              absOR   db  0,$1f,$71,$80           ;test pattern
025f : 0fff7f80              absAN   db  $0f,$ff,$7f,$80         ;test pattern
0263 : ff0f8f8f              absEO   db  $ff,$0f,$8f,$8f         ;test pattern
                             ;logical accu operand
0267 : 00f11f00              absORa  db  0,$f1,$1f,0             ;test pattern
026b : f0ffffff              absANa  db  $f0,$ff,$ff,$ff         ;test pattern
026f : fff0f00f              absEOa  db  $ff,$f0,$f0,$0f         ;test pattern
                             ;logical results
0273 : 00ff7f80              absrlo  db  0,$ff,$7f,$80
0277 : 02800080              absflo  db  fz,fn,0,fn
027b :                       data_bss_end
                             
                             
                                     code
0400 =                               org code_segment
0400 : d8               [ 2] start   cld
0401 : a2ff             [ 2]         ldx #$ff
0403 : 9a               [ 2]         txs
0404 : a900             [ 2]         lda #0          ;*** test 0 = initialize
0406 : 8d0002           [ 4]         sta test_case
0000 =                       test_num = 0
                             
AS65 Assembler for R6502 [1.42].                                     Page   13
---------------------------- test_functional.asm -----------------------------

                             ;stop interrupts before initializing BSS
                                 if I_flag = 1
                                     sei
                                 endif
                                 
                             ;initialize I/O for report channel
                                 if report = 1
                                     jsr report_init
                                 endif
                                 
                             ;pretest small branch offset
0409 : a205             [ 2]         ldx #5
040b : 4c0000           [ 3]         jmp psb_test
040e :                       psb_bwok
040e : a005             [ 2]         ldy #5
0410 : d0fe             [ 4]         bne psb_forw
                                     trap        ;branch should be taken
0412 : 4c1204           [ 3]>        jmp *           ;failed anyway
                             
0415 : 88               [ 2]         dey         ;forward landing zone
0416 : 88               [ 2]         dey
0417 : 88               [ 2]         dey
0418 : 88               [ 2]         dey
0419 : 88               [ 2]         dey
041a :                       psb_forw
041a : 88               [ 2]         dey
041b : 88               [ 2]         dey
041c : 88               [ 2]         dey
041d : 88               [ 2]         dey
041e : 88               [ 2]         dey
041f : f0fe             [ 4]         beq psb_fwok
                                     trap        ;forward offset
0421 : 4c2104           [ 3]>        jmp *           ;failed anyway
                             
                             
0424 : ca               [ 2]         dex         ;backward landing zone
0425 : ca               [ 2]         dex
0426 : ca               [ 2]         dex
0427 : ca               [ 2]         dex
0428 : ca               [ 2]         dex
0429 :                       psb_back
0429 : ca               [ 2]         dex
042a : ca               [ 2]         dex
042b : ca               [ 2]         dex
042c : ca               [ 2]         dex
042d : ca               [ 2]         dex
042e : f0de             [ 3]         beq psb_bwok
                                     trap        ;backward offset
0430 : 4c3004           [ 3]>        jmp *           ;failed anyway
                             
0433 :                       psb_test
0433 : d0f4             [ 3]         bne psb_back
                                     trap        ;branch should be taken
0435 : 4c3504           [ 3]>        jmp *           ;failed anyway
                             
0438 :                       psb_fwok
                                     
                             ;initialize BSS segment
                                 if load_data_direct != 1
                                     ldx #zp_end-zp_init-1
                             ld_zp   lda zp_init,x
                                     sta zp_bss,x
AS65 Assembler for R6502 [1.42].                                     Page   14
---------------------------- test_functional.asm -----------------------------

                                     dex
                                     bpl ld_zp
                                     ldx #data_end-data_init-1
                             ld_data lda data_init,x
                                     sta data_bss,x
                                     dex
                                     bpl ld_data
                                   if ROM_vectors = 1
                                     ldx #5
                             ld_vect lda vec_init,x
                                     sta vec_bss,x
                                     dex
                                     bpl ld_vect
                                   endif
                                 endif
                             
                             ;retain status of interrupt flag
                                 if I_flag = 2
                                     php
                                     pla
                                     and #4          ;isolate flag
                                     sta flag_I_on   ;or mask
                                     eor #lo(~4)     ;reverse
                                     sta flag_I_off  ;and mask
                                 endif
                                     
                             ;generate checksum for RAM integrity test
                                 if ram_top > -1
                                     lda #0 
                                     sta zpt         ;set low byte of indirect
                                     sta ram_chksm+1 ;checksum high byte
                                   if disable_selfmod = 0
                                     sta range_adr   ;reset self modifying cod
                                   endif
                                     clc
                                     ldx #zp_bss-zero_page ;zeropage - write t
                             gcs3    adc zero_page,x
                                     bcc gcs2
                                     inc ram_chksm+1 ;carry to high byte
                                     clc
                             gcs2    inx
                                     bne gcs3
                                     ldx #hi(abs1)   ;set high byte of indirec
                                     stx zpt+1
                                     ldy #lo(abs1)   ;data after write & execu
                             gcs5    adc (zpt),y
                                     bcc gcs4
                                     inc ram_chksm+1 ;carry to high byte
                                     clc
                             gcs4    iny
                                     bne gcs5
                                     inx             ;advance RAM high address
                                     stx zpt+1
                                     cpx #ram_top
                                     bne gcs5
                                     sta ram_chksm   ;checksum complete
                                 endif
                                     next_test            
0438 : ad0002           [ 4]>            lda test_case   ;previous test
043b : c900             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
043d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   15
---------------------------- test_functional.asm -----------------------------

                            >
0001 =                      >test_num = test_num + 1
043f : a901             [ 2]>            lda #test_num   ;*** next tests' numb
0441 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                                 if disable_selfmod = 0
                             ;testing relative addressing with BEQ
0444 : a0fe             [ 2]         ldy #$fe        ;testing maximum range, n
0446 :                       range_loop
0446 : 88               [ 2]         dey             ;next relative address
0447 : 98               [ 2]         tya
0448 : aa               [ 2]         tax             ;precharge count to end o
0449 : 10fe             [ 4]         bpl range_fw    ;calculate relative addre
044b : 18               [ 2]         clc             ;avoid branch self or to 
044c : 6902             [ 2]         adc #2
044e : ea               [ 2]         nop             ;offset landing zone - to
044f : ea               [ 2]         nop
0450 : ea               [ 2]         nop
0451 : ea               [ 2]         nop
0452 : ea               [ 2]         nop
0453 :                       range_fw
0453 : ea               [ 2]         nop
0454 : ea               [ 2]         nop
0455 : ea               [ 2]         nop
0456 : ea               [ 2]         nop
0457 : ea               [ 2]         nop
0458 : 497f             [ 2]         eor #$7f        ;complement except sign
045a : 8d0000           [ 4]         sta range_adr   ;load into test target
045d : a900             [ 2]         lda #0          ;should set zero flag in 
045f : 4c0000           [ 3]         jmp range_op
                                     
0462 : ca               [ 2]         dex             ; offset landing zone - b
0463 : ca               [ 2]         dex
0464 : ca               [ 2]         dex
0465 : ca               [ 2]         dex
0466 : ca               [ 2]         dex
                                     ;relative address target field with branc
0467 : ca               [ 2]         dex             ;-128 - max backward
0468 : ca               [ 2]         dex
0469 : ca               [ 2]         dex
046a : ca               [ 2]         dex
046b : ca               [ 2]         dex
046c : ca               [ 2]         dex
046d : ca               [ 2]         dex
046e : ca               [ 2]         dex
046f : ca               [ 2]         dex             ;-120
0470 : ca               [ 2]         dex
0471 : ca               [ 2]         dex
0472 : ca               [ 2]         dex
0473 : ca               [ 2]         dex
0474 : ca               [ 2]         dex
0475 : ca               [ 2]         dex
0476 : ca               [ 2]         dex
0477 : ca               [ 2]         dex
0478 : ca               [ 2]         dex
0479 : ca               [ 2]         dex             ;-110
047a : ca               [ 2]         dex
047b : ca               [ 2]         dex
047c : ca               [ 2]         dex
047d : ca               [ 2]         dex
AS65 Assembler for R6502 [1.42].                                     Page   16
---------------------------- test_functional.asm -----------------------------

047e : ca               [ 2]         dex
047f : ca               [ 2]         dex
0480 : ca               [ 2]         dex
0481 : ca               [ 2]         dex
0482 : ca               [ 2]         dex
0483 : ca               [ 2]         dex             ;-100
0484 : ca               [ 2]         dex
0485 : ca               [ 2]         dex
0486 : ca               [ 2]         dex
0487 : ca               [ 2]         dex
0488 : ca               [ 2]         dex
0489 : ca               [ 2]         dex
048a : ca               [ 2]         dex
048b : ca               [ 2]         dex
048c : ca               [ 2]         dex
048d : ca               [ 2]         dex             ;-90
048e : ca               [ 2]         dex
048f : ca               [ 2]         dex
0490 : ca               [ 2]         dex
0491 : ca               [ 2]         dex
0492 : ca               [ 2]         dex
0493 : ca               [ 2]         dex
0494 : ca               [ 2]         dex
0495 : ca               [ 2]         dex
0496 : ca               [ 2]         dex
0497 : ca               [ 2]         dex             ;-80
0498 : ca               [ 2]         dex
0499 : ca               [ 2]         dex
049a : ca               [ 2]         dex
049b : ca               [ 2]         dex
049c : ca               [ 2]         dex
049d : ca               [ 2]         dex
049e : ca               [ 2]         dex
049f : ca               [ 2]         dex
04a0 : ca               [ 2]         dex
04a1 : ca               [ 2]         dex             ;-70
04a2 : ca               [ 2]         dex
04a3 : ca               [ 2]         dex
04a4 : ca               [ 2]         dex
04a5 : ca               [ 2]         dex
04a6 : ca               [ 2]         dex
04a7 : ca               [ 2]         dex
04a8 : ca               [ 2]         dex
04a9 : ca               [ 2]         dex
04aa : ca               [ 2]         dex
04ab : ca               [ 2]         dex             ;-60
04ac : ca               [ 2]         dex
04ad : ca               [ 2]         dex
04ae : ca               [ 2]         dex
04af : ca               [ 2]         dex
04b0 : ca               [ 2]         dex
04b1 : ca               [ 2]         dex
04b2 : ca               [ 2]         dex
04b3 : ca               [ 2]         dex
04b4 : ca               [ 2]         dex
04b5 : ca               [ 2]         dex             ;-50
04b6 : ca               [ 2]         dex
04b7 : ca               [ 2]         dex
04b8 : ca               [ 2]         dex
04b9 : ca               [ 2]         dex
04ba : ca               [ 2]         dex
04bb : ca               [ 2]         dex
AS65 Assembler for R6502 [1.42].                                     Page   17
---------------------------- test_functional.asm -----------------------------

04bc : ca               [ 2]         dex
04bd : ca               [ 2]         dex
04be : ca               [ 2]         dex
04bf : ca               [ 2]         dex             ;-40
04c0 : ca               [ 2]         dex
04c1 : ca               [ 2]         dex
04c2 : ca               [ 2]         dex
04c3 : ca               [ 2]         dex
04c4 : ca               [ 2]         dex
04c5 : ca               [ 2]         dex
04c6 : ca               [ 2]         dex
04c7 : ca               [ 2]         dex
04c8 : ca               [ 2]         dex
04c9 : ca               [ 2]         dex             ;-30
04ca : ca               [ 2]         dex
04cb : ca               [ 2]         dex
04cc : ca               [ 2]         dex
04cd : ca               [ 2]         dex
04ce : ca               [ 2]         dex
04cf : ca               [ 2]         dex
04d0 : ca               [ 2]         dex
04d1 : ca               [ 2]         dex
04d2 : ca               [ 2]         dex
04d3 : ca               [ 2]         dex             ;-20
04d4 : ca               [ 2]         dex
04d5 : ca               [ 2]         dex
04d6 : ca               [ 2]         dex
04d7 : ca               [ 2]         dex
04d8 : ca               [ 2]         dex
04d9 : ca               [ 2]         dex
04da : ca               [ 2]         dex
04db : ca               [ 2]         dex
04dc : ca               [ 2]         dex
04dd : ca               [ 2]         dex             ;-10
04de : ca               [ 2]         dex
04df : ca               [ 2]         dex
04e0 : ca               [ 2]         dex
04e1 : ca               [ 2]         dex
04e2 : ca               [ 2]         dex
04e3 : ca               [ 2]         dex
04e4 : ca               [ 2]         dex             ;-3
04e5 :                       range_op                ;test target with zero fl
04e6 =                       range_adr   = *+1       ;modifiable relative addr
04e5 : f03e             [ 4]         beq *+64        ;+64 if called without mo
04e7 : ca               [ 2]         dex             ;+0
04e8 : ca               [ 2]         dex
04e9 : ca               [ 2]         dex
04ea : ca               [ 2]         dex
04eb : ca               [ 2]         dex
04ec : ca               [ 2]         dex
04ed : ca               [ 2]         dex
04ee : ca               [ 2]         dex
04ef : ca               [ 2]         dex
04f0 : ca               [ 2]         dex
04f1 : ca               [ 2]         dex             ;+10
04f2 : ca               [ 2]         dex
04f3 : ca               [ 2]         dex
04f4 : ca               [ 2]         dex
04f5 : ca               [ 2]         dex
04f6 : ca               [ 2]         dex
04f7 : ca               [ 2]         dex
04f8 : ca               [ 2]         dex
AS65 Assembler for R6502 [1.42].                                     Page   18
---------------------------- test_functional.asm -----------------------------

04f9 : ca               [ 2]         dex
04fa : ca               [ 2]         dex
04fb : ca               [ 2]         dex             ;+20
04fc : ca               [ 2]         dex
04fd : ca               [ 2]         dex
04fe : ca               [ 2]         dex
04ff : ca               [ 2]         dex
0500 : ca               [ 2]         dex
0501 : ca               [ 2]         dex
0502 : ca               [ 2]         dex
0503 : ca               [ 2]         dex
0504 : ca               [ 2]         dex
0505 : ca               [ 2]         dex             ;+30
0506 : ca               [ 2]         dex
0507 : ca               [ 2]         dex
0508 : ca               [ 2]         dex
0509 : ca               [ 2]         dex
050a : ca               [ 2]         dex
050b : ca               [ 2]         dex
050c : ca               [ 2]         dex
050d : ca               [ 2]         dex
050e : ca               [ 2]         dex
050f : ca               [ 2]         dex             ;+40
0510 : ca               [ 2]         dex
0511 : ca               [ 2]         dex
0512 : ca               [ 2]         dex
0513 : ca               [ 2]         dex
0514 : ca               [ 2]         dex
0515 : ca               [ 2]         dex
0516 : ca               [ 2]         dex
0517 : ca               [ 2]         dex
0518 : ca               [ 2]         dex
0519 : ca               [ 2]         dex             ;+50
051a : ca               [ 2]         dex
051b : ca               [ 2]         dex
051c : ca               [ 2]         dex
051d : ca               [ 2]         dex
051e : ca               [ 2]         dex
051f : ca               [ 2]         dex
0520 : ca               [ 2]         dex
0521 : ca               [ 2]         dex
0522 : ca               [ 2]         dex
0523 : ca               [ 2]         dex             ;+60
0524 : ca               [ 2]         dex
0525 : ca               [ 2]         dex
0526 : ca               [ 2]         dex
0527 : ca               [ 2]         dex
0528 : ca               [ 2]         dex
0529 : ca               [ 2]         dex
052a : ca               [ 2]         dex
052b : ca               [ 2]         dex
052c : ca               [ 2]         dex
052d : ca               [ 2]         dex             ;+70
052e : ca               [ 2]         dex
052f : ca               [ 2]         dex
0530 : ca               [ 2]         dex
0531 : ca               [ 2]         dex
0532 : ca               [ 2]         dex
0533 : ca               [ 2]         dex
0534 : ca               [ 2]         dex
0535 : ca               [ 2]         dex
0536 : ca               [ 2]         dex
AS65 Assembler for R6502 [1.42].                                     Page   19
---------------------------- test_functional.asm -----------------------------

0537 : ca               [ 2]         dex             ;+80
0538 : ca               [ 2]         dex
0539 : ca               [ 2]         dex
053a : ca               [ 2]         dex
053b : ca               [ 2]         dex
053c : ca               [ 2]         dex
053d : ca               [ 2]         dex
053e : ca               [ 2]         dex
053f : ca               [ 2]         dex
0540 : ca               [ 2]         dex
0541 : ca               [ 2]         dex             ;+90
0542 : ca               [ 2]         dex
0543 : ca               [ 2]         dex
0544 : ca               [ 2]         dex
0545 : ca               [ 2]         dex
0546 : ca               [ 2]         dex
0547 : ca               [ 2]         dex
0548 : ca               [ 2]         dex
0549 : ca               [ 2]         dex
054a : ca               [ 2]         dex
054b : ca               [ 2]         dex             ;+100
054c : ca               [ 2]         dex
054d : ca               [ 2]         dex
054e : ca               [ 2]         dex
054f : ca               [ 2]         dex
0550 : ca               [ 2]         dex
0551 : ca               [ 2]         dex
0552 : ca               [ 2]         dex
0553 : ca               [ 2]         dex
0554 : ca               [ 2]         dex
0555 : ca               [ 2]         dex             ;+110
0556 : ca               [ 2]         dex
0557 : ca               [ 2]         dex
0558 : ca               [ 2]         dex
0559 : ca               [ 2]         dex
055a : ca               [ 2]         dex
055b : ca               [ 2]         dex
055c : ca               [ 2]         dex
055d : ca               [ 2]         dex
055e : ca               [ 2]         dex
055f : ca               [ 2]         dex             ;+120
0560 : ca               [ 2]         dex
0561 : ca               [ 2]         dex
0562 : ca               [ 2]         dex
0563 : ca               [ 2]         dex
0564 : ca               [ 2]         dex
0565 : ca               [ 2]         dex
0566 : ea               [ 2]         nop             ;offset landing zone - fo
0567 : ea               [ 2]         nop
0568 : ea               [ 2]         nop
0569 : ea               [ 2]         nop
056a : ea               [ 2]         nop
056b : f0fe             [ 4]         beq range_ok    ;+127 - max forward
                                     trap            ; bad range
056d : 4c6d05           [ 3]>        jmp *           ;failed anyway
                             
0570 : ea               [ 2]         nop             ;offset landing zone - to
0571 : ea               [ 2]         nop
0572 : ea               [ 2]         nop
0573 : ea               [ 2]         nop
0574 : ea               [ 2]         nop
0575 :                       range_ok
AS65 Assembler for R6502 [1.42].                                     Page   20
---------------------------- test_functional.asm -----------------------------

0575 : ea               [ 2]         nop
0576 : ea               [ 2]         nop
0577 : ea               [ 2]         nop
0578 : ea               [ 2]         nop
0579 : ea               [ 2]         nop
057a : c000             [ 2]         cpy #0
057c : f0fe             [ 4]         beq range_end   
057e : 4c4604           [ 3]         jmp range_loop
0581 :                       range_end               ;range test successful
                                 endif
                                     next_test
0581 : ad0002           [ 4]>            lda test_case   ;previous test
0584 : c901             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0586 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0002 =                      >test_num = test_num + 1
0588 : a902             [ 2]>            lda #test_num   ;*** next tests' numb
058a : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ;partial test BNE & CMP, CPX, CPY immediate
058d : c001             [ 2]         cpy #1          ;testing BNE true
058f : d0fe             [ 4]         bne test_bne
                                     trap 
0591 : 4c9105           [ 3]>        jmp *           ;failed anyway
                             
0594 :                       test_bne
0594 : a900             [ 2]         lda #0 
0596 : c900             [ 2]         cmp #0          ;test compare immediate 
                                     trap_ne
0598 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     trap_cc
059a : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_mi
059c : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
059e : c901             [ 2]         cmp #1
                                     trap_eq 
05a0 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_cs
05a2 : b0fe             [ 3]>        bcs *           ;failed carry set
                             
                                     trap_pl
05a4 : 10fe             [ 3]>        bpl *           ;failed plus (bit 7 clear
                             
05a6 : aa               [ 2]         tax 
05a7 : e000             [ 2]         cpx #0          ;test compare x immediate
                                     trap_ne
05a9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     trap_cc
05ab : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_mi
05ad : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
05af : e001             [ 2]         cpx #1
AS65 Assembler for R6502 [1.42].                                     Page   21
---------------------------- test_functional.asm -----------------------------

                                     trap_eq 
05b1 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_cs
05b3 : b0fe             [ 3]>        bcs *           ;failed carry set
                             
                                     trap_pl
05b5 : 10fe             [ 3]>        bpl *           ;failed plus (bit 7 clear
                             
05b7 : a8               [ 2]         tay 
05b8 : c000             [ 2]         cpy #0          ;test compare y immediate
                                     trap_ne
05ba : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     trap_cc
05bc : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_mi
05be : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
05c0 : c001             [ 2]         cpy #1
                                     trap_eq 
05c2 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_cs
05c4 : b0fe             [ 3]>        bcs *           ;failed carry set
                             
                                     trap_pl
05c6 : 10fe             [ 3]>        bpl *           ;failed plus (bit 7 clear
                             
                                     next_test
05c8 : ad0002           [ 4]>            lda test_case   ;previous test
05cb : c902             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
05cd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0003 =                      >test_num = test_num + 1
05cf : a903             [ 2]>            lda #test_num   ;*** next tests' numb
05d1 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             ;testing stack operations PHA PHP PLA PLP
                                         
05d4 : a2ff             [ 2]         ldx #$ff        ;initialize stack
05d6 : 9a               [ 2]         txs
05d7 : a955             [ 2]         lda #$55
05d9 : 48               [ 3]         pha
05da : a9aa             [ 2]         lda #$aa
05dc : 48               [ 3]         pha
05dd : cdfe01           [ 4]         cmp $1fe        ;on stack ?
                                     trap_ne
05e0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
05e2 : ba               [ 2]         tsx
05e3 : 8a               [ 2]         txa             ;overwrite accu
05e4 : c9fd             [ 2]         cmp #$fd        ;sp decremented?
                                     trap_ne
05e6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
05e8 : 68               [ 4]         pla
05e9 : c9aa             [ 2]         cmp #$aa        ;successful retreived fro
                                     trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   22
---------------------------- test_functional.asm -----------------------------

05eb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
05ed : 68               [ 4]         pla
05ee : c955             [ 2]         cmp #$55
                                     trap_ne
05f0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
05f2 : cdff01           [ 4]         cmp $1ff        ;remains on stack?
                                     trap_ne
05f5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
05f7 : ba               [ 2]         tsx
05f8 : e0ff             [ 2]         cpx #$ff        ;sp incremented?
                                     trap_ne
05fa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     next_test
05fc : ad0002           [ 4]>            lda test_case   ;previous test
05ff : c903             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0601 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0004 =                      >test_num = test_num + 1
0603 : a904             [ 2]>            lda #test_num   ;*** next tests' numb
0605 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ;testing branch decisions BPL BMI BVC BVS BCC BCS
                                     set_stat $ff    ;all on
                            >            load_flag $ff    
0608 : a9ff             [ 2]>            lda #$ff                 ;allow test 
                            >
060a : 48               [ 3]>            pha         ;use stack to load status
060b : 28               [ 4]>            plp
                             
060c : 10fe             [ 4]         bpl nbr1        ;branches should not be t
060e : 50fe             [ 4]         bvc nbr2
0610 : 90fe             [ 4]         bcc nbr3
0612 : d0fe             [ 4]         bne nbr4
0614 : 30fe             [ 4]         bmi br1         ;branches should be taken
                                     trap 
0616 : 4c1606           [ 3]>        jmp *           ;failed anyway
                             
0619 : 70fe             [ 4] br1     bvs br2
                                     trap 
061b : 4c1b06           [ 3]>        jmp *           ;failed anyway
                             
061e : b0fe             [ 4] br2     bcs br3
                                     trap 
0620 : 4c2006           [ 3]>        jmp *           ;failed anyway
                             
0623 : f0fe             [ 4] br3     beq br4
                                     trap 
0625 : 4c2506           [ 3]>        jmp *           ;failed anyway
                             
0628 :                       nbr1
                                     trap            ;previous bpl taken 
0628 : 4c2806           [ 3]>        jmp *           ;failed anyway
                             
062b :                       nbr2
                                     trap            ;previous bvc taken
AS65 Assembler for R6502 [1.42].                                     Page   23
---------------------------- test_functional.asm -----------------------------

062b : 4c2b06           [ 3]>        jmp *           ;failed anyway
                             
062e :                       nbr3
                                     trap            ;previous bcc taken
062e : 4c2e06           [ 3]>        jmp *           ;failed anyway
                             
0631 :                       nbr4
                                     trap            ;previous bne taken
0631 : 4c3106           [ 3]>        jmp *           ;failed anyway
                             
0634 : 08               [ 3] br4     php
0635 : ba               [ 2]         tsx
0636 : e0fe             [ 2]         cpx #$fe        ;sp after php?
                                     trap_ne
0638 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
063a : 68               [ 4]         pla
                                     cmp_flag $ff    ;returned all flags on?
063b : c9ff             [ 2]>            cmp #($ff    |fao)&m8    ;expected fl
                             
                                     trap_ne
063d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
063f : ba               [ 2]         tsx
0640 : e0ff             [ 2]         cpx #$ff        ;sp after php?
                                     trap_ne
0642 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0      ;all off
                            >            load_flag 0      
0644 : a900             [ 2]>            lda #0                   ;allow test 
                            >
0646 : 48               [ 3]>            pha         ;use stack to load status
0647 : 28               [ 4]>            plp
                             
0648 : 30fe             [ 4]         bmi nbr11       ;branches should not be t
064a : 70fe             [ 4]         bvs nbr12
064c : b0fe             [ 4]         bcs nbr13
064e : f0fe             [ 4]         beq nbr14
0650 : 10fe             [ 4]         bpl br11        ;branches should be taken
                                     trap 
0652 : 4c5206           [ 3]>        jmp *           ;failed anyway
                             
0655 : 50fe             [ 4] br11    bvc br12
                                     trap 
0657 : 4c5706           [ 3]>        jmp *           ;failed anyway
                             
065a : 90fe             [ 4] br12    bcc br13
                                     trap 
065c : 4c5c06           [ 3]>        jmp *           ;failed anyway
                             
065f : d0fe             [ 4] br13    bne br14
                                     trap 
0661 : 4c6106           [ 3]>        jmp *           ;failed anyway
                             
0664 :                       nbr11
                                     trap            ;previous bmi taken 
0664 : 4c6406           [ 3]>        jmp *           ;failed anyway
                             
0667 :                       nbr12
                                     trap            ;previous bvs taken 
0667 : 4c6706           [ 3]>        jmp *           ;failed anyway
AS65 Assembler for R6502 [1.42].                                     Page   24
---------------------------- test_functional.asm -----------------------------

                             
066a :                       nbr13
                                     trap            ;previous bcs taken 
066a : 4c6a06           [ 3]>        jmp *           ;failed anyway
                             
066d :                       nbr14
                                     trap            ;previous beq taken 
066d : 4c6d06           [ 3]>        jmp *           ;failed anyway
                             
0670 : 08               [ 3] br14    php
0671 : 68               [ 4]         pla
                                     cmp_flag 0      ;flags off except break (
0672 : c930             [ 2]>            cmp #(0      |fao)&m8    ;expected fl
                             
                                     trap_ne
0674 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     ;crosscheck flags
                                     set_stat zero
                            >            load_flag zero
0676 : a902             [ 2]>            lda #zero             ;allow test to 
                            >
0678 : 48               [ 3]>            pha         ;use stack to load status
0679 : 28               [ 4]>            plp
                             
067a : d0fe             [ 4]         bne brzs1
067c : f0fe             [ 4]         beq brzs2
067e :                       brzs1
                                     trap            ;branch zero/non zero
067e : 4c7e06           [ 3]>        jmp *           ;failed anyway
                             
0681 : b0fe             [ 4] brzs2   bcs brzs3
0683 : 90fe             [ 4]         bcc brzs4
0685 :                       brzs3
                                     trap            ;branch carry/no carry
0685 : 4c8506           [ 3]>        jmp *           ;failed anyway
                             
0688 : 30fe             [ 4] brzs4   bmi brzs5
068a : 10fe             [ 4]         bpl brzs6
068c :                       brzs5
                                     trap            ;branch minus/plus
068c : 4c8c06           [ 3]>        jmp *           ;failed anyway
                             
068f : 70fe             [ 4] brzs6   bvs brzs7
0691 : 50fe             [ 4]         bvc brzs8
0693 :                       brzs7
                                     trap            ;branch overflow/no overf
0693 : 4c9306           [ 3]>        jmp *           ;failed anyway
                             
0696 :                       brzs8
                                     set_stat carry
                            >            load_flag carry
0696 : a901             [ 2]>            lda #carry             ;allow test to
                            >
0698 : 48               [ 3]>            pha         ;use stack to load status
0699 : 28               [ 4]>            plp
                             
069a : f0fe             [ 4]         beq brcs1
069c : d0fe             [ 4]         bne brcs2
069e :                       brcs1
                                     trap            ;branch zero/non zero
069e : 4c9e06           [ 3]>        jmp *           ;failed anyway
AS65 Assembler for R6502 [1.42].                                     Page   25
---------------------------- test_functional.asm -----------------------------

                             
06a1 : 90fe             [ 4] brcs2   bcc brcs3
06a3 : b0fe             [ 4]         bcs brcs4
06a5 :                       brcs3
                                     trap            ;branch carry/no carry
06a5 : 4ca506           [ 3]>        jmp *           ;failed anyway
                             
06a8 : 30fe             [ 4] brcs4   bmi brcs5
06aa : 10fe             [ 4]         bpl brcs6
06ac :                       brcs5
                                     trap            ;branch minus/plus
06ac : 4cac06           [ 3]>        jmp *           ;failed anyway
                             
06af : 70fe             [ 4] brcs6   bvs brcs7
06b1 : 50fe             [ 4]         bvc brcs8
06b3 :                       brcs7
                                     trap            ;branch overflow/no overf
06b3 : 4cb306           [ 3]>        jmp *           ;failed anyway
                             
                             
06b6 :                       brcs8
                                     set_stat minus
                            >            load_flag minus
06b6 : a980             [ 2]>            lda #minus             ;allow test to
                            >
06b8 : 48               [ 3]>            pha         ;use stack to load status
06b9 : 28               [ 4]>            plp
                             
06ba : f0fe             [ 4]         beq brmi1
06bc : d0fe             [ 4]         bne brmi2
06be :                       brmi1
                                     trap            ;branch zero/non zero
06be : 4cbe06           [ 3]>        jmp *           ;failed anyway
                             
06c1 : b0fe             [ 4] brmi2   bcs brmi3
06c3 : 90fe             [ 4]         bcc brmi4
06c5 :                       brmi3
                                     trap            ;branch carry/no carry
06c5 : 4cc506           [ 3]>        jmp *           ;failed anyway
                             
06c8 : 10fe             [ 4] brmi4   bpl brmi5
06ca : 30fe             [ 4]         bmi brmi6
06cc :                       brmi5
                                     trap            ;branch minus/plus
06cc : 4ccc06           [ 3]>        jmp *           ;failed anyway
                             
06cf : 70fe             [ 4] brmi6   bvs brmi7
06d1 : 50fe             [ 4]         bvc brmi8
06d3 :                       brmi7
                                     trap            ;branch overflow/no overf
06d3 : 4cd306           [ 3]>        jmp *           ;failed anyway
                             
06d6 :                       brmi8
                                     set_stat overfl
                            >            load_flag overfl
06d6 : a940             [ 2]>            lda #overfl             ;allow test t
                            >
06d8 : 48               [ 3]>            pha         ;use stack to load status
06d9 : 28               [ 4]>            plp
                             
06da : f0fe             [ 4]         beq brvs1
06dc : d0fe             [ 4]         bne brvs2
AS65 Assembler for R6502 [1.42].                                     Page   26
---------------------------- test_functional.asm -----------------------------

06de :                       brvs1
                                     trap            ;branch zero/non zero
06de : 4cde06           [ 3]>        jmp *           ;failed anyway
                             
06e1 : b0fe             [ 4] brvs2   bcs brvs3
06e3 : 90fe             [ 4]         bcc brvs4
06e5 :                       brvs3
                                     trap            ;branch carry/no carry
06e5 : 4ce506           [ 3]>        jmp *           ;failed anyway
                             
06e8 : 30fe             [ 4] brvs4   bmi brvs5
06ea : 10fe             [ 4]         bpl brvs6
06ec :                       brvs5
                                     trap            ;branch minus/plus
06ec : 4cec06           [ 3]>        jmp *           ;failed anyway
                             
06ef : 50fe             [ 4] brvs6   bvc brvs7
06f1 : 70fe             [ 4]         bvs brvs8
06f3 :                       brvs7
                                     trap            ;branch overflow/no overf
06f3 : 4cf306           [ 3]>        jmp *           ;failed anyway
                             
06f6 :                       brvs8
                                     set_stat $ff-zero
                            >            load_flag $ff-zero
06f6 : a9fd             [ 2]>            lda #$ff-zero             ;allow test
                            >
06f8 : 48               [ 3]>            pha         ;use stack to load status
06f9 : 28               [ 4]>            plp
                             
06fa : f0fe             [ 4]         beq brzc1
06fc : d0fe             [ 4]         bne brzc2
06fe :                       brzc1
                                     trap            ;branch zero/non zero
06fe : 4cfe06           [ 3]>        jmp *           ;failed anyway
                             
0701 : 90fe             [ 4] brzc2   bcc brzc3
0703 : b0fe             [ 4]         bcs brzc4
0705 :                       brzc3
                                     trap            ;branch carry/no carry
0705 : 4c0507           [ 3]>        jmp *           ;failed anyway
                             
0708 : 10fe             [ 4] brzc4   bpl brzc5
070a : 30fe             [ 4]         bmi brzc6
070c :                       brzc5
                                     trap            ;branch minus/plus
070c : 4c0c07           [ 3]>        jmp *           ;failed anyway
                             
070f : 50fe             [ 4] brzc6   bvc brzc7
0711 : 70fe             [ 4]         bvs brzc8
0713 :                       brzc7
                                     trap            ;branch overflow/no overf
0713 : 4c1307           [ 3]>        jmp *           ;failed anyway
                             
0716 :                       brzc8
                                     set_stat $ff-carry
                            >            load_flag $ff-carry
0716 : a9fe             [ 2]>            lda #$ff-carry             ;allow tes
                            >
0718 : 48               [ 3]>            pha         ;use stack to load status
0719 : 28               [ 4]>            plp
                             
AS65 Assembler for R6502 [1.42].                                     Page   27
---------------------------- test_functional.asm -----------------------------

071a : d0fe             [ 4]         bne brcc1
071c : f0fe             [ 4]         beq brcc2
071e :                       brcc1
                                     trap            ;branch zero/non zero
071e : 4c1e07           [ 3]>        jmp *           ;failed anyway
                             
0721 : b0fe             [ 4] brcc2   bcs brcc3
0723 : 90fe             [ 4]         bcc brcc4
0725 :                       brcc3
                                     trap            ;branch carry/no carry
0725 : 4c2507           [ 3]>        jmp *           ;failed anyway
                             
0728 : 10fe             [ 4] brcc4   bpl brcc5
072a : 30fe             [ 4]         bmi brcc6
072c :                       brcc5
                                     trap            ;branch minus/plus
072c : 4c2c07           [ 3]>        jmp *           ;failed anyway
                             
072f : 50fe             [ 4] brcc6   bvc brcc7
0731 : 70fe             [ 4]         bvs brcc8
0733 :                       brcc7
                                     trap            ;branch overflow/no overf
0733 : 4c3307           [ 3]>        jmp *           ;failed anyway
                             
0736 :                       brcc8
                                     set_stat $ff-minus
                            >            load_flag $ff-minus
0736 : a97f             [ 2]>            lda #$ff-minus             ;allow tes
                            >
0738 : 48               [ 3]>            pha         ;use stack to load status
0739 : 28               [ 4]>            plp
                             
073a : d0fe             [ 4]         bne brpl1
073c : f0fe             [ 4]         beq brpl2
073e :                       brpl1
                                     trap            ;branch zero/non zero
073e : 4c3e07           [ 3]>        jmp *           ;failed anyway
                             
0741 : 90fe             [ 4] brpl2   bcc brpl3
0743 : b0fe             [ 4]         bcs brpl4
0745 :                       brpl3
                                     trap            ;branch carry/no carry
0745 : 4c4507           [ 3]>        jmp *           ;failed anyway
                             
0748 : 30fe             [ 4] brpl4   bmi brpl5
074a : 10fe             [ 4]         bpl brpl6
074c :                       brpl5
                                     trap            ;branch minus/plus
074c : 4c4c07           [ 3]>        jmp *           ;failed anyway
                             
074f : 50fe             [ 4] brpl6   bvc brpl7
0751 : 70fe             [ 4]         bvs brpl8
0753 :                       brpl7
                                     trap            ;branch overflow/no overf
0753 : 4c5307           [ 3]>        jmp *           ;failed anyway
                             
0756 :                       brpl8
                                     set_stat $ff-overfl
                            >            load_flag $ff-overfl
0756 : a9bf             [ 2]>            lda #$ff-overfl             ;allow te
                            >
0758 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page   28
---------------------------- test_functional.asm -----------------------------

0759 : 28               [ 4]>            plp
                             
075a : d0fe             [ 4]         bne brvc1
075c : f0fe             [ 4]         beq brvc2
075e :                       brvc1
                                     trap            ;branch zero/non zero
075e : 4c5e07           [ 3]>        jmp *           ;failed anyway
                             
0761 : 90fe             [ 4] brvc2   bcc brvc3
0763 : b0fe             [ 4]         bcs brvc4
0765 :                       brvc3
                                     trap            ;branch carry/no carry
0765 : 4c6507           [ 3]>        jmp *           ;failed anyway
                             
0768 : 10fe             [ 4] brvc4   bpl brvc5
076a : 30fe             [ 4]         bmi brvc6
076c :                       brvc5
                                     trap            ;branch minus/plus
076c : 4c6c07           [ 3]>        jmp *           ;failed anyway
                             
076f : 70fe             [ 4] brvc6   bvs brvc7
0771 : 50fe             [ 4]         bvc brvc8
0773 :                       brvc7
                                     trap            ;branch overflow/no overf
0773 : 4c7307           [ 3]>        jmp *           ;failed anyway
                             
0776 :                       brvc8
                                     next_test
0776 : ad0002           [ 4]>            lda test_case   ;previous test
0779 : c904             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
077b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0005 =                      >test_num = test_num + 1
077d : a905             [ 2]>            lda #test_num   ;*** next tests' numb
077f : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; test PHA does not alter flags or accumulator bu
0782 : a255             [ 2]         ldx #$55        ;x & y protected
0784 : a0aa             [ 2]         ldy #$aa
                                     set_a 1,$ff     ;push
                            >            load_flag $ff     
0786 : a9ff             [ 2]>            lda #$ff                  ;allow test
                            >
0788 : 48               [ 3]>            pha         ;use stack to load status
0789 : a901             [ 2]>            lda #1     ;precharge accu
078b : 28               [ 4]>            plp
                             
078c : 48               [ 3]         pha
                                     tst_a 1,$ff
078d : 08               [ 3]>            php         ;save flags
078e : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0790 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0792 : 68               [ 4]>            pla         ;load status
0793 : 48               [ 3]>            pha
                            >            cmp_flag $ff
0794 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
AS65 Assembler for R6502 [1.42].                                     Page   29
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
0796 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0798 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 0,0
                            >            load_flag 0
0799 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
079b : 48               [ 3]>            pha         ;use stack to load status
079c : a900             [ 2]>            lda #0     ;precharge accu
079e : 28               [ 4]>            plp
                             
079f : 48               [ 3]         pha
                                     tst_a 0,0
07a0 : 08               [ 3]>            php         ;save flags
07a1 : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
07a3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07a5 : 68               [ 4]>            pla         ;load status
07a6 : 48               [ 3]>            pha
                            >            cmp_flag 0
07a7 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
07a9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07ab : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $ff,$ff
                            >            load_flag $ff
07ac : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
07ae : 48               [ 3]>            pha         ;use stack to load status
07af : a9ff             [ 2]>            lda #$ff     ;precharge accu
07b1 : 28               [ 4]>            plp
                             
07b2 : 48               [ 3]         pha
                                     tst_a $ff,$ff
07b3 : 08               [ 3]>            php         ;save flags
07b4 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
07b6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07b8 : 68               [ 4]>            pla         ;load status
07b9 : 48               [ 3]>            pha
                            >            cmp_flag $ff
07ba : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
07bc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07be : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,0
                            >            load_flag 0
07bf : a900             [ 2]>            lda #0             ;allow test to cha
                            >
07c1 : 48               [ 3]>            pha         ;use stack to load status
07c2 : a901             [ 2]>            lda #1     ;precharge accu
07c4 : 28               [ 4]>            plp
AS65 Assembler for R6502 [1.42].                                     Page   30
---------------------------- test_functional.asm -----------------------------

                             
07c5 : 48               [ 3]         pha
                                     tst_a 1,0
07c6 : 08               [ 3]>            php         ;save flags
07c7 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
07c9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07cb : 68               [ 4]>            pla         ;load status
07cc : 48               [ 3]>            pha
                            >            cmp_flag 0
07cd : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
07cf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07d1 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 0,$ff
                            >            load_flag $ff
07d2 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
07d4 : 48               [ 3]>            pha         ;use stack to load status
07d5 : a900             [ 2]>            lda #0     ;precharge accu
07d7 : 28               [ 4]>            plp
                             
07d8 : 48               [ 3]         pha
                                     tst_a 0,$ff
07d9 : 08               [ 3]>            php         ;save flags
07da : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
07dc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07de : 68               [ 4]>            pla         ;load status
07df : 48               [ 3]>            pha
                            >            cmp_flag $ff
07e0 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
07e2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07e4 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $ff,0
                            >            load_flag 0
07e5 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
07e7 : 48               [ 3]>            pha         ;use stack to load status
07e8 : a9ff             [ 2]>            lda #$ff     ;precharge accu
07ea : 28               [ 4]>            plp
                             
07eb : 48               [ 3]         pha
                                     tst_a $ff,0
07ec : 08               [ 3]>            php         ;save flags
07ed : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
07ef : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07f1 : 68               [ 4]>            pla         ;load status
07f2 : 48               [ 3]>            pha
                            >            cmp_flag 0
07f3 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
AS65 Assembler for R6502 [1.42].                                     Page   31
---------------------------- test_functional.asm -----------------------------

                            >
                            >            trap_ne
07f5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
07f7 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 0,$ff     ;pull
                            >            load_flag $ff     
07f8 : a9ff             [ 2]>            lda #$ff                  ;allow test
                            >
07fa : 48               [ 3]>            pha         ;use stack to load status
07fb : a900             [ 2]>            lda #0     ;precharge accu
07fd : 28               [ 4]>            plp
                             
07fe : 68               [ 4]         pla
                                     tst_a $ff,$ff-zero
07ff : 08               [ 3]>            php         ;save flags
0800 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
0802 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0804 : 68               [ 4]>            pla         ;load status
0805 : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0806 : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0808 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
080a : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $ff,0
                            >            load_flag 0
080b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
080d : 48               [ 3]>            pha         ;use stack to load status
080e : a9ff             [ 2]>            lda #$ff     ;precharge accu
0810 : 28               [ 4]>            plp
                             
0811 : 68               [ 4]         pla
                                     tst_a 0,zero
0812 : 08               [ 3]>            php         ;save flags
0813 : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
0815 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0817 : 68               [ 4]>            pla         ;load status
0818 : 48               [ 3]>            pha
                            >            cmp_flag zero
0819 : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
081b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
081d : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $fe,$ff
                            >            load_flag $ff
081e : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0820 : 48               [ 3]>            pha         ;use stack to load status
0821 : a9fe             [ 2]>            lda #$fe     ;precharge accu
AS65 Assembler for R6502 [1.42].                                     Page   32
---------------------------- test_functional.asm -----------------------------

0823 : 28               [ 4]>            plp
                             
0824 : 68               [ 4]         pla
                                     tst_a 1,$ff-zero-minus
0825 : 08               [ 3]>            php         ;save flags
0826 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0828 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
082a : 68               [ 4]>            pla         ;load status
082b : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero-minus
082c : c97d             [ 2]>            cmp #($ff-zero-minus|fao)&m8    ;expe
                            >
                            >            trap_ne
082e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0830 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 0,0
                            >            load_flag 0
0831 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0833 : 48               [ 3]>            pha         ;use stack to load status
0834 : a900             [ 2]>            lda #0     ;precharge accu
0836 : 28               [ 4]>            plp
                             
0837 : 68               [ 4]         pla
                                     tst_a $ff,minus
0838 : 08               [ 3]>            php         ;save flags
0839 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
083b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
083d : 68               [ 4]>            pla         ;load status
083e : 48               [ 3]>            pha
                            >            cmp_flag minus
083f : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0841 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0843 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $ff,$ff
                            >            load_flag $ff
0844 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0846 : 48               [ 3]>            pha         ;use stack to load status
0847 : a9ff             [ 2]>            lda #$ff     ;precharge accu
0849 : 28               [ 4]>            plp
                             
084a : 68               [ 4]         pla
                                     tst_a 0,$ff-minus
084b : 08               [ 3]>            php         ;save flags
084c : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
084e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0850 : 68               [ 4]>            pla         ;load status
0851 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
AS65 Assembler for R6502 [1.42].                                     Page   33
---------------------------- test_functional.asm -----------------------------

0852 : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0854 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0856 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $fe,0
                            >            load_flag 0
0857 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0859 : 48               [ 3]>            pha         ;use stack to load status
085a : a9fe             [ 2]>            lda #$fe     ;precharge accu
085c : 28               [ 4]>            plp
                             
085d : 68               [ 4]         pla
                                     tst_a 1,0
085e : 08               [ 3]>            php         ;save flags
085f : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0861 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0863 : 68               [ 4]>            pla         ;load status
0864 : 48               [ 3]>            pha
                            >            cmp_flag 0
0865 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0867 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0869 : 28               [ 4]>            plp         ;restore status
                             
086a : e055             [ 2]         cpx #$55        ;x & y unchanged?
                                     trap_ne
086c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
086e : c0aa             [ 2]         cpy #$aa
                                     trap_ne
0870 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     next_test
0872 : ad0002           [ 4]>            lda test_case   ;previous test
0875 : c905             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0877 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0006 =                      >test_num = test_num + 1
0879 : a906             [ 2]>            lda #test_num   ;*** next tests' numb
087b : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                              
                             ; partial pretest EOR #
                                     set_a $3c,0
                            >            load_flag 0
087e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0880 : 48               [ 3]>            pha         ;use stack to load status
0881 : a93c             [ 2]>            lda #$3c     ;precharge accu
0883 : 28               [ 4]>            plp
                             
0884 : 49c3             [ 2]         eor #$c3
AS65 Assembler for R6502 [1.42].                                     Page   34
---------------------------- test_functional.asm -----------------------------

                                     tst_a $ff,fn
0886 : 08               [ 3]>            php         ;save flags
0887 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
0889 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
088b : 68               [ 4]>            pla         ;load status
088c : 48               [ 3]>            pha
                            >            cmp_flag fn
088d : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
088f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0891 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $c3,0
                            >            load_flag 0
0892 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0894 : 48               [ 3]>            pha         ;use stack to load status
0895 : a9c3             [ 2]>            lda #$c3     ;precharge accu
0897 : 28               [ 4]>            plp
                             
0898 : 49c3             [ 2]         eor #$c3
                                     tst_a 0,fz
089a : 08               [ 3]>            php         ;save flags
089b : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
089d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
089f : 68               [ 4]>            pla         ;load status
08a0 : 48               [ 3]>            pha
                            >            cmp_flag fz
08a1 : c932             [ 2]>            cmp #(fz|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
08a3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
08a5 : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
08a6 : ad0002           [ 4]>            lda test_case   ;previous test
08a9 : c906             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
08ab : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0007 =                      >test_num = test_num + 1
08ad : a907             [ 2]>            lda #test_num   ;*** next tests' numb
08af : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; PC modifying instructions except branches (NOP,
                             ; testing NOP
08b2 : a224             [ 2]         ldx #$24
08b4 : a042             [ 2]         ldy #$42
                                     set_a $18,0
                            >            load_flag 0
08b6 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
08b8 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page   35
---------------------------- test_functional.asm -----------------------------

08b9 : a918             [ 2]>            lda #$18     ;precharge accu
08bb : 28               [ 4]>            plp
                             
08bc : ea               [ 2]         nop
                                     tst_a $18,0
08bd : 08               [ 3]>            php         ;save flags
08be : c918             [ 2]>            cmp #$18     ;test result
                            >            trap_ne
08c0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
08c2 : 68               [ 4]>            pla         ;load status
08c3 : 48               [ 3]>            pha
                            >            cmp_flag 0
08c4 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
08c6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
08c8 : 28               [ 4]>            plp         ;restore status
                             
08c9 : e024             [ 2]         cpx #$24
                                     trap_ne
08cb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
08cd : c042             [ 2]         cpy #$42
                                     trap_ne
08cf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
08d1 : a2db             [ 2]         ldx #$db
08d3 : a0bd             [ 2]         ldy #$bd
                                     set_a $e7,$ff
                            >            load_flag $ff
08d5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
08d7 : 48               [ 3]>            pha         ;use stack to load status
08d8 : a9e7             [ 2]>            lda #$e7     ;precharge accu
08da : 28               [ 4]>            plp
                             
08db : ea               [ 2]         nop
                                     tst_a $e7,$ff
08dc : 08               [ 3]>            php         ;save flags
08dd : c9e7             [ 2]>            cmp #$e7     ;test result
                            >            trap_ne
08df : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
08e1 : 68               [ 4]>            pla         ;load status
08e2 : 48               [ 3]>            pha
                            >            cmp_flag $ff
08e3 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
08e5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
08e7 : 28               [ 4]>            plp         ;restore status
                             
08e8 : e0db             [ 2]         cpx #$db
                                     trap_ne
08ea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
08ec : c0bd             [ 2]         cpy #$bd
                                     trap_ne
08ee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   36
---------------------------- test_functional.asm -----------------------------

                             
                                     next_test
08f0 : ad0002           [ 4]>            lda test_case   ;previous test
08f3 : c907             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
08f5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0008 =                      >test_num = test_num + 1
08f7 : a908             [ 2]>            lda #test_num   ;*** next tests' numb
08f9 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; jump absolute
                                     set_stat $0
                            >            load_flag $0
08fc : a900             [ 2]>            lda #$0             ;allow test to ch
                            >
08fe : 48               [ 3]>            pha         ;use stack to load status
08ff : 28               [ 4]>            plp
                             
0900 : a946             [ 2]         lda #'F'
0902 : a241             [ 2]         ldx #'A'
0904 : a052             [ 2]         ldy #'R'        ;N=0, V=0, Z=0, C=0
0906 : 4c0000           [ 3]         jmp test_far
0909 : ea               [ 2]         nop
090a : ea               [ 2]         nop
                                     trap_ne         ;runover protection
090b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
090d : e8               [ 2]         inx
090e : e8               [ 2]         inx
090f :                       far_ret 
                                     trap_eq         ;returned flags OK?
090f : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_pl
0911 : 10fe             [ 3]>        bpl *           ;failed plus (bit 7 clear
                             
                                     trap_cc
0913 : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_vc
0915 : 50fe             [ 3]>        bvc *           ;failed overflow clear
                             
0917 : c9ec             [ 2]         cmp #('F'^$aa)  ;returned registers OK?
                                     trap_ne
0919 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
091b : e042             [ 2]         cpx #('A'+1)
                                     trap_ne
091d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
091f : c04f             [ 2]         cpy #('R'-3)
                                     trap_ne
0921 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0923 : ca               [ 2]         dex
0924 : c8               [ 2]         iny
0925 : c8               [ 2]         iny
0926 : c8               [ 2]         iny
0927 : 49aa             [ 2]         eor #$aa        ;N=0, V=1, Z=0, C=1
AS65 Assembler for R6502 [1.42].                                     Page   37
---------------------------- test_functional.asm -----------------------------

0929 : 4c0000           [ 3]         jmp test_near
092c : ea               [ 2]         nop
092d : ea               [ 2]         nop
                                     trap_ne         ;runover protection
092e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0930 : e8               [ 2]         inx
0931 : e8               [ 2]         inx
0932 :                       test_near
                                     trap_eq         ;passed flags OK?
0932 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_mi
0934 : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
                                     trap_cc
0936 : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_vc
0938 : 50fe             [ 3]>        bvc *           ;failed overflow clear
                             
093a : c946             [ 2]         cmp #'F'        ;passed registers OK?
                                     trap_ne
093c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
093e : e041             [ 2]         cpx #'A'
                                     trap_ne
0940 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0942 : c052             [ 2]         cpy #'R'
                                     trap_ne
0944 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     next_test
0946 : ad0002           [ 4]>            lda test_case   ;previous test
0949 : c908             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
094b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0009 =                      >test_num = test_num + 1
094d : a909             [ 2]>            lda #test_num   ;*** next tests' numb
094f : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; jump indirect
                                     set_stat 0
                            >            load_flag 0
0952 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0954 : 48               [ 3]>            pha         ;use stack to load status
0955 : 28               [ 4]>            plp
                             
0956 : a949             [ 2]         lda #'I'
0958 : a24e             [ 2]         ldx #'N'
095a : a044             [ 2]         ldy #'D'        ;N=0, V=0, Z=0, C=0
095c : 6c5c09           [ 6]         jmp (ptr_tst_ind)
095f : ea               [ 2]         nop
                                     trap_ne         ;runover protection
0960 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0962 : 88               [ 2]         dey
AS65 Assembler for R6502 [1.42].                                     Page   38
---------------------------- test_functional.asm -----------------------------

0963 : 88               [ 2]         dey
0964 :                       ind_ret 
0964 : 08               [ 3]         php             ;either SP or Y count wil
0965 : 88               [ 2]         dey
0966 : 88               [ 2]         dey
0967 : 88               [ 2]         dey
0968 : 28               [ 4]         plp
                                     trap_eq         ;returned flags OK?
0969 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_pl
096b : 10fe             [ 3]>        bpl *           ;failed plus (bit 7 clear
                             
                                     trap_cc
096d : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_vc
096f : 50fe             [ 3]>        bvc *           ;failed overflow clear
                             
0971 : c9e3             [ 2]         cmp #('I'^$aa)  ;returned registers OK?
                                     trap_ne
0973 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0975 : e04f             [ 2]         cpx #('N'+1)
                                     trap_ne
0977 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0979 : c03e             [ 2]         cpy #('D'-6)
                                     trap_ne
097b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
097d : ba               [ 2]         tsx             ;SP check
097e : e0ff             [ 2]         cpx #$ff
                                     trap_ne
0980 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     next_test
0982 : ad0002           [ 4]>            lda test_case   ;previous test
0985 : c909             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0987 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
000a =                      >test_num = test_num + 1
0989 : a90a             [ 2]>            lda #test_num   ;*** next tests' numb
098b : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; jump subroutine & return from subroutine
                                     set_stat 0
                            >            load_flag 0
098e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0990 : 48               [ 3]>            pha         ;use stack to load status
0991 : 28               [ 4]>            plp
                             
0992 : a94a             [ 2]         lda #'J'
0994 : a253             [ 2]         ldx #'S'
0996 : a052             [ 2]         ldy #'R'        ;N=0, V=0, Z=0, C=0
0998 : 200000           [ 6]         jsr test_jsr
099a =                       jsr_ret = *-1           ;last address of jsr = re
099b : 08               [ 3]         php             ;either SP or Y count wil
AS65 Assembler for R6502 [1.42].                                     Page   39
---------------------------- test_functional.asm -----------------------------

099c : 88               [ 2]         dey
099d : 88               [ 2]         dey
099e : 88               [ 2]         dey
099f : 28               [ 4]         plp
                                     trap_eq         ;returned flags OK?
09a0 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
                                     trap_pl
09a2 : 10fe             [ 3]>        bpl *           ;failed plus (bit 7 clear
                             
                                     trap_cc
09a4 : 90fe             [ 3]>        bcc *           ;failed carry clear
                             
                                     trap_vc
09a6 : 50fe             [ 3]>        bvc *           ;failed overflow clear
                             
09a8 : c9e0             [ 2]         cmp #('J'^$aa)  ;returned registers OK?
                                     trap_ne
09aa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09ac : e054             [ 2]         cpx #('S'+1)
                                     trap_ne
09ae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09b0 : c04c             [ 2]         cpy #('R'-6)
                                     trap_ne
09b2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09b4 : ba               [ 2]         tsx             ;sp?
09b5 : e0ff             [ 2]         cpx #$ff
                                     trap_ne
09b7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     next_test
09b9 : ad0002           [ 4]>            lda test_case   ;previous test
09bc : c90a             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
09be : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
000b =                      >test_num = test_num + 1
09c0 : a90b             [ 2]>            lda #test_num   ;*** next tests' numb
09c2 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; break & return from interrupt
                                 if ROM_vectors = 1
                                     load_flag 0     ;with interrupts enabled 
09c5 : a900             [ 2]>            lda #0                  ;allow test t
                             
09c7 : 48               [ 3]         pha
09c8 : a942             [ 2]         lda #'B'
09ca : a252             [ 2]         ldx #'R'
09cc : a04b             [ 2]         ldy #'K'
09ce : 28               [ 4]         plp             ;N=0, V=0, Z=0, C=0
09cf : 00               [ 7]         brk
                                 else
                                     lda #hi brk_ret0 ;emulated break
                                     pha
                                     lda #lo brk_ret0
                                     pha
                                     load_flag fao    ;set break & unused on s
AS65 Assembler for R6502 [1.42].                                     Page   40
---------------------------- test_functional.asm -----------------------------

                                     pha
                                     load_flag intdis ;during interrupt
                                     pha
                                     lda #'B'
                                     ldx #'R'
                                     ldy #'K'
                                     plp             ;N=0, V=0, Z=0, C=0
                                     jmp irq_trap
                                 endif
09d0 : 88               [ 2]         dey             ;should not be executed
09d1 :                       brk_ret0                ;address of break return
09d1 : 08               [ 3]         php             ;either SP or Y count wil
09d2 : 88               [ 2]         dey
09d3 : 88               [ 2]         dey
09d4 : 88               [ 2]         dey
09d5 : c9e8             [ 2]         cmp #'B'^$aa    ;returned registers OK?
                                     ;the IRQ vector was never executed if A &
                                     trap_ne
09d7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09d9 : e053             [ 2]         cpx #'R'+1
                                     trap_ne
09db : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09dd : c045             [ 2]         cpy #'K'-6
                                     trap_ne
09df : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09e1 : 68               [ 4]         pla             ;returned flags OK (uncha
                                     cmp_flag 0
09e2 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                             
                                     trap_ne
09e4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09e6 : ba               [ 2]         tsx             ;sp?
09e7 : e0ff             [ 2]         cpx #$ff
                                     trap_ne
09e9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                 if ROM_vectors = 1
                                     load_flag $ff   ;with interrupts disabled
09eb : a9ff             [ 2]>            lda #$ff                ;allow test t
                             
09ed : 48               [ 3]         pha
09ee : a9bd             [ 2]         lda #$ff-'B'
09f0 : a2ad             [ 2]         ldx #$ff-'R'
09f2 : a0b4             [ 2]         ldy #$ff-'K'
09f4 : 28               [ 4]         plp             ;N=1, V=1, Z=1, C=1
09f5 : 00               [ 7]         brk
                                 else
                                     lda #hi brk_ret1 ;emulated break
                                     pha
                                     lda #lo brk_ret1
                                     pha
                                     load_flag $ff
                                     pha             ;set break & unused on st
                                     pha             ;actual flags
                                     lda #$ff-'B'
                                     ldx #$ff-'R'
                                     ldy #$ff-'K'
                                     plp             ;N=1, V=1, Z=1, C=1
AS65 Assembler for R6502 [1.42].                                     Page   41
---------------------------- test_functional.asm -----------------------------

                                     jmp irq_trap
                                 endif
09f6 : 88               [ 2]         dey             ;should not be executed
09f7 :                       brk_ret1                ;address of break return
09f7 : 08               [ 3]         php             ;either SP or Y count wil
09f8 : 88               [ 2]         dey
09f9 : 88               [ 2]         dey
09fa : 88               [ 2]         dey
09fb : c917             [ 2]         cmp #($ff-'B')^$aa  ;returned registers O
                                     ;the IRQ vector was never executed if A &
                                     trap_ne
09fd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
09ff : e0ae             [ 2]         cpx #$ff-'R'+1
                                     trap_ne
0a01 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0a03 : c0ae             [ 2]         cpy #$ff-'K'-6
                                     trap_ne
0a05 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0a07 : 68               [ 4]         pla             ;returned flags OK (uncha
                                     cmp_flag $ff
0a08 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                             
                                     trap_ne
0a0a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0a0c : ba               [ 2]         tsx             ;sp?
0a0d : e0ff             [ 2]         cpx #$ff
                                     trap_ne
0a0f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     next_test
0a11 : ad0002           [ 4]>            lda test_case   ;previous test
0a14 : c90b             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0a16 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
000c =                      >test_num = test_num + 1
0a18 : a90c             [ 2]>            lda #test_num   ;*** next tests' numb
0a1a : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                              
                             ; test set and clear flags CLC CLI CLD CLV SEC SE
                                     set_stat $ff
                            >            load_flag $ff
0a1d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0a1f : 48               [ 3]>            pha         ;use stack to load status
0a20 : 28               [ 4]>            plp
                             
0a21 : 18               [ 2]         clc
                                     tst_stat $ff-carry
0a22 : 08               [ 3]>            php         ;save status
0a23 : 68               [ 4]>            pla         ;use stack to retrieve st
0a24 : 48               [ 3]>            pha
                            >            cmp_flag $ff-carry
0a25 : c9fe             [ 2]>            cmp #($ff-carry|fao)&m8    ;expected 
                            >
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   42
---------------------------- test_functional.asm -----------------------------

0a27 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a29 : 28               [ 4]>            plp         ;restore status
                             
0a2a : 38               [ 2]         sec
                                     tst_stat $ff
0a2b : 08               [ 3]>            php         ;save status
0a2c : 68               [ 4]>            pla         ;use stack to retrieve st
0a2d : 48               [ 3]>            pha
                            >            cmp_flag $ff
0a2e : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
0a30 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a32 : 28               [ 4]>            plp         ;restore status
                             
                                 if I_flag = 3
0a33 : 58               [ 2]         cli
                                     tst_stat $ff-intdis
0a34 : 08               [ 3]>            php         ;save status
0a35 : 68               [ 4]>            pla         ;use stack to retrieve st
0a36 : 48               [ 3]>            pha
                            >            cmp_flag $ff-intdis
0a37 : c9fb             [ 2]>            cmp #($ff-intdis|fao)&m8    ;expected
                            >
                            >            trap_ne
0a39 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a3b : 28               [ 4]>            plp         ;restore status
                             
0a3c : 78               [ 2]         sei
                                     tst_stat $ff
0a3d : 08               [ 3]>            php         ;save status
0a3e : 68               [ 4]>            pla         ;use stack to retrieve st
0a3f : 48               [ 3]>            pha
                            >            cmp_flag $ff
0a40 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
0a42 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a44 : 28               [ 4]>            plp         ;restore status
                             
                                 endif
0a45 : d8               [ 2]         cld
                                     tst_stat $ff-decmode
0a46 : 08               [ 3]>            php         ;save status
0a47 : 68               [ 4]>            pla         ;use stack to retrieve st
0a48 : 48               [ 3]>            pha
                            >            cmp_flag $ff-decmode
0a49 : c9f7             [ 2]>            cmp #($ff-decmode|fao)&m8    ;expecte
                            >
                            >            trap_ne
0a4b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a4d : 28               [ 4]>            plp         ;restore status
                             
0a4e : f8               [ 2]         sed
                                     tst_stat $ff
0a4f : 08               [ 3]>            php         ;save status
0a50 : 68               [ 4]>            pla         ;use stack to retrieve st
AS65 Assembler for R6502 [1.42].                                     Page   43
---------------------------- test_functional.asm -----------------------------

0a51 : 48               [ 3]>            pha
                            >            cmp_flag $ff
0a52 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
0a54 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a56 : 28               [ 4]>            plp         ;restore status
                             
0a57 : b8               [ 2]         clv
                                     tst_stat $ff-overfl
0a58 : 08               [ 3]>            php         ;save status
0a59 : 68               [ 4]>            pla         ;use stack to retrieve st
0a5a : 48               [ 3]>            pha
                            >            cmp_flag $ff-overfl
0a5b : c9bf             [ 2]>            cmp #($ff-overfl|fao)&m8    ;expected
                            >
                            >            trap_ne
0a5d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a5f : 28               [ 4]>            plp         ;restore status
                             
                                     set_stat 0
                            >            load_flag 0
0a60 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0a62 : 48               [ 3]>            pha         ;use stack to load status
0a63 : 28               [ 4]>            plp
                             
                                     tst_stat 0
0a64 : 08               [ 3]>            php         ;save status
0a65 : 68               [ 4]>            pla         ;use stack to retrieve st
0a66 : 48               [ 3]>            pha
                            >            cmp_flag 0
0a67 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0a69 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a6b : 28               [ 4]>            plp         ;restore status
                             
0a6c : 38               [ 2]         sec
                                     tst_stat carry
0a6d : 08               [ 3]>            php         ;save status
0a6e : 68               [ 4]>            pla         ;use stack to retrieve st
0a6f : 48               [ 3]>            pha
                            >            cmp_flag carry
0a70 : c931             [ 2]>            cmp #(carry|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0a72 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a74 : 28               [ 4]>            plp         ;restore status
                             
0a75 : 18               [ 2]         clc
                                     tst_stat 0  
0a76 : 08               [ 3]>            php         ;save status
0a77 : 68               [ 4]>            pla         ;use stack to retrieve st
0a78 : 48               [ 3]>            pha
                            >            cmp_flag 0  
0a79 : c930             [ 2]>            cmp #(0  |fao)&m8    ;expected flags 
                            >
AS65 Assembler for R6502 [1.42].                                     Page   44
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
0a7b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a7d : 28               [ 4]>            plp         ;restore status
                             
                                 if I_flag = 3
0a7e : 78               [ 2]         sei
                                     tst_stat intdis
0a7f : 08               [ 3]>            php         ;save status
0a80 : 68               [ 4]>            pla         ;use stack to retrieve st
0a81 : 48               [ 3]>            pha
                            >            cmp_flag intdis
0a82 : c934             [ 2]>            cmp #(intdis|fao)&m8    ;expected fla
                            >
                            >            trap_ne
0a84 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a86 : 28               [ 4]>            plp         ;restore status
                             
0a87 : 58               [ 2]         cli
                                     tst_stat 0
0a88 : 08               [ 3]>            php         ;save status
0a89 : 68               [ 4]>            pla         ;use stack to retrieve st
0a8a : 48               [ 3]>            pha
                            >            cmp_flag 0
0a8b : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0a8d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a8f : 28               [ 4]>            plp         ;restore status
                             
                                 endif  
0a90 : f8               [ 2]         sed
                                     tst_stat decmode
0a91 : 08               [ 3]>            php         ;save status
0a92 : 68               [ 4]>            pla         ;use stack to retrieve st
0a93 : 48               [ 3]>            pha
                            >            cmp_flag decmode
0a94 : c938             [ 2]>            cmp #(decmode|fao)&m8    ;expected fl
                            >
                            >            trap_ne
0a96 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0a98 : 28               [ 4]>            plp         ;restore status
                             
0a99 : d8               [ 2]         cld
                                     tst_stat 0  
0a9a : 08               [ 3]>            php         ;save status
0a9b : 68               [ 4]>            pla         ;use stack to retrieve st
0a9c : 48               [ 3]>            pha
                            >            cmp_flag 0  
0a9d : c930             [ 2]>            cmp #(0  |fao)&m8    ;expected flags 
                            >
                            >            trap_ne
0a9f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0aa1 : 28               [ 4]>            plp         ;restore status
                             
                                     set_stat overfl
                            >            load_flag overfl
0aa2 : a940             [ 2]>            lda #overfl             ;allow test t
AS65 Assembler for R6502 [1.42].                                     Page   45
---------------------------- test_functional.asm -----------------------------

                            >
0aa4 : 48               [ 3]>            pha         ;use stack to load status
0aa5 : 28               [ 4]>            plp
                             
                                     tst_stat overfl
0aa6 : 08               [ 3]>            php         ;save status
0aa7 : 68               [ 4]>            pla         ;use stack to retrieve st
0aa8 : 48               [ 3]>            pha
                            >            cmp_flag overfl
0aa9 : c970             [ 2]>            cmp #(overfl|fao)&m8    ;expected fla
                            >
                            >            trap_ne
0aab : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0aad : 28               [ 4]>            plp         ;restore status
                             
0aae : b8               [ 2]         clv
                                     tst_stat 0
0aaf : 08               [ 3]>            php         ;save status
0ab0 : 68               [ 4]>            pla         ;use stack to retrieve st
0ab1 : 48               [ 3]>            pha
                            >            cmp_flag 0
0ab2 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0ab4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ab6 : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
0ab7 : ad0002           [ 4]>            lda test_case   ;previous test
0aba : c90c             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0abc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
000d =                      >test_num = test_num + 1
0abe : a90d             [ 2]>            lda #test_num   ;*** next tests' numb
0ac0 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             ; testing index register increment/decrement and 
                             ; INX INY DEX DEY TAX TXA TAY TYA 
0ac3 : a2fe             [ 2]         ldx #$fe
                                     set_stat $ff
                            >            load_flag $ff
0ac5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0ac7 : 48               [ 3]>            pha         ;use stack to load status
0ac8 : 28               [ 4]>            plp
                             
0ac9 : e8               [ 2]         inx             ;ff
                                     tst_x $ff,$ff-zero
0aca : 08               [ 3]>            php         ;save flags
0acb : e0ff             [ 2]>            cpx #$ff     ;test result
                            >            trap_ne
0acd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0acf : 68               [ 4]>            pla         ;load status
0ad0 : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0ad1 : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
AS65 Assembler for R6502 [1.42].                                     Page   46
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
0ad3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ad5 : 28               [ 4]>            plp         ;restore status
                             
0ad6 : e8               [ 2]         inx             ;00
                                     tst_x 0,$ff-minus
0ad7 : 08               [ 3]>            php         ;save flags
0ad8 : e000             [ 2]>            cpx #0     ;test result
                            >            trap_ne
0ada : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0adc : 68               [ 4]>            pla         ;load status
0add : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0ade : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0ae0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ae2 : 28               [ 4]>            plp         ;restore status
                             
0ae3 : e8               [ 2]         inx             ;01
                                     tst_x 1,$ff-minus-zero
0ae4 : 08               [ 3]>            php         ;save flags
0ae5 : e001             [ 2]>            cpx #1     ;test result
                            >            trap_ne
0ae7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ae9 : 68               [ 4]>            pla         ;load status
0aea : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus-zero
0aeb : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                            >
                            >            trap_ne
0aed : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0aef : 28               [ 4]>            plp         ;restore status
                             
0af0 : ca               [ 2]         dex             ;00
                                     tst_x 0,$ff-minus
0af1 : 08               [ 3]>            php         ;save flags
0af2 : e000             [ 2]>            cpx #0     ;test result
                            >            trap_ne
0af4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0af6 : 68               [ 4]>            pla         ;load status
0af7 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0af8 : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0afa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0afc : 28               [ 4]>            plp         ;restore status
                             
0afd : ca               [ 2]         dex             ;ff
                                     tst_x $ff,$ff-zero
0afe : 08               [ 3]>            php         ;save flags
0aff : e0ff             [ 2]>            cpx #$ff     ;test result
                            >            trap_ne
0b01 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   47
---------------------------- test_functional.asm -----------------------------

                            >
0b03 : 68               [ 4]>            pla         ;load status
0b04 : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0b05 : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0b07 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b09 : 28               [ 4]>            plp         ;restore status
                             
0b0a : ca               [ 2]         dex             ;fe
                                     set_stat 0
                            >            load_flag 0
0b0b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0b0d : 48               [ 3]>            pha         ;use stack to load status
0b0e : 28               [ 4]>            plp
                             
0b0f : e8               [ 2]         inx             ;ff
                                     tst_x $ff,minus
0b10 : 08               [ 3]>            php         ;save flags
0b11 : e0ff             [ 2]>            cpx #$ff     ;test result
                            >            trap_ne
0b13 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b15 : 68               [ 4]>            pla         ;load status
0b16 : 48               [ 3]>            pha
                            >            cmp_flag minus
0b17 : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0b19 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b1b : 28               [ 4]>            plp         ;restore status
                             
0b1c : e8               [ 2]         inx             ;00
                                     tst_x 0,zero
0b1d : 08               [ 3]>            php         ;save flags
0b1e : e000             [ 2]>            cpx #0     ;test result
                            >            trap_ne
0b20 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b22 : 68               [ 4]>            pla         ;load status
0b23 : 48               [ 3]>            pha
                            >            cmp_flag zero
0b24 : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0b26 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b28 : 28               [ 4]>            plp         ;restore status
                             
0b29 : e8               [ 2]         inx             ;01
                                     tst_x 1,0
0b2a : 08               [ 3]>            php         ;save flags
0b2b : e001             [ 2]>            cpx #1     ;test result
                            >            trap_ne
0b2d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b2f : 68               [ 4]>            pla         ;load status
0b30 : 48               [ 3]>            pha
AS65 Assembler for R6502 [1.42].                                     Page   48
---------------------------- test_functional.asm -----------------------------

                            >            cmp_flag 0
0b31 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0b33 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b35 : 28               [ 4]>            plp         ;restore status
                             
0b36 : ca               [ 2]         dex             ;00
                                     tst_x 0,zero
0b37 : 08               [ 3]>            php         ;save flags
0b38 : e000             [ 2]>            cpx #0     ;test result
                            >            trap_ne
0b3a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b3c : 68               [ 4]>            pla         ;load status
0b3d : 48               [ 3]>            pha
                            >            cmp_flag zero
0b3e : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0b40 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b42 : 28               [ 4]>            plp         ;restore status
                             
0b43 : ca               [ 2]         dex             ;ff
                                     tst_x $ff,minus
0b44 : 08               [ 3]>            php         ;save flags
0b45 : e0ff             [ 2]>            cpx #$ff     ;test result
                            >            trap_ne
0b47 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b49 : 68               [ 4]>            pla         ;load status
0b4a : 48               [ 3]>            pha
                            >            cmp_flag minus
0b4b : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0b4d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b4f : 28               [ 4]>            plp         ;restore status
                             
                             
0b50 : a0fe             [ 2]         ldy #$fe
                                     set_stat $ff
                            >            load_flag $ff
0b52 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0b54 : 48               [ 3]>            pha         ;use stack to load status
0b55 : 28               [ 4]>            plp
                             
0b56 : c8               [ 2]         iny             ;ff
                                     tst_y $ff,$ff-zero
0b57 : 08               [ 3]>            php         ;save flags
0b58 : c0ff             [ 2]>            cpy #$ff     ;test result
                            >            trap_ne
0b5a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b5c : 68               [ 4]>            pla         ;load status
0b5d : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0b5e : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
AS65 Assembler for R6502 [1.42].                                     Page   49
---------------------------- test_functional.asm -----------------------------

                            >
                            >            trap_ne
0b60 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b62 : 28               [ 4]>            plp         ;restore status
                             
0b63 : c8               [ 2]         iny             ;00
                                     tst_y 0,$ff-minus
0b64 : 08               [ 3]>            php         ;save flags
0b65 : c000             [ 2]>            cpy #0     ;test result
                            >            trap_ne
0b67 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b69 : 68               [ 4]>            pla         ;load status
0b6a : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0b6b : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0b6d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b6f : 28               [ 4]>            plp         ;restore status
                             
0b70 : c8               [ 2]         iny             ;01
                                     tst_y 1,$ff-minus-zero
0b71 : 08               [ 3]>            php         ;save flags
0b72 : c001             [ 2]>            cpy #1     ;test result
                            >            trap_ne
0b74 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b76 : 68               [ 4]>            pla         ;load status
0b77 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus-zero
0b78 : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                            >
                            >            trap_ne
0b7a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b7c : 28               [ 4]>            plp         ;restore status
                             
0b7d : 88               [ 2]         dey             ;00
                                     tst_y 0,$ff-minus
0b7e : 08               [ 3]>            php         ;save flags
0b7f : c000             [ 2]>            cpy #0     ;test result
                            >            trap_ne
0b81 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b83 : 68               [ 4]>            pla         ;load status
0b84 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0b85 : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0b87 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b89 : 28               [ 4]>            plp         ;restore status
                             
0b8a : 88               [ 2]         dey             ;ff
                                     tst_y $ff,$ff-zero
0b8b : 08               [ 3]>            php         ;save flags
0b8c : c0ff             [ 2]>            cpy #$ff     ;test result
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   50
---------------------------- test_functional.asm -----------------------------

0b8e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b90 : 68               [ 4]>            pla         ;load status
0b91 : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0b92 : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0b94 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0b96 : 28               [ 4]>            plp         ;restore status
                             
0b97 : 88               [ 2]         dey             ;fe
                                     set_stat 0
                            >            load_flag 0
0b98 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0b9a : 48               [ 3]>            pha         ;use stack to load status
0b9b : 28               [ 4]>            plp
                             
0b9c : c8               [ 2]         iny             ;ff
                                     tst_y $ff,0+minus
0b9d : 08               [ 3]>            php         ;save flags
0b9e : c0ff             [ 2]>            cpy #$ff     ;test result
                            >            trap_ne
0ba0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ba2 : 68               [ 4]>            pla         ;load status
0ba3 : 48               [ 3]>            pha
                            >            cmp_flag 0+minus
0ba4 : c9b0             [ 2]>            cmp #(0+minus|fao)&m8    ;expected fl
                            >
                            >            trap_ne
0ba6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ba8 : 28               [ 4]>            plp         ;restore status
                             
0ba9 : c8               [ 2]         iny             ;00
                                     tst_y 0,zero
0baa : 08               [ 3]>            php         ;save flags
0bab : c000             [ 2]>            cpy #0     ;test result
                            >            trap_ne
0bad : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0baf : 68               [ 4]>            pla         ;load status
0bb0 : 48               [ 3]>            pha
                            >            cmp_flag zero
0bb1 : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0bb3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bb5 : 28               [ 4]>            plp         ;restore status
                             
0bb6 : c8               [ 2]         iny             ;01
                                     tst_y 1,0
0bb7 : 08               [ 3]>            php         ;save flags
0bb8 : c001             [ 2]>            cpy #1     ;test result
                            >            trap_ne
0bba : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bbc : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   51
---------------------------- test_functional.asm -----------------------------

0bbd : 48               [ 3]>            pha
                            >            cmp_flag 0
0bbe : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0bc0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bc2 : 28               [ 4]>            plp         ;restore status
                             
0bc3 : 88               [ 2]         dey             ;00
                                     tst_y 0,zero
0bc4 : 08               [ 3]>            php         ;save flags
0bc5 : c000             [ 2]>            cpy #0     ;test result
                            >            trap_ne
0bc7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bc9 : 68               [ 4]>            pla         ;load status
0bca : 48               [ 3]>            pha
                            >            cmp_flag zero
0bcb : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0bcd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bcf : 28               [ 4]>            plp         ;restore status
                             
0bd0 : 88               [ 2]         dey             ;ff
                                     tst_y $ff,minus
0bd1 : 08               [ 3]>            php         ;save flags
0bd2 : c0ff             [ 2]>            cpy #$ff     ;test result
                            >            trap_ne
0bd4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bd6 : 68               [ 4]>            pla         ;load status
0bd7 : 48               [ 3]>            pha
                            >            cmp_flag minus
0bd8 : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0bda : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bdc : 28               [ 4]>            plp         ;restore status
                             
                                             
0bdd : a2ff             [ 2]         ldx #$ff
                                     set_stat $ff
                            >            load_flag $ff
0bdf : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0be1 : 48               [ 3]>            pha         ;use stack to load status
0be2 : 28               [ 4]>            plp
                             
0be3 : 8a               [ 2]         txa
                                     tst_a $ff,$ff-zero
0be4 : 08               [ 3]>            php         ;save flags
0be5 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
0be7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0be9 : 68               [ 4]>            pla         ;load status
0bea : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
AS65 Assembler for R6502 [1.42].                                     Page   52
---------------------------- test_functional.asm -----------------------------

0beb : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0bed : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bef : 28               [ 4]>            plp         ;restore status
                             
0bf0 : 08               [ 3]         php
0bf1 : e8               [ 2]         inx             ;00
0bf2 : 28               [ 4]         plp
0bf3 : 8a               [ 2]         txa
                                     tst_a 0,$ff-minus
0bf4 : 08               [ 3]>            php         ;save flags
0bf5 : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
0bf7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bf9 : 68               [ 4]>            pla         ;load status
0bfa : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0bfb : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0bfd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0bff : 28               [ 4]>            plp         ;restore status
                             
0c00 : 08               [ 3]         php
0c01 : e8               [ 2]         inx             ;01
0c02 : 28               [ 4]         plp
0c03 : 8a               [ 2]         txa
                                     tst_a 1,$ff-minus-zero
0c04 : 08               [ 3]>            php         ;save flags
0c05 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0c07 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c09 : 68               [ 4]>            pla         ;load status
0c0a : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus-zero
0c0b : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                            >
                            >            trap_ne
0c0d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c0f : 28               [ 4]>            plp         ;restore status
                             
                                     set_stat 0
                            >            load_flag 0
0c10 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0c12 : 48               [ 3]>            pha         ;use stack to load status
0c13 : 28               [ 4]>            plp
                             
0c14 : 8a               [ 2]         txa
                                     tst_a 1,0
0c15 : 08               [ 3]>            php         ;save flags
0c16 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0c18 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c1a : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   53
---------------------------- test_functional.asm -----------------------------

0c1b : 48               [ 3]>            pha
                            >            cmp_flag 0
0c1c : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0c1e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c20 : 28               [ 4]>            plp         ;restore status
                             
0c21 : 08               [ 3]         php
0c22 : ca               [ 2]         dex             ;00
0c23 : 28               [ 4]         plp
0c24 : 8a               [ 2]         txa
                                     tst_a 0,zero
0c25 : 08               [ 3]>            php         ;save flags
0c26 : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
0c28 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c2a : 68               [ 4]>            pla         ;load status
0c2b : 48               [ 3]>            pha
                            >            cmp_flag zero
0c2c : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0c2e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c30 : 28               [ 4]>            plp         ;restore status
                             
0c31 : 08               [ 3]         php
0c32 : ca               [ 2]         dex             ;ff
0c33 : 28               [ 4]         plp
0c34 : 8a               [ 2]         txa
                                     tst_a $ff,minus
0c35 : 08               [ 3]>            php         ;save flags
0c36 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
0c38 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c3a : 68               [ 4]>            pla         ;load status
0c3b : 48               [ 3]>            pha
                            >            cmp_flag minus
0c3c : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0c3e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c40 : 28               [ 4]>            plp         ;restore status
                             
                                                     
0c41 : a0ff             [ 2]         ldy #$ff
                                     set_stat $ff
                            >            load_flag $ff
0c43 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0c45 : 48               [ 3]>            pha         ;use stack to load status
0c46 : 28               [ 4]>            plp
                             
0c47 : 98               [ 2]         tya
                                     tst_a $ff,$ff-zero
0c48 : 08               [ 3]>            php         ;save flags
0c49 : c9ff             [ 2]>            cmp #$ff     ;test result
AS65 Assembler for R6502 [1.42].                                     Page   54
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
0c4b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c4d : 68               [ 4]>            pla         ;load status
0c4e : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0c4f : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0c51 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c53 : 28               [ 4]>            plp         ;restore status
                             
0c54 : 08               [ 3]         php
0c55 : c8               [ 2]         iny             ;00
0c56 : 28               [ 4]         plp
0c57 : 98               [ 2]         tya
                                     tst_a 0,$ff-minus
0c58 : 08               [ 3]>            php         ;save flags
0c59 : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
0c5b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c5d : 68               [ 4]>            pla         ;load status
0c5e : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0c5f : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0c61 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c63 : 28               [ 4]>            plp         ;restore status
                             
0c64 : 08               [ 3]         php
0c65 : c8               [ 2]         iny             ;01
0c66 : 28               [ 4]         plp
0c67 : 98               [ 2]         tya
                                     tst_a 1,$ff-minus-zero
0c68 : 08               [ 3]>            php         ;save flags
0c69 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0c6b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c6d : 68               [ 4]>            pla         ;load status
0c6e : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus-zero
0c6f : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                            >
                            >            trap_ne
0c71 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c73 : 28               [ 4]>            plp         ;restore status
                             
                                     set_stat 0
                            >            load_flag 0
0c74 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0c76 : 48               [ 3]>            pha         ;use stack to load status
0c77 : 28               [ 4]>            plp
                             
0c78 : 98               [ 2]         tya
                                     tst_a 1,0
AS65 Assembler for R6502 [1.42].                                     Page   55
---------------------------- test_functional.asm -----------------------------

0c79 : 08               [ 3]>            php         ;save flags
0c7a : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
0c7c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c7e : 68               [ 4]>            pla         ;load status
0c7f : 48               [ 3]>            pha
                            >            cmp_flag 0
0c80 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0c82 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c84 : 28               [ 4]>            plp         ;restore status
                             
0c85 : 08               [ 3]         php
0c86 : 88               [ 2]         dey             ;00
0c87 : 28               [ 4]         plp
0c88 : 98               [ 2]         tya
                                     tst_a 0,zero
0c89 : 08               [ 3]>            php         ;save flags
0c8a : c900             [ 2]>            cmp #0     ;test result
                            >            trap_ne
0c8c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c8e : 68               [ 4]>            pla         ;load status
0c8f : 48               [ 3]>            pha
                            >            cmp_flag zero
0c90 : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0c92 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c94 : 28               [ 4]>            plp         ;restore status
                             
0c95 : 08               [ 3]         php
0c96 : 88               [ 2]         dey             ;ff
0c97 : 28               [ 4]         plp
0c98 : 98               [ 2]         tya
                                     tst_a $ff,minus
0c99 : 08               [ 3]>            php         ;save flags
0c9a : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
0c9c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0c9e : 68               [ 4]>            pla         ;load status
0c9f : 48               [ 3]>            pha
                            >            cmp_flag minus
0ca0 : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0ca2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ca4 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     load_flag $ff
0ca5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                             
0ca7 : 48               [ 3]         pha
0ca8 : a2ff             [ 2]         ldx #$ff        ;ff
0caa : 8a               [ 2]         txa
AS65 Assembler for R6502 [1.42].                                     Page   56
---------------------------- test_functional.asm -----------------------------

0cab : 28               [ 4]         plp             
0cac : a8               [ 2]         tay
                                     tst_y $ff,$ff-zero
0cad : 08               [ 3]>            php         ;save flags
0cae : c0ff             [ 2]>            cpy #$ff     ;test result
                            >            trap_ne
0cb0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cb2 : 68               [ 4]>            pla         ;load status
0cb3 : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0cb4 : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0cb6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cb8 : 28               [ 4]>            plp         ;restore status
                             
0cb9 : 08               [ 3]         php
0cba : e8               [ 2]         inx             ;00
0cbb : 8a               [ 2]         txa
0cbc : 28               [ 4]         plp
0cbd : a8               [ 2]         tay
                                     tst_y 0,$ff-minus
0cbe : 08               [ 3]>            php         ;save flags
0cbf : c000             [ 2]>            cpy #0     ;test result
                            >            trap_ne
0cc1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cc3 : 68               [ 4]>            pla         ;load status
0cc4 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0cc5 : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0cc7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cc9 : 28               [ 4]>            plp         ;restore status
                             
0cca : 08               [ 3]         php
0ccb : e8               [ 2]         inx             ;01
0ccc : 8a               [ 2]         txa
0ccd : 28               [ 4]         plp
0cce : a8               [ 2]         tay
                                     tst_y 1,$ff-minus-zero
0ccf : 08               [ 3]>            php         ;save flags
0cd0 : c001             [ 2]>            cpy #1     ;test result
                            >            trap_ne
0cd2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cd4 : 68               [ 4]>            pla         ;load status
0cd5 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus-zero
0cd6 : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                            >
                            >            trap_ne
0cd8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cda : 28               [ 4]>            plp         ;restore status
                             
                                     load_flag 0
0cdb : a900             [ 2]>            lda #0             ;allow test to cha
AS65 Assembler for R6502 [1.42].                                     Page   57
---------------------------- test_functional.asm -----------------------------

                             
0cdd : 48               [ 3]         pha
0cde : a900             [ 2]         lda #0
0ce0 : 8a               [ 2]         txa
0ce1 : 28               [ 4]         plp
0ce2 : a8               [ 2]         tay
                                     tst_y 1,0
0ce3 : 08               [ 3]>            php         ;save flags
0ce4 : c001             [ 2]>            cpy #1     ;test result
                            >            trap_ne
0ce6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0ce8 : 68               [ 4]>            pla         ;load status
0ce9 : 48               [ 3]>            pha
                            >            cmp_flag 0
0cea : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0cec : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cee : 28               [ 4]>            plp         ;restore status
                             
0cef : 08               [ 3]         php
0cf0 : ca               [ 2]         dex             ;00
0cf1 : 8a               [ 2]         txa
0cf2 : 28               [ 4]         plp
0cf3 : a8               [ 2]         tay
                                     tst_y 0,zero
0cf4 : 08               [ 3]>            php         ;save flags
0cf5 : c000             [ 2]>            cpy #0     ;test result
                            >            trap_ne
0cf7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cf9 : 68               [ 4]>            pla         ;load status
0cfa : 48               [ 3]>            pha
                            >            cmp_flag zero
0cfb : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0cfd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0cff : 28               [ 4]>            plp         ;restore status
                             
0d00 : 08               [ 3]         php
0d01 : ca               [ 2]         dex             ;ff
0d02 : 8a               [ 2]         txa
0d03 : 28               [ 4]         plp
0d04 : a8               [ 2]         tay
                                     tst_y $ff,minus
0d05 : 08               [ 3]>            php         ;save flags
0d06 : c0ff             [ 2]>            cpy #$ff     ;test result
                            >            trap_ne
0d08 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d0a : 68               [ 4]>            pla         ;load status
0d0b : 48               [ 3]>            pha
                            >            cmp_flag minus
0d0c : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0d0e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page   58
---------------------------- test_functional.asm -----------------------------

0d10 : 28               [ 4]>            plp         ;restore status
                             
                             
                             
                                     load_flag $ff
0d11 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                             
0d13 : 48               [ 3]         pha
0d14 : a0ff             [ 2]         ldy #$ff        ;ff
0d16 : 98               [ 2]         tya
0d17 : 28               [ 4]         plp
0d18 : aa               [ 2]         tax
                                     tst_x $ff,$ff-zero
0d19 : 08               [ 3]>            php         ;save flags
0d1a : e0ff             [ 2]>            cpx #$ff     ;test result
                            >            trap_ne
0d1c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d1e : 68               [ 4]>            pla         ;load status
0d1f : 48               [ 3]>            pha
                            >            cmp_flag $ff-zero
0d20 : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                            >
                            >            trap_ne
0d22 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d24 : 28               [ 4]>            plp         ;restore status
                             
0d25 : 08               [ 3]         php
0d26 : c8               [ 2]         iny             ;00
0d27 : 98               [ 2]         tya
0d28 : 28               [ 4]         plp
0d29 : aa               [ 2]         tax
                                     tst_x 0,$ff-minus
0d2a : 08               [ 3]>            php         ;save flags
0d2b : e000             [ 2]>            cpx #0     ;test result
                            >            trap_ne
0d2d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d2f : 68               [ 4]>            pla         ;load status
0d30 : 48               [ 3]>            pha
                            >            cmp_flag $ff-minus
0d31 : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                            >
                            >            trap_ne
0d33 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d35 : 28               [ 4]>            plp         ;restore status
                             
0d36 : 08               [ 3]         php
0d37 : c8               [ 2]         iny             ;01
0d38 : 98               [ 2]         tya
0d39 : 28               [ 4]         plp
0d3a : aa               [ 2]         tax
                                     tst_x 1,$ff-minus-zero
0d3b : 08               [ 3]>            php         ;save flags
0d3c : e001             [ 2]>            cpx #1     ;test result
                            >            trap_ne
0d3e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d40 : 68               [ 4]>            pla         ;load status
0d41 : 48               [ 3]>            pha
AS65 Assembler for R6502 [1.42].                                     Page   59
---------------------------- test_functional.asm -----------------------------

                            >            cmp_flag $ff-minus-zero
0d42 : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                            >
                            >            trap_ne
0d44 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d46 : 28               [ 4]>            plp         ;restore status
                             
                                     load_flag 0
0d47 : a900             [ 2]>            lda #0             ;allow test to cha
                             
0d49 : 48               [ 3]         pha
0d4a : a900             [ 2]         lda #0          ;preset status
0d4c : 98               [ 2]         tya
0d4d : 28               [ 4]         plp
0d4e : aa               [ 2]         tax
                                     tst_x 1,0
0d4f : 08               [ 3]>            php         ;save flags
0d50 : e001             [ 2]>            cpx #1     ;test result
                            >            trap_ne
0d52 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d54 : 68               [ 4]>            pla         ;load status
0d55 : 48               [ 3]>            pha
                            >            cmp_flag 0
0d56 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                            >
                            >            trap_ne
0d58 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d5a : 28               [ 4]>            plp         ;restore status
                             
0d5b : 08               [ 3]         php
0d5c : 88               [ 2]         dey             ;00
0d5d : 98               [ 2]         tya
0d5e : 28               [ 4]         plp
0d5f : aa               [ 2]         tax
                                     tst_x 0,zero
0d60 : 08               [ 3]>            php         ;save flags
0d61 : e000             [ 2]>            cpx #0     ;test result
                            >            trap_ne
0d63 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d65 : 68               [ 4]>            pla         ;load status
0d66 : 48               [ 3]>            pha
                            >            cmp_flag zero
0d67 : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                            >
                            >            trap_ne
0d69 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d6b : 28               [ 4]>            plp         ;restore status
                             
0d6c : 08               [ 3]         php
0d6d : 88               [ 2]         dey             ;ff
0d6e : 98               [ 2]         tya
0d6f : 28               [ 4]         plp
0d70 : aa               [ 2]         tax
                                     tst_x $ff,minus
0d71 : 08               [ 3]>            php         ;save flags
0d72 : e0ff             [ 2]>            cpx #$ff     ;test result
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   60
---------------------------- test_functional.asm -----------------------------

0d74 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d76 : 68               [ 4]>            pla         ;load status
0d77 : 48               [ 3]>            pha
                            >            cmp_flag minus
0d78 : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                            >
                            >            trap_ne
0d7a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0d7c : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
0d7d : ad0002           [ 4]>            lda test_case   ;previous test
0d80 : c90d             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0d82 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
000e =                      >test_num = test_num + 1
0d84 : a90e             [ 2]>            lda #test_num   ;*** next tests' numb
0d86 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                  
                             ;TSX sets NZ - TXS does not
                             ;  This section also tests for proper stack wrap 
0d89 : a201             [ 2]         ldx #1          ;01
                                     set_stat $ff
                            >            load_flag $ff
0d8b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0d8d : 48               [ 3]>            pha         ;use stack to load status
0d8e : 28               [ 4]>            plp
                             
0d8f : 9a               [ 2]         txs
0d90 : 08               [ 3]         php
0d91 : ad0101           [ 4]         lda $101
                                     cmp_flag $ff
0d94 : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                             
                                     trap_ne
0d96 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
0d98 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0d9a : 48               [ 3]>            pha         ;use stack to load status
0d9b : 28               [ 4]>            plp
                             
0d9c : 9a               [ 2]         txs
0d9d : 08               [ 3]         php
0d9e : ad0101           [ 4]         lda $101
                                     cmp_flag 0
0da1 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                             
                                     trap_ne
0da3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0da5 : ca               [ 2]         dex             ;00
                                     set_stat $ff
                            >            load_flag $ff
AS65 Assembler for R6502 [1.42].                                     Page   61
---------------------------- test_functional.asm -----------------------------

0da6 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0da8 : 48               [ 3]>            pha         ;use stack to load status
0da9 : 28               [ 4]>            plp
                             
0daa : 9a               [ 2]         txs
0dab : 08               [ 3]         php
0dac : ad0001           [ 4]         lda $100
                                     cmp_flag $ff
0daf : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                             
                                     trap_ne
0db1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
0db3 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0db5 : 48               [ 3]>            pha         ;use stack to load status
0db6 : 28               [ 4]>            plp
                             
0db7 : 9a               [ 2]         txs
0db8 : 08               [ 3]         php
0db9 : ad0001           [ 4]         lda $100
                                     cmp_flag 0
0dbc : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                             
                                     trap_ne
0dbe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0dc0 : ca               [ 2]         dex             ;ff
                                     set_stat $ff
                            >            load_flag $ff
0dc1 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0dc3 : 48               [ 3]>            pha         ;use stack to load status
0dc4 : 28               [ 4]>            plp
                             
0dc5 : 9a               [ 2]         txs
0dc6 : 08               [ 3]         php
0dc7 : adff01           [ 4]         lda $1ff
                                     cmp_flag $ff
0dca : c9ff             [ 2]>            cmp #($ff|fao)&m8    ;expected flags 
                             
                                     trap_ne
0dcc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
0dce : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0dd0 : 48               [ 3]>            pha         ;use stack to load status
0dd1 : 28               [ 4]>            plp
                             
0dd2 : 9a               [ 2]         txs
0dd3 : 08               [ 3]         php
0dd4 : adff01           [ 4]         lda $1ff
                                     cmp_flag 0
0dd7 : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                             
                                     
0dd9 : a201             [ 2]         ldx #1
AS65 Assembler for R6502 [1.42].                                     Page   62
---------------------------- test_functional.asm -----------------------------

0ddb : 9a               [ 2]         txs             ;sp=01
                                     set_stat $ff
                            >            load_flag $ff
0ddc : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0dde : 48               [ 3]>            pha         ;use stack to load status
0ddf : 28               [ 4]>            plp
                             
0de0 : ba               [ 2]         tsx             ;clears Z, N
0de1 : 08               [ 3]         php             ;sp=00
0de2 : e001             [ 2]         cpx #1
                                     trap_ne
0de4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0de6 : ad0101           [ 4]         lda $101
                                     cmp_flag $ff-minus-zero
0de9 : c97d             [ 2]>            cmp #($ff-minus-zero|fao)&m8    ;expe
                             
                                     trap_ne
0deb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
0ded : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0def : 48               [ 3]>            pha         ;use stack to load status
0df0 : 28               [ 4]>            plp
                             
0df1 : ba               [ 2]         tsx             ;clears N, sets Z
0df2 : 08               [ 3]         php             ;sp=ff
0df3 : e000             [ 2]         cpx #0
                                     trap_ne
0df5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0df7 : ad0001           [ 4]         lda $100
                                     cmp_flag $ff-minus
0dfa : c97f             [ 2]>            cmp #($ff-minus|fao)&m8    ;expected 
                             
                                     trap_ne
0dfc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
0dfe : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0e00 : 48               [ 3]>            pha         ;use stack to load status
0e01 : 28               [ 4]>            plp
                             
0e02 : ba               [ 2]         tsx             ;clears N, sets Z
0e03 : 08               [ 3]         php             ;sp=fe
0e04 : e0ff             [ 2]         cpx #$ff
                                     trap_ne
0e06 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e08 : adff01           [ 4]         lda $1ff
                                     cmp_flag $ff-zero
0e0b : c9fd             [ 2]>            cmp #($ff-zero|fao)&m8    ;expected f
                             
                                     trap_ne
0e0d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     
AS65 Assembler for R6502 [1.42].                                     Page   63
---------------------------- test_functional.asm -----------------------------

0e0f : a201             [ 2]         ldx #1
0e11 : 9a               [ 2]         txs             ;sp=01
                                     set_stat 0
                            >            load_flag 0
0e12 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0e14 : 48               [ 3]>            pha         ;use stack to load status
0e15 : 28               [ 4]>            plp
                             
0e16 : ba               [ 2]         tsx             ;clears Z, N
0e17 : 08               [ 3]         php             ;sp=00
0e18 : e001             [ 2]         cpx #1
                                     trap_ne
0e1a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e1c : ad0101           [ 4]         lda $101
                                     cmp_flag 0
0e1f : c930             [ 2]>            cmp #(0|fao)&m8    ;expected flags + 
                             
                                     trap_ne
0e21 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
0e23 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0e25 : 48               [ 3]>            pha         ;use stack to load status
0e26 : 28               [ 4]>            plp
                             
0e27 : ba               [ 2]         tsx             ;clears N, sets Z
0e28 : 08               [ 3]         php             ;sp=ff
0e29 : e000             [ 2]         cpx #0
                                     trap_ne
0e2b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e2d : ad0001           [ 4]         lda $100
                                     cmp_flag zero
0e30 : c932             [ 2]>            cmp #(zero|fao)&m8    ;expected flags
                             
                                     trap_ne
0e32 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
0e34 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0e36 : 48               [ 3]>            pha         ;use stack to load status
0e37 : 28               [ 4]>            plp
                             
0e38 : ba               [ 2]         tsx             ;clears N, sets Z
0e39 : 08               [ 3]         php             ;sp=fe
0e3a : e0ff             [ 2]         cpx #$ff
                                     trap_ne
0e3c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e3e : adff01           [ 4]         lda $1ff
                                     cmp_flag minus
0e41 : c9b0             [ 2]>            cmp #(minus|fao)&m8    ;expected flag
                             
                                     trap_ne
0e43 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
AS65 Assembler for R6502 [1.42].                                     Page   64
---------------------------- test_functional.asm -----------------------------

0e45 : 68               [ 4]         pla             ;sp=ff
                                     next_test
0e46 : ad0002           [ 4]>            lda test_case   ;previous test
0e49 : c90e             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0e4b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
000f =                      >test_num = test_num + 1
0e4d : a90f             [ 2]>            lda #test_num   ;*** next tests' numb
0e4f : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; testing index register load & store LDY LDX STY
                             ; LDX / STX - zp,y / abs,y
0e52 : a003             [ 2]         ldy #3
0e54 :                       tldx    
                                     set_stat 0
                            >            load_flag 0
0e54 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0e56 : 48               [ 3]>            pha         ;use stack to load status
0e57 : 28               [ 4]>            plp
                             
0e58 : b615             [ 4]         ldx zp1,y
0e5a : 08               [ 3]         php         ;test stores do not alter fla
0e5b : 8a               [ 2]         txa
0e5c : 49c3             [ 2]         eor #$c3
0e5e : 28               [ 4]         plp
0e5f : 990302           [ 5]         sta abst,y
0e62 : 08               [ 3]         php         ;flags after load/store seque
0e63 : 49c3             [ 2]         eor #$c3
0e65 : d91802           [ 4]         cmp abs1,y  ;test result
                                     trap_ne
0e68 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e6a : 68               [ 4]         pla         ;load status
                                     eor_flag 0
0e6b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
0e6d : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
0e70 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e72 : 88               [ 2]         dey
0e73 : 10df             [ 3]         bpl tldx                  
                             
0e75 : a003             [ 2]         ldy #3
0e77 :                       tldx1   
                                     set_stat $ff
                            >            load_flag $ff
0e77 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0e79 : 48               [ 3]>            pha         ;use stack to load status
0e7a : 28               [ 4]>            plp
                             
0e7b : b615             [ 4]         ldx zp1,y
0e7d : 08               [ 3]         php         ;test stores do not alter fla
0e7e : 8a               [ 2]         txa
0e7f : 49c3             [ 2]         eor #$c3
0e81 : 28               [ 4]         plp
0e82 : 990302           [ 5]         sta abst,y
AS65 Assembler for R6502 [1.42].                                     Page   65
---------------------------- test_functional.asm -----------------------------

0e85 : 08               [ 3]         php         ;flags after load/store seque
0e86 : 49c3             [ 2]         eor #$c3
0e88 : d91802           [ 4]         cmp abs1,y  ;test result
                                     trap_ne
0e8b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e8d : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
0e8e : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
0e90 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
0e93 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0e95 : 88               [ 2]         dey
0e96 : 10df             [ 3]         bpl tldx1                  
                             
0e98 : a003             [ 2]         ldy #3
0e9a :                       tldx2   
                                     set_stat 0
                            >            load_flag 0
0e9a : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0e9c : 48               [ 3]>            pha         ;use stack to load status
0e9d : 28               [ 4]>            plp
                             
0e9e : be1802           [ 4]         ldx abs1,y
0ea1 : 08               [ 3]         php         ;test stores do not alter fla
0ea2 : 8a               [ 2]         txa
0ea3 : 49c3             [ 2]         eor #$c3
0ea5 : aa               [ 2]         tax
0ea6 : 28               [ 4]         plp
0ea7 : 960c             [ 4]         stx zpt,y
0ea9 : 08               [ 3]         php         ;flags after load/store seque
0eaa : 49c3             [ 2]         eor #$c3
0eac : d91500           [ 4]         cmp zp1,y   ;test result
                                     trap_ne
0eaf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0eb1 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
0eb2 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
0eb4 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
0eb7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0eb9 : 88               [ 2]         dey
0eba : 10de             [ 3]         bpl tldx2                  
                             
0ebc : a003             [ 2]         ldy #3
0ebe :                       tldx3   
                                     set_stat $ff
                            >            load_flag $ff
0ebe : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0ec0 : 48               [ 3]>            pha         ;use stack to load status
0ec1 : 28               [ 4]>            plp
                             
0ec2 : be1802           [ 4]         ldx abs1,y
0ec5 : 08               [ 3]         php         ;test stores do not alter fla
0ec6 : 8a               [ 2]         txa
AS65 Assembler for R6502 [1.42].                                     Page   66
---------------------------- test_functional.asm -----------------------------

0ec7 : 49c3             [ 2]         eor #$c3
0ec9 : aa               [ 2]         tax
0eca : 28               [ 4]         plp
0ecb : 960c             [ 4]         stx zpt,y
0ecd : 08               [ 3]         php         ;flags after load/store seque
0ece : 49c3             [ 2]         eor #$c3
0ed0 : d91500           [ 4]         cmp zp1,y   ;test result
                                     trap_ne
0ed3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0ed5 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
0ed6 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
0ed8 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
0edb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0edd : 88               [ 2]         dey
0ede : 10de             [ 3]         bpl tldx3
                                     
0ee0 : a003             [ 2]         ldy #3      ;testing store result
0ee2 : a200             [ 2]         ldx #0
0ee4 : b90c00           [ 4] tstx    lda zpt,y
0ee7 : 49c3             [ 2]         eor #$c3
0ee9 : d91500           [ 4]         cmp zp1,y
                                     trap_ne     ;store to zp data
0eec : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0eee : 960c             [ 4]         stx zpt,y   ;clear                
0ef0 : b90302           [ 4]         lda abst,y
0ef3 : 49c3             [ 2]         eor #$c3
0ef5 : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
0ef8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0efa : 8a               [ 2]         txa
0efb : 990302           [ 5]         sta abst,y  ;clear                
0efe : 88               [ 2]         dey
0eff : 10e3             [ 3]         bpl tstx
                                     next_test
0f01 : ad0002           [ 4]>            lda test_case   ;previous test
0f04 : c90f             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0f06 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0010 =                      >test_num = test_num + 1
0f08 : a910             [ 2]>            lda #test_num   ;*** next tests' numb
0f0a : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; indexed wraparound test (only zp should wrap)
0f0d : a0fd             [ 2]         ldy #3+$fa
0f0f : b61b             [ 4] tldx4   ldx zp1-$fa&$ff,y   ;wrap on indexed zp
0f11 : 8a               [ 2]         txa
0f12 : 990901           [ 5]         sta abst-$fa,y      ;no STX abs,y!
0f15 : 88               [ 2]         dey
0f16 : c0fa             [ 2]         cpy #$fa
0f18 : b0f5             [ 3]         bcs tldx4                  
0f1a : a0fd             [ 2]         ldy #3+$fa
0f1c : be1e01           [ 4] tldx5   ldx abs1-$fa,y      ;no wrap on indexed a
AS65 Assembler for R6502 [1.42].                                     Page   67
---------------------------- test_functional.asm -----------------------------

0f1f : 9612             [ 4]         stx zpt-$fa&$ff,y
0f21 : 88               [ 2]         dey
0f22 : c0fa             [ 2]         cpy #$fa
0f24 : b0f6             [ 3]         bcs tldx5                  
0f26 : a003             [ 2]         ldy #3      ;testing wraparound result
0f28 : a200             [ 2]         ldx #0
0f2a : b90c00           [ 4] tstx1   lda zpt,y
0f2d : d91500           [ 4]         cmp zp1,y
                                     trap_ne     ;store to zp data
0f30 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0f32 : 960c             [ 4]         stx zpt,y   ;clear                
0f34 : b90302           [ 4]         lda abst,y
0f37 : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
0f3a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0f3c : 8a               [ 2]         txa
0f3d : 990302           [ 5]         sta abst,y  ;clear                
0f40 : 88               [ 2]         dey
0f41 : 10e7             [ 3]         bpl tstx1
                                     next_test
0f43 : ad0002           [ 4]>            lda test_case   ;previous test
0f46 : c910             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
0f48 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0011 =                      >test_num = test_num + 1
0f4a : a911             [ 2]>            lda #test_num   ;*** next tests' numb
0f4c : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; LDY / STY - zp,x / abs,x
0f4f : a203             [ 2]         ldx #3
0f51 :                       tldy    
                                     set_stat 0
                            >            load_flag 0
0f51 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0f53 : 48               [ 3]>            pha         ;use stack to load status
0f54 : 28               [ 4]>            plp
                             
0f55 : b415             [ 4]         ldy zp1,x
0f57 : 08               [ 3]         php         ;test stores do not alter fla
0f58 : 98               [ 2]         tya
0f59 : 49c3             [ 2]         eor #$c3
0f5b : 28               [ 4]         plp
0f5c : 9d0302           [ 5]         sta abst,x
0f5f : 08               [ 3]         php         ;flags after load/store seque
0f60 : 49c3             [ 2]         eor #$c3
0f62 : dd1802           [ 4]         cmp abs1,x  ;test result
                                     trap_ne
0f65 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0f67 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
0f68 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
0f6a : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
0f6d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   68
---------------------------- test_functional.asm -----------------------------

                             
0f6f : ca               [ 2]         dex
0f70 : 10df             [ 3]         bpl tldy                  
                             
0f72 : a203             [ 2]         ldx #3
0f74 :                       tldy1   
                                     set_stat $ff
                            >            load_flag $ff
0f74 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0f76 : 48               [ 3]>            pha         ;use stack to load status
0f77 : 28               [ 4]>            plp
                             
0f78 : b415             [ 4]         ldy zp1,x
0f7a : 08               [ 3]         php         ;test stores do not alter fla
0f7b : 98               [ 2]         tya
0f7c : 49c3             [ 2]         eor #$c3
0f7e : 28               [ 4]         plp
0f7f : 9d0302           [ 5]         sta abst,x
0f82 : 08               [ 3]         php         ;flags after load/store seque
0f83 : 49c3             [ 2]         eor #$c3
0f85 : dd1802           [ 4]         cmp abs1,x  ;test result
                                     trap_ne
0f88 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0f8a : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
0f8b : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
0f8d : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
0f90 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0f92 : ca               [ 2]         dex
0f93 : 10df             [ 3]         bpl tldy1                  
                             
0f95 : a203             [ 2]         ldx #3
0f97 :                       tldy2   
                                     set_stat 0
                            >            load_flag 0
0f97 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
0f99 : 48               [ 3]>            pha         ;use stack to load status
0f9a : 28               [ 4]>            plp
                             
0f9b : bc1802           [ 4]         ldy abs1,x
0f9e : 08               [ 3]         php         ;test stores do not alter fla
0f9f : 98               [ 2]         tya
0fa0 : 49c3             [ 2]         eor #$c3
0fa2 : a8               [ 2]         tay
0fa3 : 28               [ 4]         plp
0fa4 : 940c             [ 4]         sty zpt,x
0fa6 : 08               [ 3]         php         ;flags after load/store seque
0fa7 : 49c3             [ 2]         eor #$c3
0fa9 : d515             [ 4]         cmp zp1,x   ;test result
                                     trap_ne
0fab : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0fad : 68               [ 4]         pla         ;load status
                                     eor_flag 0
0fae : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
AS65 Assembler for R6502 [1.42].                                     Page   69
---------------------------- test_functional.asm -----------------------------

0fb0 : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
0fb3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0fb5 : ca               [ 2]         dex
0fb6 : 10df             [ 3]         bpl tldy2                  
                             
0fb8 : a203             [ 2]         ldx #3
0fba :                       tldy3
                                     set_stat $ff
                            >            load_flag $ff
0fba : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
0fbc : 48               [ 3]>            pha         ;use stack to load status
0fbd : 28               [ 4]>            plp
                             
0fbe : bc1802           [ 4]         ldy abs1,x
0fc1 : 08               [ 3]         php         ;test stores do not alter fla
0fc2 : 98               [ 2]         tya
0fc3 : 49c3             [ 2]         eor #$c3
0fc5 : a8               [ 2]         tay
0fc6 : 28               [ 4]         plp
0fc7 : 940c             [ 4]         sty zpt,x
0fc9 : 08               [ 3]         php         ;flags after load/store seque
0fca : 49c3             [ 2]         eor #$c3
0fcc : d515             [ 4]         cmp zp1,x   ;test result
                                     trap_ne
0fce : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0fd0 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
0fd1 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
0fd3 : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
0fd6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0fd8 : ca               [ 2]         dex
0fd9 : 10df             [ 3]         bpl tldy3
                             
0fdb : a203             [ 2]         ldx #3      ;testing store result
0fdd : a000             [ 2]         ldy #0
0fdf : b50c             [ 4] tsty    lda zpt,x
0fe1 : 49c3             [ 2]         eor #$c3
0fe3 : d515             [ 4]         cmp zp1,x
                                     trap_ne     ;store to zp,x data
0fe5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0fe7 : 940c             [ 4]         sty zpt,x   ;clear                
0fe9 : bd0302           [ 4]         lda abst,x
0fec : 49c3             [ 2]         eor #$c3
0fee : dd1802           [ 4]         cmp abs1,x
                                     trap_ne     ;store to abs,x data
0ff1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
0ff3 : 8a               [ 2]         txa
0ff4 : 9d0302           [ 5]         sta abst,x  ;clear                
0ff7 : ca               [ 2]         dex
0ff8 : 10e5             [ 3]         bpl tsty
                                     next_test
0ffa : ad0002           [ 4]>            lda test_case   ;previous test
0ffd : c911             [ 2]>            cmp #test_num
AS65 Assembler for R6502 [1.42].                                     Page   70
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne         ;test is out of seque
0fff : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0012 =                      >test_num = test_num + 1
1001 : a912             [ 2]>            lda #test_num   ;*** next tests' numb
1003 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; indexed wraparound test (only zp should wrap)
1006 : a2fd             [ 2]         ldx #3+$fa
1008 : b41b             [ 4] tldy4   ldy zp1-$fa&$ff,x   ;wrap on indexed zp
100a : 98               [ 2]         tya
100b : 9d0901           [ 5]         sta abst-$fa,x      ;no STX abs,x!
100e : ca               [ 2]         dex
100f : e0fa             [ 2]         cpx #$fa
1011 : b0f5             [ 3]         bcs tldy4                  
1013 : a2fd             [ 2]         ldx #3+$fa
1015 : bc1e01           [ 4] tldy5   ldy abs1-$fa,x      ;no wrap on indexed a
1018 : 9412             [ 4]         sty zpt-$fa&$ff,x
101a : ca               [ 2]         dex
101b : e0fa             [ 2]         cpx #$fa
101d : b0f6             [ 3]         bcs tldy5                  
101f : a203             [ 2]         ldx #3      ;testing wraparound result
1021 : a000             [ 2]         ldy #0
1023 : b50c             [ 4] tsty1   lda zpt,x
1025 : d515             [ 4]         cmp zp1,x
                                     trap_ne     ;store to zp,x data
1027 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1029 : 940c             [ 4]         sty zpt,x   ;clear                
102b : bd0302           [ 4]         lda abst,x
102e : dd1802           [ 4]         cmp abs1,x
                                     trap_ne     ;store to abs,x data
1031 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1033 : 8a               [ 2]         txa
1034 : 9d0302           [ 5]         sta abst,x  ;clear                
1037 : ca               [ 2]         dex
1038 : 10e9             [ 3]         bpl tsty1
                                     next_test
103a : ad0002           [ 4]>            lda test_case   ;previous test
103d : c912             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
103f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0013 =                      >test_num = test_num + 1
1041 : a913             [ 2]>            lda #test_num   ;*** next tests' numb
1043 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; LDX / STX - zp / abs / #
                                     set_stat 0  
                            >            load_flag 0  
1046 : a900             [ 2]>            lda #0               ;allow test to c
                            >
1048 : 48               [ 3]>            pha         ;use stack to load status
1049 : 28               [ 4]>            plp
                             
104a : a615             [ 3]         ldx zp1
104c : 08               [ 3]         php         ;test stores do not alter fla
AS65 Assembler for R6502 [1.42].                                     Page   71
---------------------------- test_functional.asm -----------------------------

104d : 8a               [ 2]         txa
104e : 49c3             [ 2]         eor #$c3
1050 : aa               [ 2]         tax
1051 : 28               [ 4]         plp
1052 : 8e0302           [ 4]         stx abst
1055 : 08               [ 3]         php         ;flags after load/store seque
1056 : 49c3             [ 2]         eor #$c3
1058 : aa               [ 2]         tax
1059 : e0c3             [ 2]         cpx #$c3    ;test result
                                     trap_ne
105b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
105d : 68               [ 4]         pla         ;load status
                                     eor_flag 0
105e : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1060 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1063 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1065 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1067 : 48               [ 3]>            pha         ;use stack to load status
1068 : 28               [ 4]>            plp
                             
1069 : a616             [ 3]         ldx zp1+1
106b : 08               [ 3]         php         ;test stores do not alter fla
106c : 8a               [ 2]         txa
106d : 49c3             [ 2]         eor #$c3
106f : aa               [ 2]         tax
1070 : 28               [ 4]         plp
1071 : 8e0402           [ 4]         stx abst+1
1074 : 08               [ 3]         php         ;flags after load/store seque
1075 : 49c3             [ 2]         eor #$c3
1077 : aa               [ 2]         tax
1078 : e082             [ 2]         cpx #$82    ;test result
                                     trap_ne
107a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
107c : 68               [ 4]         pla         ;load status
                                     eor_flag 0
107d : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
107f : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1082 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1084 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1086 : 48               [ 3]>            pha         ;use stack to load status
1087 : 28               [ 4]>            plp
                             
1088 : a617             [ 3]         ldx zp1+2
108a : 08               [ 3]         php         ;test stores do not alter fla
108b : 8a               [ 2]         txa
108c : 49c3             [ 2]         eor #$c3
108e : aa               [ 2]         tax
108f : 28               [ 4]         plp
AS65 Assembler for R6502 [1.42].                                     Page   72
---------------------------- test_functional.asm -----------------------------

1090 : 8e0502           [ 4]         stx abst+2
1093 : 08               [ 3]         php         ;flags after load/store seque
1094 : 49c3             [ 2]         eor #$c3
1096 : aa               [ 2]         tax
1097 : e041             [ 2]         cpx #$41    ;test result
                                     trap_ne
1099 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
109b : 68               [ 4]         pla         ;load status
                                     eor_flag 0
109c : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
109e : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
10a1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
10a3 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
10a5 : 48               [ 3]>            pha         ;use stack to load status
10a6 : 28               [ 4]>            plp
                             
10a7 : a618             [ 3]         ldx zp1+3
10a9 : 08               [ 3]         php         ;test stores do not alter fla
10aa : 8a               [ 2]         txa
10ab : 49c3             [ 2]         eor #$c3
10ad : aa               [ 2]         tax
10ae : 28               [ 4]         plp
10af : 8e0602           [ 4]         stx abst+3
10b2 : 08               [ 3]         php         ;flags after load/store seque
10b3 : 49c3             [ 2]         eor #$c3
10b5 : aa               [ 2]         tax
10b6 : e000             [ 2]         cpx #0      ;test result
                                     trap_ne
10b8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
10ba : 68               [ 4]         pla         ;load status
                                     eor_flag 0
10bb : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
10bd : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
10c0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
10c2 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
10c4 : 48               [ 3]>            pha         ;use stack to load status
10c5 : 28               [ 4]>            plp
                             
10c6 : a615             [ 3]         ldx zp1  
10c8 : 08               [ 3]         php         ;test stores do not alter fla
10c9 : 8a               [ 2]         txa
10ca : 49c3             [ 2]         eor #$c3
10cc : aa               [ 2]         tax
10cd : 28               [ 4]         plp
10ce : 8e0302           [ 4]         stx abst  
10d1 : 08               [ 3]         php         ;flags after load/store seque
10d2 : 49c3             [ 2]         eor #$c3
AS65 Assembler for R6502 [1.42].                                     Page   73
---------------------------- test_functional.asm -----------------------------

10d4 : aa               [ 2]         tax
10d5 : e0c3             [ 2]         cpx #$c3    ;test result
                                     trap_ne     ;
10d7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
10d9 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
10da : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
10dc : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
10df : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
10e1 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
10e3 : 48               [ 3]>            pha         ;use stack to load status
10e4 : 28               [ 4]>            plp
                             
10e5 : a616             [ 3]         ldx zp1+1
10e7 : 08               [ 3]         php         ;test stores do not alter fla
10e8 : 8a               [ 2]         txa
10e9 : 49c3             [ 2]         eor #$c3
10eb : aa               [ 2]         tax
10ec : 28               [ 4]         plp
10ed : 8e0402           [ 4]         stx abst+1
10f0 : 08               [ 3]         php         ;flags after load/store seque
10f1 : 49c3             [ 2]         eor #$c3
10f3 : aa               [ 2]         tax
10f4 : e082             [ 2]         cpx #$82    ;test result
                                     trap_ne
10f6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
10f8 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
10f9 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
10fb : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
10fe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1100 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1102 : 48               [ 3]>            pha         ;use stack to load status
1103 : 28               [ 4]>            plp
                             
1104 : a617             [ 3]         ldx zp1+2
1106 : 08               [ 3]         php         ;test stores do not alter fla
1107 : 8a               [ 2]         txa
1108 : 49c3             [ 2]         eor #$c3
110a : aa               [ 2]         tax
110b : 28               [ 4]         plp
110c : 8e0502           [ 4]         stx abst+2
110f : 08               [ 3]         php         ;flags after load/store seque
1110 : 49c3             [ 2]         eor #$c3
1112 : aa               [ 2]         tax
1113 : e041             [ 2]         cpx #$41    ;test result
                                     trap_ne     ;
1115 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   74
---------------------------- test_functional.asm -----------------------------

                             
1117 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1118 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
111a : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
111d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
111f : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1121 : 48               [ 3]>            pha         ;use stack to load status
1122 : 28               [ 4]>            plp
                             
1123 : a618             [ 3]         ldx zp1+3
1125 : 08               [ 3]         php         ;test stores do not alter fla
1126 : 8a               [ 2]         txa
1127 : 49c3             [ 2]         eor #$c3
1129 : aa               [ 2]         tax
112a : 28               [ 4]         plp
112b : 8e0602           [ 4]         stx abst+3
112e : 08               [ 3]         php         ;flags after load/store seque
112f : 49c3             [ 2]         eor #$c3
1131 : aa               [ 2]         tax
1132 : e000             [ 2]         cpx #0      ;test result
                                     trap_ne
1134 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1136 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1137 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1139 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
113c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat 0
                            >            load_flag 0
113e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1140 : 48               [ 3]>            pha         ;use stack to load status
1141 : 28               [ 4]>            plp
                             
1142 : ae1802           [ 4]         ldx abs1  
1145 : 08               [ 3]         php         ;test stores do not alter fla
1146 : 8a               [ 2]         txa
1147 : 49c3             [ 2]         eor #$c3
1149 : aa               [ 2]         tax
114a : 28               [ 4]         plp
114b : 860c             [ 3]         stx zpt  
114d : 08               [ 3]         php         ;flags after load/store seque
114e : 49c3             [ 2]         eor #$c3
1150 : c515             [ 3]         cmp zp1     ;test result
                                     trap_ne
1152 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1154 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1155 : 4930             [ 2]>            eor #0|fao         ;invert expected f
AS65 Assembler for R6502 [1.42].                                     Page   75
---------------------------- test_functional.asm -----------------------------

                             
1157 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
115a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
115c : a900             [ 2]>            lda #0             ;allow test to cha
                            >
115e : 48               [ 3]>            pha         ;use stack to load status
115f : 28               [ 4]>            plp
                             
1160 : ae1902           [ 4]         ldx abs1+1
1163 : 08               [ 3]         php         ;test stores do not alter fla
1164 : 8a               [ 2]         txa
1165 : 49c3             [ 2]         eor #$c3
1167 : aa               [ 2]         tax
1168 : 28               [ 4]         plp
1169 : 860d             [ 3]         stx zpt+1
116b : 08               [ 3]         php         ;flags after load/store seque
116c : 49c3             [ 2]         eor #$c3
116e : c516             [ 3]         cmp zp1+1   ;test result
                                     trap_ne
1170 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1172 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1173 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1175 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1178 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
117a : a900             [ 2]>            lda #0             ;allow test to cha
                            >
117c : 48               [ 3]>            pha         ;use stack to load status
117d : 28               [ 4]>            plp
                             
117e : ae1a02           [ 4]         ldx abs1+2
1181 : 08               [ 3]         php         ;test stores do not alter fla
1182 : 8a               [ 2]         txa
1183 : 49c3             [ 2]         eor #$c3
1185 : aa               [ 2]         tax
1186 : 28               [ 4]         plp
1187 : 860e             [ 3]         stx zpt+2
1189 : 08               [ 3]         php         ;flags after load/store seque
118a : 49c3             [ 2]         eor #$c3
118c : c517             [ 3]         cmp zp1+2   ;test result
                                     trap_ne
118e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1190 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1191 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1193 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1196 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
AS65 Assembler for R6502 [1.42].                                     Page   76
---------------------------- test_functional.asm -----------------------------

                            >            load_flag 0
1198 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
119a : 48               [ 3]>            pha         ;use stack to load status
119b : 28               [ 4]>            plp
                             
119c : ae1b02           [ 4]         ldx abs1+3
119f : 08               [ 3]         php         ;test stores do not alter fla
11a0 : 8a               [ 2]         txa
11a1 : 49c3             [ 2]         eor #$c3
11a3 : aa               [ 2]         tax
11a4 : 28               [ 4]         plp
11a5 : 860f             [ 3]         stx zpt+3
11a7 : 08               [ 3]         php         ;flags after load/store seque
11a8 : 49c3             [ 2]         eor #$c3
11aa : c518             [ 3]         cmp zp1+3   ;test result
                                     trap_ne
11ac : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
11ae : 68               [ 4]         pla         ;load status
                                     eor_flag 0
11af : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
11b1 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
11b4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
11b6 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
11b8 : 48               [ 3]>            pha         ;use stack to load status
11b9 : 28               [ 4]>            plp
                             
11ba : ae1802           [ 4]         ldx abs1  
11bd : 08               [ 3]         php         ;test stores do not alter fla
11be : 8a               [ 2]         txa
11bf : 49c3             [ 2]         eor #$c3
11c1 : aa               [ 2]         tax
11c2 : 28               [ 4]         plp
11c3 : 860c             [ 3]         stx zpt  
11c5 : 08               [ 3]         php         ;flags after load/store seque
11c6 : 49c3             [ 2]         eor #$c3
11c8 : aa               [ 2]         tax
11c9 : e415             [ 3]         cpx zp1     ;test result
                                     trap_ne
11cb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
11cd : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
11ce : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
11d0 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
11d3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
11d5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
11d7 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page   77
---------------------------- test_functional.asm -----------------------------

11d8 : 28               [ 4]>            plp
                             
11d9 : ae1902           [ 4]         ldx abs1+1
11dc : 08               [ 3]         php         ;test stores do not alter fla
11dd : 8a               [ 2]         txa
11de : 49c3             [ 2]         eor #$c3
11e0 : aa               [ 2]         tax
11e1 : 28               [ 4]         plp
11e2 : 860d             [ 3]         stx zpt+1
11e4 : 08               [ 3]         php         ;flags after load/store seque
11e5 : 49c3             [ 2]         eor #$c3
11e7 : aa               [ 2]         tax
11e8 : e416             [ 3]         cpx zp1+1   ;test result
                                     trap_ne
11ea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
11ec : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
11ed : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
11ef : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
11f2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
11f4 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
11f6 : 48               [ 3]>            pha         ;use stack to load status
11f7 : 28               [ 4]>            plp
                             
11f8 : ae1a02           [ 4]         ldx abs1+2
11fb : 08               [ 3]         php         ;test stores do not alter fla
11fc : 8a               [ 2]         txa
11fd : 49c3             [ 2]         eor #$c3
11ff : aa               [ 2]         tax
1200 : 28               [ 4]         plp
1201 : 860e             [ 3]         stx zpt+2
1203 : 08               [ 3]         php         ;flags after load/store seque
1204 : 49c3             [ 2]         eor #$c3
1206 : aa               [ 2]         tax
1207 : e417             [ 3]         cpx zp1+2   ;test result
                                     trap_ne
1209 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
120b : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
120c : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
120e : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1211 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1213 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1215 : 48               [ 3]>            pha         ;use stack to load status
1216 : 28               [ 4]>            plp
                             
1217 : ae1b02           [ 4]         ldx abs1+3
121a : 08               [ 3]         php         ;test stores do not alter fla
AS65 Assembler for R6502 [1.42].                                     Page   78
---------------------------- test_functional.asm -----------------------------

121b : 8a               [ 2]         txa
121c : 49c3             [ 2]         eor #$c3
121e : aa               [ 2]         tax
121f : 28               [ 4]         plp
1220 : 860f             [ 3]         stx zpt+3
1222 : 08               [ 3]         php         ;flags after load/store seque
1223 : 49c3             [ 2]         eor #$c3
1225 : aa               [ 2]         tax
1226 : e418             [ 3]         cpx zp1+3   ;test result
                                     trap_ne
1228 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
122a : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
122b : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
122d : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1230 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat 0  
                            >            load_flag 0  
1232 : a900             [ 2]>            lda #0               ;allow test to c
                            >
1234 : 48               [ 3]>            pha         ;use stack to load status
1235 : 28               [ 4]>            plp
                             
1236 : a2c3             [ 2]         ldx #$c3
1238 : 08               [ 3]         php
1239 : ec1802           [ 4]         cpx abs1    ;test result
                                     trap_ne
123c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
123e : 68               [ 4]         pla         ;load status
                                     eor_flag 0
123f : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1241 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1244 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1246 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1248 : 48               [ 3]>            pha         ;use stack to load status
1249 : 28               [ 4]>            plp
                             
124a : a282             [ 2]         ldx #$82
124c : 08               [ 3]         php
124d : ec1902           [ 4]         cpx abs1+1  ;test result
                                     trap_ne
1250 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1252 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1253 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1255 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1258 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   79
---------------------------- test_functional.asm -----------------------------

                             
                                     set_stat 0
                            >            load_flag 0
125a : a900             [ 2]>            lda #0             ;allow test to cha
                            >
125c : 48               [ 3]>            pha         ;use stack to load status
125d : 28               [ 4]>            plp
                             
125e : a241             [ 2]         ldx #$41
1260 : 08               [ 3]         php
1261 : ec1a02           [ 4]         cpx abs1+2  ;test result
                                     trap_ne
1264 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1266 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1267 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1269 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
126c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
126e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1270 : 48               [ 3]>            pha         ;use stack to load status
1271 : 28               [ 4]>            plp
                             
1272 : a200             [ 2]         ldx #0
1274 : 08               [ 3]         php
1275 : ec1b02           [ 4]         cpx abs1+3  ;test result
                                     trap_ne
1278 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
127a : 68               [ 4]         pla         ;load status
                                     eor_flag 0
127b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
127d : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1280 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
1282 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1284 : 48               [ 3]>            pha         ;use stack to load status
1285 : 28               [ 4]>            plp
                             
1286 : a2c3             [ 2]         ldx #$c3  
1288 : 08               [ 3]         php
1289 : ec1802           [ 4]         cpx abs1    ;test result
                                     trap_ne
128c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
128e : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
128f : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1291 : cd1d02           [ 4]         cmp fLDx    ;test flags
AS65 Assembler for R6502 [1.42].                                     Page   80
---------------------------- test_functional.asm -----------------------------

                                     trap_ne
1294 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1296 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1298 : 48               [ 3]>            pha         ;use stack to load status
1299 : 28               [ 4]>            plp
                             
129a : a282             [ 2]         ldx #$82
129c : 08               [ 3]         php
129d : ec1902           [ 4]         cpx abs1+1  ;test result
                                     trap_ne
12a0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12a2 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
12a3 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
12a5 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
12a8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
12aa : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
12ac : 48               [ 3]>            pha         ;use stack to load status
12ad : 28               [ 4]>            plp
                             
12ae : a241             [ 2]         ldx #$41
12b0 : 08               [ 3]         php
12b1 : ec1a02           [ 4]         cpx abs1+2  ;test result
                                     trap_ne
12b4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12b6 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
12b7 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
12b9 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
12bc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
12be : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
12c0 : 48               [ 3]>            pha         ;use stack to load status
12c1 : 28               [ 4]>            plp
                             
12c2 : a200             [ 2]         ldx #0
12c4 : 08               [ 3]         php
12c5 : ec1b02           [ 4]         cpx abs1+3  ;test result
                                     trap_ne
12c8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12ca : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
12cb : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
AS65 Assembler for R6502 [1.42].                                     Page   81
---------------------------- test_functional.asm -----------------------------

12cd : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
12d0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
12d2 : a200             [ 2]         ldx #0
12d4 : a50c             [ 3]         lda zpt  
12d6 : 49c3             [ 2]         eor #$c3
12d8 : c515             [ 3]         cmp zp1  
                                     trap_ne     ;store to zp data
12da : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12dc : 860c             [ 3]         stx zpt     ;clear                
12de : ad0302           [ 4]         lda abst  
12e1 : 49c3             [ 2]         eor #$c3
12e3 : cd1802           [ 4]         cmp abs1  
                                     trap_ne     ;store to abs data
12e6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12e8 : 8e0302           [ 4]         stx abst    ;clear                
12eb : a50d             [ 3]         lda zpt+1
12ed : 49c3             [ 2]         eor #$c3
12ef : c516             [ 3]         cmp zp1+1
                                     trap_ne     ;store to zp data
12f1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12f3 : 860d             [ 3]         stx zpt+1   ;clear                
12f5 : ad0402           [ 4]         lda abst+1
12f8 : 49c3             [ 2]         eor #$c3
12fa : cd1902           [ 4]         cmp abs1+1
                                     trap_ne     ;store to abs data
12fd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
12ff : 8e0402           [ 4]         stx abst+1  ;clear                
1302 : a50e             [ 3]         lda zpt+2
1304 : 49c3             [ 2]         eor #$c3
1306 : c517             [ 3]         cmp zp1+2
                                     trap_ne     ;store to zp data
1308 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
130a : 860e             [ 3]         stx zpt+2   ;clear                
130c : ad0502           [ 4]         lda abst+2
130f : 49c3             [ 2]         eor #$c3
1311 : cd1a02           [ 4]         cmp abs1+2
                                     trap_ne     ;store to abs data
1314 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1316 : 8e0502           [ 4]         stx abst+2  ;clear                
1319 : a50f             [ 3]         lda zpt+3
131b : 49c3             [ 2]         eor #$c3
131d : c518             [ 3]         cmp zp1+3
                                     trap_ne     ;store to zp data
131f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1321 : 860f             [ 3]         stx zpt+3   ;clear                
1323 : ad0602           [ 4]         lda abst+3
1326 : 49c3             [ 2]         eor #$c3
1328 : cd1b02           [ 4]         cmp abs1+3
                                     trap_ne     ;store to abs data
132b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
132d : 8e0602           [ 4]         stx abst+3  ;clear                
AS65 Assembler for R6502 [1.42].                                     Page   82
---------------------------- test_functional.asm -----------------------------

                                     next_test
1330 : ad0002           [ 4]>            lda test_case   ;previous test
1333 : c913             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
1335 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0014 =                      >test_num = test_num + 1
1337 : a914             [ 2]>            lda #test_num   ;*** next tests' numb
1339 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; LDY / STY - zp / abs / #
                                     set_stat 0
                            >            load_flag 0
133c : a900             [ 2]>            lda #0             ;allow test to cha
                            >
133e : 48               [ 3]>            pha         ;use stack to load status
133f : 28               [ 4]>            plp
                             
1340 : a415             [ 3]         ldy zp1  
1342 : 08               [ 3]         php         ;test stores do not alter fla
1343 : 98               [ 2]         tya
1344 : 49c3             [ 2]         eor #$c3
1346 : a8               [ 2]         tay
1347 : 28               [ 4]         plp
1348 : 8c0302           [ 4]         sty abst  
134b : 08               [ 3]         php         ;flags after load/store seque
134c : 49c3             [ 2]         eor #$c3
134e : a8               [ 2]         tay
134f : c0c3             [ 2]         cpy #$c3    ;test result
                                     trap_ne
1351 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1353 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1354 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1356 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1359 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
135b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
135d : 48               [ 3]>            pha         ;use stack to load status
135e : 28               [ 4]>            plp
                             
135f : a416             [ 3]         ldy zp1+1
1361 : 08               [ 3]         php         ;test stores do not alter fla
1362 : 98               [ 2]         tya
1363 : 49c3             [ 2]         eor #$c3
1365 : a8               [ 2]         tay
1366 : 28               [ 4]         plp
1367 : 8c0402           [ 4]         sty abst+1
136a : 08               [ 3]         php         ;flags after load/store seque
136b : 49c3             [ 2]         eor #$c3
136d : a8               [ 2]         tay
136e : c082             [ 2]         cpy #$82    ;test result
                                     trap_ne
1370 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page   83
---------------------------- test_functional.asm -----------------------------

                             
1372 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1373 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1375 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1378 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
137a : a900             [ 2]>            lda #0             ;allow test to cha
                            >
137c : 48               [ 3]>            pha         ;use stack to load status
137d : 28               [ 4]>            plp
                             
137e : a417             [ 3]         ldy zp1+2
1380 : 08               [ 3]         php         ;test stores do not alter fla
1381 : 98               [ 2]         tya
1382 : 49c3             [ 2]         eor #$c3
1384 : a8               [ 2]         tay
1385 : 28               [ 4]         plp
1386 : 8c0502           [ 4]         sty abst+2
1389 : 08               [ 3]         php         ;flags after load/store seque
138a : 49c3             [ 2]         eor #$c3
138c : a8               [ 2]         tay
138d : c041             [ 2]         cpy #$41    ;test result
                                     trap_ne
138f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1391 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1392 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1394 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1397 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1399 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
139b : 48               [ 3]>            pha         ;use stack to load status
139c : 28               [ 4]>            plp
                             
139d : a418             [ 3]         ldy zp1+3
139f : 08               [ 3]         php         ;test stores do not alter fla
13a0 : 98               [ 2]         tya
13a1 : 49c3             [ 2]         eor #$c3
13a3 : a8               [ 2]         tay
13a4 : 28               [ 4]         plp
13a5 : 8c0602           [ 4]         sty abst+3
13a8 : 08               [ 3]         php         ;flags after load/store seque
13a9 : 49c3             [ 2]         eor #$c3
13ab : a8               [ 2]         tay
13ac : c000             [ 2]         cpy #0      ;test result
                                     trap_ne
13ae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
13b0 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
13b1 : 4930             [ 2]>            eor #0|fao         ;invert expected f
AS65 Assembler for R6502 [1.42].                                     Page   84
---------------------------- test_functional.asm -----------------------------

                             
13b3 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
13b6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
13b8 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
13ba : 48               [ 3]>            pha         ;use stack to load status
13bb : 28               [ 4]>            plp
                             
13bc : a415             [ 3]         ldy zp1  
13be : 08               [ 3]         php         ;test stores do not alter fla
13bf : 98               [ 2]         tya
13c0 : 49c3             [ 2]         eor #$c3
13c2 : a8               [ 2]         tay
13c3 : 28               [ 4]         plp
13c4 : 8c0302           [ 4]         sty abst  
13c7 : 08               [ 3]         php         ;flags after load/store seque
13c8 : 49c3             [ 2]         eor #$c3
13ca : a8               [ 2]         tay
13cb : c0c3             [ 2]         cpy #$c3    ;test result
                                     trap_ne
13cd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
13cf : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
13d0 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
13d2 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
13d5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
13d7 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
13d9 : 48               [ 3]>            pha         ;use stack to load status
13da : 28               [ 4]>            plp
                             
13db : a416             [ 3]         ldy zp1+1
13dd : 08               [ 3]         php         ;test stores do not alter fla
13de : 98               [ 2]         tya
13df : 49c3             [ 2]         eor #$c3
13e1 : a8               [ 2]         tay
13e2 : 28               [ 4]         plp
13e3 : 8c0402           [ 4]         sty abst+1
13e6 : 08               [ 3]         php         ;flags after load/store seque
13e7 : 49c3             [ 2]         eor #$c3
13e9 : a8               [ 2]         tay
13ea : c082             [ 2]         cpy #$82   ;test result
                                     trap_ne
13ec : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
13ee : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
13ef : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
13f1 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   85
---------------------------- test_functional.asm -----------------------------

13f4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
13f6 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
13f8 : 48               [ 3]>            pha         ;use stack to load status
13f9 : 28               [ 4]>            plp
                             
13fa : a417             [ 3]         ldy zp1+2
13fc : 08               [ 3]         php         ;test stores do not alter fla
13fd : 98               [ 2]         tya
13fe : 49c3             [ 2]         eor #$c3
1400 : a8               [ 2]         tay
1401 : 28               [ 4]         plp
1402 : 8c0502           [ 4]         sty abst+2
1405 : 08               [ 3]         php         ;flags after load/store seque
1406 : 49c3             [ 2]         eor #$c3
1408 : a8               [ 2]         tay
1409 : c041             [ 2]         cpy #$41    ;test result
                                     trap_ne
140b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
140d : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
140e : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1410 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1413 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1415 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1417 : 48               [ 3]>            pha         ;use stack to load status
1418 : 28               [ 4]>            plp
                             
1419 : a418             [ 3]         ldy zp1+3
141b : 08               [ 3]         php         ;test stores do not alter fla
141c : 98               [ 2]         tya
141d : 49c3             [ 2]         eor #$c3
141f : a8               [ 2]         tay
1420 : 28               [ 4]         plp
1421 : 8c0602           [ 4]         sty abst+3
1424 : 08               [ 3]         php         ;flags after load/store seque
1425 : 49c3             [ 2]         eor #$c3
1427 : a8               [ 2]         tay
1428 : c000             [ 2]         cpy #0      ;test result
                                     trap_ne
142a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
142c : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
142d : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
142f : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1432 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     
                                     set_stat 0
AS65 Assembler for R6502 [1.42].                                     Page   86
---------------------------- test_functional.asm -----------------------------

                            >            load_flag 0
1434 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1436 : 48               [ 3]>            pha         ;use stack to load status
1437 : 28               [ 4]>            plp
                             
1438 : ac1802           [ 4]         ldy abs1  
143b : 08               [ 3]         php         ;test stores do not alter fla
143c : 98               [ 2]         tya
143d : 49c3             [ 2]         eor #$c3
143f : a8               [ 2]         tay
1440 : 28               [ 4]         plp
1441 : 840c             [ 3]         sty zpt  
1443 : 08               [ 3]         php         ;flags after load/store seque
1444 : 49c3             [ 2]         eor #$c3
1446 : a8               [ 2]         tay
1447 : c415             [ 3]         cpy zp1     ;test result
                                     trap_ne
1449 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
144b : 68               [ 4]         pla         ;load status
                                     eor_flag 0
144c : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
144e : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1451 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1453 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1455 : 48               [ 3]>            pha         ;use stack to load status
1456 : 28               [ 4]>            plp
                             
1457 : ac1902           [ 4]         ldy abs1+1
145a : 08               [ 3]         php         ;test stores do not alter fla
145b : 98               [ 2]         tya
145c : 49c3             [ 2]         eor #$c3
145e : a8               [ 2]         tay
145f : 28               [ 4]         plp
1460 : 840d             [ 3]         sty zpt+1
1462 : 08               [ 3]         php         ;flags after load/store seque
1463 : 49c3             [ 2]         eor #$c3
1465 : a8               [ 2]         tay
1466 : c416             [ 3]         cpy zp1+1   ;test result
                                     trap_ne
1468 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
146a : 68               [ 4]         pla         ;load status
                                     eor_flag 0
146b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
146d : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1470 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1472 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1474 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page   87
---------------------------- test_functional.asm -----------------------------

1475 : 28               [ 4]>            plp
                             
1476 : ac1a02           [ 4]         ldy abs1+2
1479 : 08               [ 3]         php         ;test stores do not alter fla
147a : 98               [ 2]         tya
147b : 49c3             [ 2]         eor #$c3
147d : a8               [ 2]         tay
147e : 28               [ 4]         plp
147f : 840e             [ 3]         sty zpt+2
1481 : 08               [ 3]         php         ;flags after load/store seque
1482 : 49c3             [ 2]         eor #$c3
1484 : a8               [ 2]         tay
1485 : c417             [ 3]         cpy zp1+2   ;test result
                                     trap_ne
1487 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1489 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
148a : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
148c : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
148f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1491 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1493 : 48               [ 3]>            pha         ;use stack to load status
1494 : 28               [ 4]>            plp
                             
1495 : ac1b02           [ 4]         ldy abs1+3
1498 : 08               [ 3]         php         ;test stores do not alter fla
1499 : 98               [ 2]         tya
149a : 49c3             [ 2]         eor #$c3
149c : a8               [ 2]         tay
149d : 28               [ 4]         plp
149e : 840f             [ 3]         sty zpt+3
14a0 : 08               [ 3]         php         ;flags after load/store seque
14a1 : 49c3             [ 2]         eor #$c3
14a3 : a8               [ 2]         tay
14a4 : c418             [ 3]         cpy zp1+3   ;test result
                                     trap_ne
14a6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
14a8 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
14a9 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
14ab : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
14ae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
14b0 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
14b2 : 48               [ 3]>            pha         ;use stack to load status
14b3 : 28               [ 4]>            plp
                             
14b4 : ac1802           [ 4]         ldy abs1  
AS65 Assembler for R6502 [1.42].                                     Page   88
---------------------------- test_functional.asm -----------------------------

14b7 : 08               [ 3]         php         ;test stores do not alter fla
14b8 : 98               [ 2]         tya
14b9 : 49c3             [ 2]         eor #$c3
14bb : a8               [ 2]         tay
14bc : 28               [ 4]         plp
14bd : 840c             [ 3]         sty zpt  
14bf : 08               [ 3]         php         ;flags after load/store seque
14c0 : 49c3             [ 2]         eor #$c3
14c2 : a8               [ 2]         tay
14c3 : c515             [ 3]         cmp zp1     ;test result
                                     trap_ne
14c5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
14c7 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
14c8 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
14ca : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
14cd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
14cf : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
14d1 : 48               [ 3]>            pha         ;use stack to load status
14d2 : 28               [ 4]>            plp
                             
14d3 : ac1902           [ 4]         ldy abs1+1
14d6 : 08               [ 3]         php         ;test stores do not alter fla
14d7 : 98               [ 2]         tya
14d8 : 49c3             [ 2]         eor #$c3
14da : a8               [ 2]         tay
14db : 28               [ 4]         plp
14dc : 840d             [ 3]         sty zpt+1
14de : 08               [ 3]         php         ;flags after load/store seque
14df : 49c3             [ 2]         eor #$c3
14e1 : a8               [ 2]         tay
14e2 : c516             [ 3]         cmp zp1+1   ;test result
                                     trap_ne
14e4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
14e6 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
14e7 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
14e9 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
14ec : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
14ee : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
14f0 : 48               [ 3]>            pha         ;use stack to load status
14f1 : 28               [ 4]>            plp
                             
14f2 : ac1a02           [ 4]         ldy abs1+2
14f5 : 08               [ 3]         php         ;test stores do not alter fla
14f6 : 98               [ 2]         tya
14f7 : 49c3             [ 2]         eor #$c3
14f9 : a8               [ 2]         tay
AS65 Assembler for R6502 [1.42].                                     Page   89
---------------------------- test_functional.asm -----------------------------

14fa : 28               [ 4]         plp
14fb : 840e             [ 3]         sty zpt+2
14fd : 08               [ 3]         php         ;flags after load/store seque
14fe : 49c3             [ 2]         eor #$c3
1500 : a8               [ 2]         tay
1501 : c517             [ 3]         cmp zp1+2   ;test result
                                     trap_ne
1503 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1505 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1506 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1508 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
150b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
150d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
150f : 48               [ 3]>            pha         ;use stack to load status
1510 : 28               [ 4]>            plp
                             
1511 : ac1b02           [ 4]         ldy abs1+3
1514 : 08               [ 3]         php         ;test stores do not alter fla
1515 : 98               [ 2]         tya
1516 : 49c3             [ 2]         eor #$c3
1518 : a8               [ 2]         tay
1519 : 28               [ 4]         plp
151a : 840f             [ 3]         sty zpt+3
151c : 08               [ 3]         php         ;flags after load/store seque
151d : 49c3             [ 2]         eor #$c3
151f : a8               [ 2]         tay
1520 : c518             [ 3]         cmp zp1+3   ;test result
                                     trap_ne
1522 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1524 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1525 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1527 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
152a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                             
                                     set_stat 0
                            >            load_flag 0
152c : a900             [ 2]>            lda #0             ;allow test to cha
                            >
152e : 48               [ 3]>            pha         ;use stack to load status
152f : 28               [ 4]>            plp
                             
1530 : a0c3             [ 2]         ldy #$c3  
1532 : 08               [ 3]         php
1533 : cc1802           [ 4]         cpy abs1    ;test result
                                     trap_ne
1536 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1538 : 68               [ 4]         pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   90
---------------------------- test_functional.asm -----------------------------

                                     eor_flag 0
1539 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
153b : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
153e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1540 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1542 : 48               [ 3]>            pha         ;use stack to load status
1543 : 28               [ 4]>            plp
                             
1544 : a082             [ 2]         ldy #$82
1546 : 08               [ 3]         php
1547 : cc1902           [ 4]         cpy abs1+1  ;test result
                                     trap_ne
154a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
154c : 68               [ 4]         pla         ;load status
                                     eor_flag 0
154d : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
154f : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1552 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1554 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1556 : 48               [ 3]>            pha         ;use stack to load status
1557 : 28               [ 4]>            plp
                             
1558 : a041             [ 2]         ldy #$41
155a : 08               [ 3]         php
155b : cc1a02           [ 4]         cpy abs1+2  ;test result
                                     trap_ne
155e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1560 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1561 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1563 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1566 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1568 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
156a : 48               [ 3]>            pha         ;use stack to load status
156b : 28               [ 4]>            plp
                             
156c : a000             [ 2]         ldy #0
156e : 08               [ 3]         php
156f : cc1b02           [ 4]         cpy abs1+3  ;test result
                                     trap_ne
1572 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
AS65 Assembler for R6502 [1.42].                                     Page   91
---------------------------- test_functional.asm -----------------------------

1574 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1575 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1577 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
157a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
157c : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
157e : 48               [ 3]>            pha         ;use stack to load status
157f : 28               [ 4]>            plp
                             
1580 : a0c3             [ 2]         ldy #$c3  
1582 : 08               [ 3]         php
1583 : cc1802           [ 4]         cpy abs1    ;test result
                                     trap_ne
1586 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1588 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1589 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
158b : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
158e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1590 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1592 : 48               [ 3]>            pha         ;use stack to load status
1593 : 28               [ 4]>            plp
                             
1594 : a082             [ 2]         ldy #$82
1596 : 08               [ 3]         php
1597 : cc1902           [ 4]         cpy abs1+1  ;test result
                                     trap_ne
159a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
159c : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
159d : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
159f : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
15a2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
15a4 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
15a6 : 48               [ 3]>            pha         ;use stack to load status
15a7 : 28               [ 4]>            plp
                             
15a8 : a041             [ 2]         ldy #$41
15aa : 08               [ 3]         php
15ab : cc1a02           [ 4]         cpy abs1+2   ;test result
                                     trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   92
---------------------------- test_functional.asm -----------------------------

15ae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
15b0 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
15b1 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
15b3 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
15b6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
15b8 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
15ba : 48               [ 3]>            pha         ;use stack to load status
15bb : 28               [ 4]>            plp
                             
15bc : a000             [ 2]         ldy #0
15be : 08               [ 3]         php
15bf : cc1b02           [ 4]         cpy abs1+3  ;test result
                                     trap_ne
15c2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
15c4 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
15c5 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
15c7 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
15ca : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     
15cc : a000             [ 2]         ldy #0
15ce : a50c             [ 3]         lda zpt  
15d0 : 49c3             [ 2]         eor #$c3
15d2 : c515             [ 3]         cmp zp1  
                                     trap_ne     ;store to zp   data
15d4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
15d6 : 840c             [ 3]         sty zpt     ;clear                
15d8 : ad0302           [ 4]         lda abst  
15db : 49c3             [ 2]         eor #$c3
15dd : cd1802           [ 4]         cmp abs1  
                                     trap_ne     ;store to abs   data
15e0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
15e2 : 8c0302           [ 4]         sty abst    ;clear                
15e5 : a50d             [ 3]         lda zpt+1
15e7 : 49c3             [ 2]         eor #$c3
15e9 : c516             [ 3]         cmp zp1+1
                                     trap_ne     ;store to zp+1 data
15eb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
15ed : 840d             [ 3]         sty zpt+1   ;clear                
15ef : ad0402           [ 4]         lda abst+1
15f2 : 49c3             [ 2]         eor #$c3
15f4 : cd1902           [ 4]         cmp abs1+1
                                     trap_ne     ;store to abs+1 data
15f7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
15f9 : 8c0402           [ 4]         sty abst+1  ;clear                
15fc : a50e             [ 3]         lda zpt+2
AS65 Assembler for R6502 [1.42].                                     Page   93
---------------------------- test_functional.asm -----------------------------

15fe : 49c3             [ 2]         eor #$c3
1600 : c517             [ 3]         cmp zp1+2
                                     trap_ne     ;store to zp+2 data
1602 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1604 : 840e             [ 3]         sty zpt+2   ;clear                
1606 : ad0502           [ 4]         lda abst+2
1609 : 49c3             [ 2]         eor #$c3
160b : cd1a02           [ 4]         cmp abs1+2
                                     trap_ne     ;store to abs+2 data
160e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1610 : 8c0502           [ 4]         sty abst+2  ;clear                
1613 : a50f             [ 3]         lda zpt+3
1615 : 49c3             [ 2]         eor #$c3
1617 : c518             [ 3]         cmp zp1+3
                                     trap_ne     ;store to zp+3 data
1619 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
161b : 840f             [ 3]         sty zpt+3   ;clear                
161d : ad0602           [ 4]         lda abst+3
1620 : 49c3             [ 2]         eor #$c3
1622 : cd1b02           [ 4]         cmp abs1+3
                                     trap_ne     ;store to abs+3 data
1625 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1627 : 8c0602           [ 4]         sty abst+3  ;clear                
                                     next_test
162a : ad0002           [ 4]>            lda test_case   ;previous test
162d : c914             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
162f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0015 =                      >test_num = test_num + 1
1631 : a915             [ 2]>            lda #test_num   ;*** next tests' numb
1633 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; testing load / store accumulator LDA / STA all 
                             ; LDA / STA - zp,x / abs,x
1636 : a203             [ 2]         ldx #3
1638 :                       tldax    
                                     set_stat 0
                            >            load_flag 0
1638 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
163a : 48               [ 3]>            pha         ;use stack to load status
163b : 28               [ 4]>            plp
                             
163c : b515             [ 4]         lda zp1,x
163e : 08               [ 3]         php         ;test stores do not alter fla
163f : 49c3             [ 2]         eor #$c3
1641 : 28               [ 4]         plp
1642 : 9d0302           [ 5]         sta abst,x
1645 : 08               [ 3]         php         ;flags after load/store seque
1646 : 49c3             [ 2]         eor #$c3
1648 : dd1802           [ 4]         cmp abs1,x  ;test result
                                     trap_ne
164b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
164d : 68               [ 4]         pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   94
---------------------------- test_functional.asm -----------------------------

                                     eor_flag 0
164e : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1650 : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
1653 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1655 : ca               [ 2]         dex
1656 : 10e0             [ 3]         bpl tldax                  
                             
1658 : a203             [ 2]         ldx #3
165a :                       tldax1   
                                     set_stat $ff
                            >            load_flag $ff
165a : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
165c : 48               [ 3]>            pha         ;use stack to load status
165d : 28               [ 4]>            plp
                             
165e : b515             [ 4]         lda zp1,x
1660 : 08               [ 3]         php         ;test stores do not alter fla
1661 : 49c3             [ 2]         eor #$c3
1663 : 28               [ 4]         plp
1664 : 9d0302           [ 5]         sta abst,x
1667 : 08               [ 3]         php         ;flags after load/store seque
1668 : 49c3             [ 2]         eor #$c3
166a : dd1802           [ 4]         cmp abs1,x   ;test result
                                     trap_ne
166d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
166f : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1670 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1672 : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
1675 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1677 : ca               [ 2]         dex
1678 : 10e0             [ 3]         bpl tldax1                  
                             
167a : a203             [ 2]         ldx #3
167c :                       tldax2   
                                     set_stat 0
                            >            load_flag 0
167c : a900             [ 2]>            lda #0             ;allow test to cha
                            >
167e : 48               [ 3]>            pha         ;use stack to load status
167f : 28               [ 4]>            plp
                             
1680 : bd1802           [ 4]         lda abs1,x
1683 : 08               [ 3]         php         ;test stores do not alter fla
1684 : 49c3             [ 2]         eor #$c3
1686 : 28               [ 4]         plp
1687 : 950c             [ 4]         sta zpt,x
1689 : 08               [ 3]         php         ;flags after load/store seque
168a : 49c3             [ 2]         eor #$c3
168c : d515             [ 4]         cmp zp1,x   ;test result
                                     trap_ne
168e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1690 : 68               [ 4]         pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   95
---------------------------- test_functional.asm -----------------------------

                                     eor_flag 0
1691 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1693 : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
1696 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1698 : ca               [ 2]         dex
1699 : 10e1             [ 3]         bpl tldax2                  
                             
169b : a203             [ 2]         ldx #3
169d :                       tldax3
                                     set_stat $ff
                            >            load_flag $ff
169d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
169f : 48               [ 3]>            pha         ;use stack to load status
16a0 : 28               [ 4]>            plp
                             
16a1 : bd1802           [ 4]         lda abs1,x
16a4 : 08               [ 3]         php         ;test stores do not alter fla
16a5 : 49c3             [ 2]         eor #$c3
16a7 : 28               [ 4]         plp
16a8 : 950c             [ 4]         sta zpt,x
16aa : 08               [ 3]         php         ;flags after load/store seque
16ab : 49c3             [ 2]         eor #$c3
16ad : d515             [ 4]         cmp zp1,x   ;test result
                                     trap_ne
16af : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
16b1 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
16b2 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
16b4 : dd1d02           [ 4]         cmp fLDx,x  ;test flags
                                     trap_ne
16b7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
16b9 : ca               [ 2]         dex
16ba : 10e1             [ 3]         bpl tldax3
                             
16bc : a203             [ 2]         ldx #3      ;testing store result
16be : a000             [ 2]         ldy #0
16c0 : b50c             [ 4] tstax   lda zpt,x
16c2 : 49c3             [ 2]         eor #$c3
16c4 : d515             [ 4]         cmp zp1,x
                                     trap_ne     ;store to zp,x data
16c6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
16c8 : 940c             [ 4]         sty zpt,x   ;clear                
16ca : bd0302           [ 4]         lda abst,x
16cd : 49c3             [ 2]         eor #$c3
16cf : dd1802           [ 4]         cmp abs1,x
                                     trap_ne     ;store to abs,x data
16d2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
16d4 : 8a               [ 2]         txa
16d5 : 9d0302           [ 5]         sta abst,x  ;clear                
16d8 : ca               [ 2]         dex
16d9 : 10e5             [ 3]         bpl tstax
                                     next_test
16db : ad0002           [ 4]>            lda test_case   ;previous test
AS65 Assembler for R6502 [1.42].                                     Page   96
---------------------------- test_functional.asm -----------------------------

16de : c915             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
16e0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0016 =                      >test_num = test_num + 1
16e2 : a916             [ 2]>            lda #test_num   ;*** next tests' numb
16e4 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; LDA / STA - (zp),y / abs,y / (zp,x)
16e7 : a003             [ 2]         ldy #3
16e9 :                       tlday    
                                     set_stat 0
                            >            load_flag 0
16e9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
16eb : 48               [ 3]>            pha         ;use stack to load status
16ec : 28               [ 4]>            plp
                             
16ed : b126             [ 5]         lda (ind1),y
16ef : 08               [ 3]         php         ;test stores do not alter fla
16f0 : 49c3             [ 2]         eor #$c3
16f2 : 28               [ 4]         plp
16f3 : 990302           [ 5]         sta abst,y
16f6 : 08               [ 3]         php         ;flags after load/store seque
16f7 : 49c3             [ 2]         eor #$c3
16f9 : d91802           [ 4]         cmp abs1,y  ;test result
                                     trap_ne
16fc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
16fe : 68               [ 4]         pla         ;load status
                                     eor_flag 0
16ff : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1701 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
1704 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1706 : 88               [ 2]         dey
1707 : 10e0             [ 4]         bpl tlday                  
                             
1709 : a003             [ 2]         ldy #3
170b :                       tlday1   
                                     set_stat $ff
                            >            load_flag $ff
170b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
170d : 48               [ 3]>            pha         ;use stack to load status
170e : 28               [ 4]>            plp
                             
170f : b126             [ 5]         lda (ind1),y
1711 : 08               [ 3]         php         ;test stores do not alter fla
1712 : 49c3             [ 2]         eor #$c3
1714 : 28               [ 4]         plp
1715 : 990302           [ 5]         sta abst,y
1718 : 08               [ 3]         php         ;flags after load/store seque
1719 : 49c3             [ 2]         eor #$c3
171b : d91802           [ 4]         cmp abs1,y  ;test result
                                     trap_ne
171e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
AS65 Assembler for R6502 [1.42].                                     Page   97
---------------------------- test_functional.asm -----------------------------

1720 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1721 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1723 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
1726 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1728 : 88               [ 2]         dey
1729 : 10e0             [ 3]         bpl tlday1                  
                             
172b : a003             [ 2]         ldy #3      ;testing store result
172d : a200             [ 2]         ldx #0
172f : b90302           [ 4] tstay   lda abst,y
1732 : 49c3             [ 2]         eor #$c3
1734 : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
1737 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1739 : 8a               [ 2]         txa
173a : 990302           [ 5]         sta abst,y  ;clear                
173d : 88               [ 2]         dey
173e : 10ef             [ 3]         bpl tstay
                             
1740 : a003             [ 2]         ldy #3
1742 :                       tlday2   
                                     set_stat 0
                            >            load_flag 0
1742 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1744 : 48               [ 3]>            pha         ;use stack to load status
1745 : 28               [ 4]>            plp
                             
1746 : b91802           [ 4]         lda abs1,y
1749 : 08               [ 3]         php         ;test stores do not alter fla
174a : 49c3             [ 2]         eor #$c3
174c : 28               [ 4]         plp
174d : 9132             [ 5]         sta (indt),y
174f : 08               [ 3]         php         ;flags after load/store seque
1750 : 49c3             [ 2]         eor #$c3
1752 : d126             [ 5]         cmp (ind1),y    ;test result
                                     trap_ne
1754 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1756 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1757 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1759 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
175c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
175e : 88               [ 2]         dey
175f : 10e1             [ 3]         bpl tlday2                  
                             
1761 : a003             [ 2]         ldy #3
1763 :                       tlday3   
                                     set_stat $ff
                            >            load_flag $ff
1763 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1765 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page   98
---------------------------- test_functional.asm -----------------------------

1766 : 28               [ 4]>            plp
                             
1767 : b91802           [ 4]         lda abs1,y
176a : 08               [ 3]         php         ;test stores do not alter fla
176b : 49c3             [ 2]         eor #$c3
176d : 28               [ 4]         plp
176e : 9132             [ 5]         sta (indt),y
1770 : 08               [ 3]         php         ;flags after load/store seque
1771 : 49c3             [ 2]         eor #$c3
1773 : d126             [ 5]         cmp (ind1),y   ;test result
                                     trap_ne
1775 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1777 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1778 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
177a : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
177d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
177f : 88               [ 2]         dey
1780 : 10e1             [ 3]         bpl tlday3
                                     
1782 : a003             [ 2]         ldy #3      ;testing store result
1784 : a200             [ 2]         ldx #0
1786 : b90302           [ 4] tstay1  lda abst,y
1789 : 49c3             [ 2]         eor #$c3
178b : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
178e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1790 : 8a               [ 2]         txa
1791 : 990302           [ 5]         sta abst,y  ;clear                
1794 : 88               [ 2]         dey
1795 : 10ef             [ 3]         bpl tstay1
                                     
1797 : a206             [ 2]         ldx #6
1799 : a003             [ 2]         ldy #3
179b :                       tldax4   
                                     set_stat 0
                            >            load_flag 0
179b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
179d : 48               [ 3]>            pha         ;use stack to load status
179e : 28               [ 4]>            plp
                             
179f : a126             [ 6]         lda (ind1,x)
17a1 : 08               [ 3]         php         ;test stores do not alter fla
17a2 : 49c3             [ 2]         eor #$c3
17a4 : 28               [ 4]         plp
17a5 : 8132             [ 6]         sta (indt,x)
17a7 : 08               [ 3]         php         ;flags after load/store seque
17a8 : 49c3             [ 2]         eor #$c3
17aa : d91802           [ 4]         cmp abs1,y  ;test result
                                     trap_ne
17ad : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
17af : 68               [ 4]         pla         ;load status
                                     eor_flag 0
17b0 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
AS65 Assembler for R6502 [1.42].                                     Page   99
---------------------------- test_functional.asm -----------------------------

17b2 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
17b5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
17b7 : ca               [ 2]         dex
17b8 : ca               [ 2]         dex
17b9 : 88               [ 2]         dey
17ba : 10df             [ 3]         bpl tldax4                  
                             
17bc : a206             [ 2]         ldx #6
17be : a003             [ 2]         ldy #3
17c0 :                       tldax5
                                     set_stat $ff
                            >            load_flag $ff
17c0 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
17c2 : 48               [ 3]>            pha         ;use stack to load status
17c3 : 28               [ 4]>            plp
                             
17c4 : a126             [ 6]         lda (ind1,x)
17c6 : 08               [ 3]         php         ;test stores do not alter fla
17c7 : 49c3             [ 2]         eor #$c3
17c9 : 28               [ 4]         plp
17ca : 8132             [ 6]         sta (indt,x)
17cc : 08               [ 3]         php         ;flags after load/store seque
17cd : 49c3             [ 2]         eor #$c3
17cf : d91802           [ 4]         cmp abs1,y  ;test result
                                     trap_ne
17d2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
17d4 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
17d5 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
17d7 : d91d02           [ 4]         cmp fLDx,y  ;test flags
                                     trap_ne
17da : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
17dc : ca               [ 2]         dex
17dd : ca               [ 2]         dex
17de : 88               [ 2]         dey
17df : 10df             [ 3]         bpl tldax5
                             
17e1 : a003             [ 2]         ldy #3      ;testing store result
17e3 : a200             [ 2]         ldx #0
17e5 : b90302           [ 4] tstay2  lda abst,y
17e8 : 49c3             [ 2]         eor #$c3
17ea : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
17ed : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
17ef : 8a               [ 2]         txa
17f0 : 990302           [ 5]         sta abst,y  ;clear                
17f3 : 88               [ 2]         dey
17f4 : 10ef             [ 3]         bpl tstay2
                                     next_test
17f6 : ad0002           [ 4]>            lda test_case   ;previous test
17f9 : c916             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
17fb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0017 =                      >test_num = test_num + 1
AS65 Assembler for R6502 [1.42].                                     Page  100
---------------------------- test_functional.asm -----------------------------

17fd : a917             [ 2]>            lda #test_num   ;*** next tests' numb
17ff : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; indexed wraparound test (only zp should wrap)
1802 : a2fd             [ 2]         ldx #3+$fa
1804 : b51b             [ 4] tldax6  lda zp1-$fa&$ff,x   ;wrap on indexed zp
1806 : 9d0901           [ 5]         sta abst-$fa,x      ;no STX abs,x!
1809 : ca               [ 2]         dex
180a : e0fa             [ 2]         cpx #$fa
180c : b0f6             [ 3]         bcs tldax6                  
180e : a2fd             [ 2]         ldx #3+$fa
1810 : bd1e01           [ 4] tldax7  lda abs1-$fa,x      ;no wrap on indexed a
1813 : 9512             [ 4]         sta zpt-$fa&$ff,x
1815 : ca               [ 2]         dex
1816 : e0fa             [ 2]         cpx #$fa
1818 : b0f6             [ 3]         bcs tldax7
                                                       
181a : a203             [ 2]         ldx #3      ;testing wraparound result
181c : a000             [ 2]         ldy #0
181e : b50c             [ 4] tstax1  lda zpt,x
1820 : d515             [ 4]         cmp zp1,x
                                     trap_ne     ;store to zp,x data
1822 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1824 : 940c             [ 4]         sty zpt,x   ;clear                
1826 : bd0302           [ 4]         lda abst,x
1829 : dd1802           [ 4]         cmp abs1,x
                                     trap_ne     ;store to abs,x data
182c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
182e : 8a               [ 2]         txa
182f : 9d0302           [ 5]         sta abst,x  ;clear                
1832 : ca               [ 2]         dex
1833 : 10e9             [ 3]         bpl tstax1
                             
1835 : a0fb             [ 2]         ldy #3+$f8
1837 : a2fe             [ 2]         ldx #6+$f8
1839 : a12e             [ 6] tlday4  lda (ind1-$f8&$ff,x) ;wrap on indexed zp 
183b : 990b01           [ 5]         sta abst-$f8,y
183e : ca               [ 2]         dex
183f : ca               [ 2]         dex
1840 : 88               [ 2]         dey
1841 : c0f8             [ 2]         cpy #$f8
1843 : b0f4             [ 3]         bcs tlday4
1845 : a003             [ 2]         ldy #3      ;testing wraparound result
1847 : a200             [ 2]         ldx #0
1849 : b90302           [ 4] tstay4  lda abst,y
184c : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
184f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1851 : 8a               [ 2]         txa
1852 : 990302           [ 5]         sta abst,y  ;clear                
1855 : 88               [ 2]         dey
1856 : 10f1             [ 3]         bpl tstay4
                                     
1858 : a0fb             [ 2]         ldy #3+$f8
185a : b92001           [ 4] tlday5  lda abs1-$f8,y  ;no wrap on indexed abs
185d : 913a             [ 5]         sta (inwt),y
185f : 88               [ 2]         dey
AS65 Assembler for R6502 [1.42].                                     Page  101
---------------------------- test_functional.asm -----------------------------

1860 : c0f8             [ 2]         cpy #$f8
1862 : b0f6             [ 3]         bcs tlday5                  
1864 : a003             [ 2]         ldy #3      ;testing wraparound result
1866 : a200             [ 2]         ldx #0
1868 : b90302           [ 4] tstay5  lda abst,y
186b : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
186e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1870 : 8a               [ 2]         txa
1871 : 990302           [ 5]         sta abst,y  ;clear                
1874 : 88               [ 2]         dey
1875 : 10f1             [ 3]         bpl tstay5
                             
1877 : a0fb             [ 2]         ldy #3+$f8
1879 : a2fe             [ 2]         ldx #6+$f8
187b : b130             [ 5] tlday6  lda (inw1),y    ;no wrap on zp indirect i
187d : 813a             [ 6]         sta (indt-$f8&$ff,x)
187f : ca               [ 2]         dex
1880 : ca               [ 2]         dex
1881 : 88               [ 2]         dey
1882 : c0f8             [ 2]         cpy #$f8
1884 : b0f5             [ 3]         bcs tlday6
1886 : a003             [ 2]         ldy #3      ;testing wraparound result
1888 : a200             [ 2]         ldx #0
188a : b90302           [ 4] tstay6  lda abst,y
188d : d91802           [ 4]         cmp abs1,y
                                     trap_ne     ;store to abs data
1890 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1892 : 8a               [ 2]         txa
1893 : 990302           [ 5]         sta abst,y  ;clear                
1896 : 88               [ 2]         dey
1897 : 10f1             [ 3]         bpl tstay6
                                     next_test
1899 : ad0002           [ 4]>            lda test_case   ;previous test
189c : c917             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
189e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0018 =                      >test_num = test_num + 1
18a0 : a918             [ 2]>            lda #test_num   ;*** next tests' numb
18a2 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; LDA / STA - zp / abs / #
                                     set_stat 0  
                            >            load_flag 0  
18a5 : a900             [ 2]>            lda #0               ;allow test to c
                            >
18a7 : 48               [ 3]>            pha         ;use stack to load status
18a8 : 28               [ 4]>            plp
                             
18a9 : a515             [ 3]         lda zp1
18ab : 08               [ 3]         php         ;test stores do not alter fla
18ac : 49c3             [ 2]         eor #$c3
18ae : 28               [ 4]         plp
18af : 8d0302           [ 4]         sta abst
18b2 : 08               [ 3]         php         ;flags after load/store seque
18b3 : 49c3             [ 2]         eor #$c3
18b5 : c9c3             [ 2]         cmp #$c3    ;test result
AS65 Assembler for R6502 [1.42].                                     Page  102
---------------------------- test_functional.asm -----------------------------

                                     trap_ne
18b7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
18b9 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
18ba : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
18bc : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
18bf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
18c1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
18c3 : 48               [ 3]>            pha         ;use stack to load status
18c4 : 28               [ 4]>            plp
                             
18c5 : a516             [ 3]         lda zp1+1
18c7 : 08               [ 3]         php         ;test stores do not alter fla
18c8 : 49c3             [ 2]         eor #$c3
18ca : 28               [ 4]         plp
18cb : 8d0402           [ 4]         sta abst+1
18ce : 08               [ 3]         php         ;flags after load/store seque
18cf : 49c3             [ 2]         eor #$c3
18d1 : c982             [ 2]         cmp #$82    ;test result
                                     trap_ne
18d3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
18d5 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
18d6 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
18d8 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
18db : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
18dd : a900             [ 2]>            lda #0             ;allow test to cha
                            >
18df : 48               [ 3]>            pha         ;use stack to load status
18e0 : 28               [ 4]>            plp
                             
18e1 : a517             [ 3]         lda zp1+2
18e3 : 08               [ 3]         php         ;test stores do not alter fla
18e4 : 49c3             [ 2]         eor #$c3
18e6 : 28               [ 4]         plp
18e7 : 8d0502           [ 4]         sta abst+2
18ea : 08               [ 3]         php         ;flags after load/store seque
18eb : 49c3             [ 2]         eor #$c3
18ed : c941             [ 2]         cmp #$41    ;test result
                                     trap_ne
18ef : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
18f1 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
18f2 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
18f4 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
18f7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  103
---------------------------- test_functional.asm -----------------------------

                             
                                     set_stat 0
                            >            load_flag 0
18f9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
18fb : 48               [ 3]>            pha         ;use stack to load status
18fc : 28               [ 4]>            plp
                             
18fd : a518             [ 3]         lda zp1+3
18ff : 08               [ 3]         php         ;test stores do not alter fla
1900 : 49c3             [ 2]         eor #$c3
1902 : 28               [ 4]         plp
1903 : 8d0602           [ 4]         sta abst+3
1906 : 08               [ 3]         php         ;flags after load/store seque
1907 : 49c3             [ 2]         eor #$c3
1909 : c900             [ 2]         cmp #0      ;test result
                                     trap_ne
190b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
190d : 68               [ 4]         pla         ;load status
                                     eor_flag 0
190e : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1910 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1913 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1915 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1917 : 48               [ 3]>            pha         ;use stack to load status
1918 : 28               [ 4]>            plp
                             
1919 : a515             [ 3]         lda zp1  
191b : 08               [ 3]         php         ;test stores do not alter fla
191c : 49c3             [ 2]         eor #$c3
191e : 28               [ 4]         plp
191f : 8d0302           [ 4]         sta abst  
1922 : 08               [ 3]         php         ;flags after load/store seque
1923 : 49c3             [ 2]         eor #$c3
1925 : c9c3             [ 2]         cmp #$c3    ;test result
                                     trap_ne
1927 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1929 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
192a : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
192c : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
192f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1931 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1933 : 48               [ 3]>            pha         ;use stack to load status
1934 : 28               [ 4]>            plp
                             
1935 : a516             [ 3]         lda zp1+1
1937 : 08               [ 3]         php         ;test stores do not alter fla
AS65 Assembler for R6502 [1.42].                                     Page  104
---------------------------- test_functional.asm -----------------------------

1938 : 49c3             [ 2]         eor #$c3
193a : 28               [ 4]         plp
193b : 8d0402           [ 4]         sta abst+1
193e : 08               [ 3]         php         ;flags after load/store seque
193f : 49c3             [ 2]         eor #$c3
1941 : c982             [ 2]         cmp #$82    ;test result
                                     trap_ne
1943 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1945 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1946 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1948 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
194b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
194d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
194f : 48               [ 3]>            pha         ;use stack to load status
1950 : 28               [ 4]>            plp
                             
1951 : a517             [ 3]         lda zp1+2
1953 : 08               [ 3]         php         ;test stores do not alter fla
1954 : 49c3             [ 2]         eor #$c3
1956 : 28               [ 4]         plp
1957 : 8d0502           [ 4]         sta abst+2
195a : 08               [ 3]         php         ;flags after load/store seque
195b : 49c3             [ 2]         eor #$c3
195d : c941             [ 2]         cmp #$41    ;test result
                                     trap_ne
195f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1961 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1962 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1964 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1967 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1969 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
196b : 48               [ 3]>            pha         ;use stack to load status
196c : 28               [ 4]>            plp
                             
196d : a518             [ 3]         lda zp1+3
196f : 08               [ 3]         php         ;test stores do not alter fla
1970 : 49c3             [ 2]         eor #$c3
1972 : 28               [ 4]         plp
1973 : 8d0602           [ 4]         sta abst+3
1976 : 08               [ 3]         php         ;flags after load/store seque
1977 : 49c3             [ 2]         eor #$c3
1979 : c900             [ 2]         cmp #0      ;test result
                                     trap_ne
197b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
197d : 68               [ 4]         pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  105
---------------------------- test_functional.asm -----------------------------

                                     eor_flag lo~fnz ;mask bits not altered
197e : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1980 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1983 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1985 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1987 : 48               [ 3]>            pha         ;use stack to load status
1988 : 28               [ 4]>            plp
                             
1989 : ad1802           [ 4]         lda abs1  
198c : 08               [ 3]         php         ;test stores do not alter fla
198d : 49c3             [ 2]         eor #$c3
198f : 28               [ 4]         plp
1990 : 850c             [ 3]         sta zpt  
1992 : 08               [ 3]         php         ;flags after load/store seque
1993 : 49c3             [ 2]         eor #$c3
1995 : c515             [ 3]         cmp zp1     ;test result
                                     trap_ne
1997 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1999 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
199a : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
199c : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
199f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
19a1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
19a3 : 48               [ 3]>            pha         ;use stack to load status
19a4 : 28               [ 4]>            plp
                             
19a5 : ad1902           [ 4]         lda abs1+1
19a8 : 08               [ 3]         php         ;test stores do not alter fla
19a9 : 49c3             [ 2]         eor #$c3
19ab : 28               [ 4]         plp
19ac : 850d             [ 3]         sta zpt+1
19ae : 08               [ 3]         php         ;flags after load/store seque
19af : 49c3             [ 2]         eor #$c3
19b1 : c516             [ 3]         cmp zp1+1   ;test result
                                     trap_ne
19b3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
19b5 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
19b6 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
19b8 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
19bb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
19bd : a900             [ 2]>            lda #0             ;allow test to cha
AS65 Assembler for R6502 [1.42].                                     Page  106
---------------------------- test_functional.asm -----------------------------

                            >
19bf : 48               [ 3]>            pha         ;use stack to load status
19c0 : 28               [ 4]>            plp
                             
19c1 : ad1a02           [ 4]         lda abs1+2
19c4 : 08               [ 3]         php         ;test stores do not alter fla
19c5 : 49c3             [ 2]         eor #$c3
19c7 : 28               [ 4]         plp
19c8 : 850e             [ 3]         sta zpt+2
19ca : 08               [ 3]         php         ;flags after load/store seque
19cb : 49c3             [ 2]         eor #$c3
19cd : c517             [ 3]         cmp zp1+2   ;test result
                                     trap_ne
19cf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
19d1 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
19d2 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
19d4 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
19d7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
19d9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
19db : 48               [ 3]>            pha         ;use stack to load status
19dc : 28               [ 4]>            plp
                             
19dd : ad1b02           [ 4]         lda abs1+3
19e0 : 08               [ 3]         php         ;test stores do not alter fla
19e1 : 49c3             [ 2]         eor #$c3
19e3 : 28               [ 4]         plp
19e4 : 850f             [ 3]         sta zpt+3
19e6 : 08               [ 3]         php         ;flags after load/store seque
19e7 : 49c3             [ 2]         eor #$c3
19e9 : c518             [ 3]         cmp zp1+3   ;test result
                                     trap_ne
19eb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
19ed : 68               [ 4]         pla         ;load status
                                     eor_flag 0
19ee : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
19f0 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
19f3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
19f5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
19f7 : 48               [ 3]>            pha         ;use stack to load status
19f8 : 28               [ 4]>            plp
                             
19f9 : ad1802           [ 4]         lda abs1  
19fc : 08               [ 3]         php         ;test stores do not alter fla
19fd : 49c3             [ 2]         eor #$c3
19ff : 28               [ 4]         plp
1a00 : 850c             [ 3]         sta zpt  
1a02 : 08               [ 3]         php         ;flags after load/store seque
AS65 Assembler for R6502 [1.42].                                     Page  107
---------------------------- test_functional.asm -----------------------------

1a03 : 49c3             [ 2]         eor #$c3
1a05 : c515             [ 3]         cmp zp1     ;test result
                                     trap_ne
1a07 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1a09 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1a0a : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1a0c : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1a0f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1a11 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1a13 : 48               [ 3]>            pha         ;use stack to load status
1a14 : 28               [ 4]>            plp
                             
1a15 : ad1902           [ 4]         lda abs1+1
1a18 : 08               [ 3]         php         ;test stores do not alter fla
1a19 : 49c3             [ 2]         eor #$c3
1a1b : 28               [ 4]         plp
1a1c : 850d             [ 3]         sta zpt+1
1a1e : 08               [ 3]         php         ;flags after load/store seque
1a1f : 49c3             [ 2]         eor #$c3
1a21 : c516             [ 3]         cmp zp1+1   ;test result
                                     trap_ne
1a23 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1a25 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1a26 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1a28 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1a2b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1a2d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1a2f : 48               [ 3]>            pha         ;use stack to load status
1a30 : 28               [ 4]>            plp
                             
1a31 : ad1a02           [ 4]         lda abs1+2
1a34 : 08               [ 3]         php         ;test stores do not alter fla
1a35 : 49c3             [ 2]         eor #$c3
1a37 : 28               [ 4]         plp
1a38 : 850e             [ 3]         sta zpt+2
1a3a : 08               [ 3]         php         ;flags after load/store seque
1a3b : 49c3             [ 2]         eor #$c3
1a3d : c517             [ 3]         cmp zp1+2   ;test result
                                     trap_ne
1a3f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1a41 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1a42 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1a44 : cd1f02           [ 4]         cmp fLDx+2  ;test flags
AS65 Assembler for R6502 [1.42].                                     Page  108
---------------------------- test_functional.asm -----------------------------

                                     trap_ne
1a47 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1a49 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1a4b : 48               [ 3]>            pha         ;use stack to load status
1a4c : 28               [ 4]>            plp
                             
1a4d : ad1b02           [ 4]         lda abs1+3
1a50 : 08               [ 3]         php         ;test stores do not alter fla
1a51 : 49c3             [ 2]         eor #$c3
1a53 : 28               [ 4]         plp
1a54 : 850f             [ 3]         sta zpt+3
1a56 : 08               [ 3]         php         ;flags after load/store seque
1a57 : 49c3             [ 2]         eor #$c3
1a59 : c518             [ 3]         cmp zp1+3   ;test result
                                     trap_ne
1a5b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1a5d : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1a5e : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1a60 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1a63 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0  
                            >            load_flag 0  
1a65 : a900             [ 2]>            lda #0               ;allow test to c
                            >
1a67 : 48               [ 3]>            pha         ;use stack to load status
1a68 : 28               [ 4]>            plp
                             
1a69 : a9c3             [ 2]         lda #$c3
1a6b : 08               [ 3]         php
1a6c : cd1802           [ 4]         cmp abs1    ;test result
                                     trap_ne
1a6f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1a71 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1a72 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1a74 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1a77 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1a79 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1a7b : 48               [ 3]>            pha         ;use stack to load status
1a7c : 28               [ 4]>            plp
                             
1a7d : a982             [ 2]         lda #$82
1a7f : 08               [ 3]         php
1a80 : cd1902           [ 4]         cmp abs1+1  ;test result
                                     trap_ne
1a83 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  109
---------------------------- test_functional.asm -----------------------------

                             
1a85 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1a86 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1a88 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1a8b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1a8d : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1a8f : 48               [ 3]>            pha         ;use stack to load status
1a90 : 28               [ 4]>            plp
                             
1a91 : a941             [ 2]         lda #$41
1a93 : 08               [ 3]         php
1a94 : cd1a02           [ 4]         cmp abs1+2  ;test result
                                     trap_ne
1a97 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1a99 : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1a9a : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1a9c : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1a9f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat 0
                            >            load_flag 0
1aa1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1aa3 : 48               [ 3]>            pha         ;use stack to load status
1aa4 : 28               [ 4]>            plp
                             
1aa5 : a900             [ 2]         lda #0
1aa7 : 08               [ 3]         php
1aa8 : cd1b02           [ 4]         cmp abs1+3  ;test result
                                     trap_ne
1aab : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1aad : 68               [ 4]         pla         ;load status
                                     eor_flag 0
1aae : 4930             [ 2]>            eor #0|fao         ;invert expected f
                             
1ab0 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1ab3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
                                     set_stat $ff
                            >            load_flag $ff
1ab5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1ab7 : 48               [ 3]>            pha         ;use stack to load status
1ab8 : 28               [ 4]>            plp
                             
1ab9 : a9c3             [ 2]         lda #$c3  
1abb : 08               [ 3]         php
1abc : cd1802           [ 4]         cmp abs1    ;test result
AS65 Assembler for R6502 [1.42].                                     Page  110
---------------------------- test_functional.asm -----------------------------

                                     trap_ne
1abf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1ac1 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1ac2 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1ac4 : cd1d02           [ 4]         cmp fLDx    ;test flags
                                     trap_ne
1ac7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1ac9 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1acb : 48               [ 3]>            pha         ;use stack to load status
1acc : 28               [ 4]>            plp
                             
1acd : a982             [ 2]         lda #$82
1acf : 08               [ 3]         php
1ad0 : cd1902           [ 4]         cmp abs1+1  ;test result
                                     trap_ne
1ad3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1ad5 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1ad6 : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1ad8 : cd1e02           [ 4]         cmp fLDx+1  ;test flags
                                     trap_ne
1adb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1add : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1adf : 48               [ 3]>            pha         ;use stack to load status
1ae0 : 28               [ 4]>            plp
                             
1ae1 : a941             [ 2]         lda #$41
1ae3 : 08               [ 3]         php
1ae4 : cd1a02           [ 4]         cmp abs1+2  ;test result
                                     trap_ne
1ae7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1ae9 : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1aea : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1aec : cd1f02           [ 4]         cmp fLDx+2  ;test flags
                                     trap_ne
1aef : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
1af1 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1af3 : 48               [ 3]>            pha         ;use stack to load status
1af4 : 28               [ 4]>            plp
                             
1af5 : a900             [ 2]         lda #0
1af7 : 08               [ 3]         php
AS65 Assembler for R6502 [1.42].                                     Page  111
---------------------------- test_functional.asm -----------------------------

1af8 : cd1b02           [ 4]         cmp abs1+3  ;test result
                                     trap_ne
1afb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1afd : 68               [ 4]         pla         ;load status
                                     eor_flag lo~fnz ;mask bits not altered
1afe : 497d             [ 2]>            eor #lo~fnz |fao         ;invert expe
                             
1b00 : cd2002           [ 4]         cmp fLDx+3  ;test flags
                                     trap_ne
1b03 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                             
1b05 : a200             [ 2]         ldx #0
1b07 : a50c             [ 3]         lda zpt  
1b09 : 49c3             [ 2]         eor #$c3
1b0b : c515             [ 3]         cmp zp1  
                                     trap_ne     ;store to zp data
1b0d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b0f : 860c             [ 3]         stx zpt     ;clear                
1b11 : ad0302           [ 4]         lda abst  
1b14 : 49c3             [ 2]         eor #$c3
1b16 : cd1802           [ 4]         cmp abs1  
                                     trap_ne     ;store to abs data
1b19 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b1b : 8e0302           [ 4]         stx abst    ;clear                
1b1e : a50d             [ 3]         lda zpt+1
1b20 : 49c3             [ 2]         eor #$c3
1b22 : c516             [ 3]         cmp zp1+1
                                     trap_ne     ;store to zp data
1b24 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b26 : 860d             [ 3]         stx zpt+1   ;clear                
1b28 : ad0402           [ 4]         lda abst+1
1b2b : 49c3             [ 2]         eor #$c3
1b2d : cd1902           [ 4]         cmp abs1+1
                                     trap_ne     ;store to abs data
1b30 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b32 : 8e0402           [ 4]         stx abst+1  ;clear                
1b35 : a50e             [ 3]         lda zpt+2
1b37 : 49c3             [ 2]         eor #$c3
1b39 : c517             [ 3]         cmp zp1+2
                                     trap_ne     ;store to zp data
1b3b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b3d : 860e             [ 3]         stx zpt+2   ;clear                
1b3f : ad0502           [ 4]         lda abst+2
1b42 : 49c3             [ 2]         eor #$c3
1b44 : cd1a02           [ 4]         cmp abs1+2
                                     trap_ne     ;store to abs data
1b47 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b49 : 8e0502           [ 4]         stx abst+2  ;clear                
1b4c : a50f             [ 3]         lda zpt+3
1b4e : 49c3             [ 2]         eor #$c3
1b50 : c518             [ 3]         cmp zp1+3
                                     trap_ne     ;store to zp data
1b52 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
AS65 Assembler for R6502 [1.42].                                     Page  112
---------------------------- test_functional.asm -----------------------------

1b54 : 860f             [ 3]         stx zpt+3   ;clear                
1b56 : ad0602           [ 4]         lda abst+3
1b59 : 49c3             [ 2]         eor #$c3
1b5b : cd1b02           [ 4]         cmp abs1+3
                                     trap_ne     ;store to abs data
1b5e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
1b60 : 8e0602           [ 4]         stx abst+3  ;clear                
                                     next_test
1b63 : ad0002           [ 4]>            lda test_case   ;previous test
1b66 : c918             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
1b68 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0019 =                      >test_num = test_num + 1
1b6a : a919             [ 2]>            lda #test_num   ;*** next tests' numb
1b6c : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; testing bit test & compares BIT CPX CPY CMP all
                             ; BIT - zp / abs
                                     set_a $ff,0
                            >            load_flag 0
1b6f : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1b71 : 48               [ 3]>            pha         ;use stack to load status
1b72 : a9ff             [ 2]>            lda #$ff     ;precharge accu
1b74 : 28               [ 4]>            plp
                             
1b75 : 2418             [ 3]         bit zp1+3   ;00 - should set Z / clear  N
                                     tst_a $ff,fz 
1b77 : 08               [ 3]>            php         ;save flags
1b78 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
1b7a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1b7c : 68               [ 4]>            pla         ;load status
1b7d : 48               [ 3]>            pha
                            >            cmp_flag fz 
1b7e : c932             [ 2]>            cmp #(fz |fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1b80 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1b82 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,0
                            >            load_flag 0
1b83 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1b85 : 48               [ 3]>            pha         ;use stack to load status
1b86 : a901             [ 2]>            lda #1     ;precharge accu
1b88 : 28               [ 4]>            plp
                             
1b89 : 2417             [ 3]         bit zp1+2   ;41 - should set V (M6) / cle
                                     tst_a 1,fv
1b8b : 08               [ 3]>            php         ;save flags
1b8c : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1b8e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  113
---------------------------- test_functional.asm -----------------------------

1b90 : 68               [ 4]>            pla         ;load status
1b91 : 48               [ 3]>            pha
                            >            cmp_flag fv
1b92 : c970             [ 2]>            cmp #(fv|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1b94 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1b96 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,0
                            >            load_flag 0
1b97 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1b99 : 48               [ 3]>            pha         ;use stack to load status
1b9a : a901             [ 2]>            lda #1     ;precharge accu
1b9c : 28               [ 4]>            plp
                             
1b9d : 2416             [ 3]         bit zp1+1   ;82 - should set N (M7) & Z /
                                     tst_a 1,fnz
1b9f : 08               [ 3]>            php         ;save flags
1ba0 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1ba2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ba4 : 68               [ 4]>            pla         ;load status
1ba5 : 48               [ 3]>            pha
                            >            cmp_flag fnz
1ba6 : c9b2             [ 2]>            cmp #(fnz|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1ba8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1baa : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,0
                            >            load_flag 0
1bab : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1bad : 48               [ 3]>            pha         ;use stack to load status
1bae : a901             [ 2]>            lda #1     ;precharge accu
1bb0 : 28               [ 4]>            plp
                             
1bb1 : 2415             [ 3]         bit zp1     ;c3 - should set N (M7) & V (
                                     tst_a 1,fnv
1bb3 : 08               [ 3]>            php         ;save flags
1bb4 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1bb6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1bb8 : 68               [ 4]>            pla         ;load status
1bb9 : 48               [ 3]>            pha
                            >            cmp_flag fnv
1bba : c9f0             [ 2]>            cmp #(fnv|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1bbc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1bbe : 28               [ 4]>            plp         ;restore status
                             
                                     
                                     set_a $ff,$ff
AS65 Assembler for R6502 [1.42].                                     Page  114
---------------------------- test_functional.asm -----------------------------

                            >            load_flag $ff
1bbf : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1bc1 : 48               [ 3]>            pha         ;use stack to load status
1bc2 : a9ff             [ 2]>            lda #$ff     ;precharge accu
1bc4 : 28               [ 4]>            plp
                             
1bc5 : 2418             [ 3]         bit zp1+3   ;00 - should set Z / clear  N
                                     tst_a $ff,~fnv 
1bc7 : 08               [ 3]>            php         ;save flags
1bc8 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
1bca : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1bcc : 68               [ 4]>            pla         ;load status
1bcd : 48               [ 3]>            pha
                            >            cmp_flag ~fnv 
1bce : c93f             [ 2]>            cmp #(~fnv |fao)&m8    ;expected flag
                            >
                            >            trap_ne
1bd0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1bd2 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,$ff
                            >            load_flag $ff
1bd3 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1bd5 : 48               [ 3]>            pha         ;use stack to load status
1bd6 : a901             [ 2]>            lda #1     ;precharge accu
1bd8 : 28               [ 4]>            plp
                             
1bd9 : 2417             [ 3]         bit zp1+2   ;41 - should set V (M6) / cle
                                     tst_a 1,~fnz
1bdb : 08               [ 3]>            php         ;save flags
1bdc : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1bde : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1be0 : 68               [ 4]>            pla         ;load status
1be1 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1be2 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1be4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1be6 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,$ff
                            >            load_flag $ff
1be7 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1be9 : 48               [ 3]>            pha         ;use stack to load status
1bea : a901             [ 2]>            lda #1     ;precharge accu
1bec : 28               [ 4]>            plp
                             
1bed : 2416             [ 3]         bit zp1+1   ;82 - should set N (M7) & Z /
                                     tst_a 1,~fv
1bef : 08               [ 3]>            php         ;save flags
1bf0 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page  115
---------------------------- test_functional.asm -----------------------------

1bf2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1bf4 : 68               [ 4]>            pla         ;load status
1bf5 : 48               [ 3]>            pha
                            >            cmp_flag ~fv
1bf6 : c9bf             [ 2]>            cmp #(~fv|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1bf8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1bfa : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,$ff
                            >            load_flag $ff
1bfb : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1bfd : 48               [ 3]>            pha         ;use stack to load status
1bfe : a901             [ 2]>            lda #1     ;precharge accu
1c00 : 28               [ 4]>            plp
                             
1c01 : 2415             [ 3]         bit zp1     ;c3 - should set N (M7) & V (
                                     tst_a 1,~fz
1c03 : 08               [ 3]>            php         ;save flags
1c04 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1c06 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c08 : 68               [ 4]>            pla         ;load status
1c09 : 48               [ 3]>            pha
                            >            cmp_flag ~fz
1c0a : c9fd             [ 2]>            cmp #(~fz|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1c0c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c0e : 28               [ 4]>            plp         ;restore status
                             
                                     
                                     set_a $ff,0
                            >            load_flag 0
1c0f : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1c11 : 48               [ 3]>            pha         ;use stack to load status
1c12 : a9ff             [ 2]>            lda #$ff     ;precharge accu
1c14 : 28               [ 4]>            plp
                             
1c15 : 2c1b02           [ 4]         bit abs1+3  ;00 - should set Z / clear  N
                                     tst_a $ff,fz 
1c18 : 08               [ 3]>            php         ;save flags
1c19 : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
1c1b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c1d : 68               [ 4]>            pla         ;load status
1c1e : 48               [ 3]>            pha
                            >            cmp_flag fz 
1c1f : c932             [ 2]>            cmp #(fz |fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1c21 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c23 : 28               [ 4]>            plp         ;restore status
AS65 Assembler for R6502 [1.42].                                     Page  116
---------------------------- test_functional.asm -----------------------------

                             
                                     set_a 1,0
                            >            load_flag 0
1c24 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1c26 : 48               [ 3]>            pha         ;use stack to load status
1c27 : a901             [ 2]>            lda #1     ;precharge accu
1c29 : 28               [ 4]>            plp
                             
1c2a : 2c1a02           [ 4]         bit abs1+2  ;41 - should set V (M6) / cle
                                     tst_a 1,fv
1c2d : 08               [ 3]>            php         ;save flags
1c2e : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1c30 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c32 : 68               [ 4]>            pla         ;load status
1c33 : 48               [ 3]>            pha
                            >            cmp_flag fv
1c34 : c970             [ 2]>            cmp #(fv|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1c36 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c38 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,0
                            >            load_flag 0
1c39 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1c3b : 48               [ 3]>            pha         ;use stack to load status
1c3c : a901             [ 2]>            lda #1     ;precharge accu
1c3e : 28               [ 4]>            plp
                             
1c3f : 2c1902           [ 4]         bit abs1+1  ;82 - should set N (M7) & Z /
                                     tst_a 1,fnz
1c42 : 08               [ 3]>            php         ;save flags
1c43 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1c45 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c47 : 68               [ 4]>            pla         ;load status
1c48 : 48               [ 3]>            pha
                            >            cmp_flag fnz
1c49 : c9b2             [ 2]>            cmp #(fnz|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1c4b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c4d : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,0
                            >            load_flag 0
1c4e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1c50 : 48               [ 3]>            pha         ;use stack to load status
1c51 : a901             [ 2]>            lda #1     ;precharge accu
1c53 : 28               [ 4]>            plp
                             
1c54 : 2c1802           [ 4]         bit abs1    ;c3 - should set N (M7) & V (
                                     tst_a 1,fnv
1c57 : 08               [ 3]>            php         ;save flags
AS65 Assembler for R6502 [1.42].                                     Page  117
---------------------------- test_functional.asm -----------------------------

1c58 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1c5a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c5c : 68               [ 4]>            pla         ;load status
1c5d : 48               [ 3]>            pha
                            >            cmp_flag fnv
1c5e : c9f0             [ 2]>            cmp #(fnv|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1c60 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c62 : 28               [ 4]>            plp         ;restore status
                             
                                     
                                     set_a $ff,$ff
                            >            load_flag $ff
1c63 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1c65 : 48               [ 3]>            pha         ;use stack to load status
1c66 : a9ff             [ 2]>            lda #$ff     ;precharge accu
1c68 : 28               [ 4]>            plp
                             
1c69 : 2c1b02           [ 4]         bit abs1+3  ;00 - should set Z / clear  N
                                     tst_a $ff,~fnv 
1c6c : 08               [ 3]>            php         ;save flags
1c6d : c9ff             [ 2]>            cmp #$ff     ;test result
                            >            trap_ne
1c6f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c71 : 68               [ 4]>            pla         ;load status
1c72 : 48               [ 3]>            pha
                            >            cmp_flag ~fnv 
1c73 : c93f             [ 2]>            cmp #(~fnv |fao)&m8    ;expected flag
                            >
                            >            trap_ne
1c75 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c77 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,$ff
                            >            load_flag $ff
1c78 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1c7a : 48               [ 3]>            pha         ;use stack to load status
1c7b : a901             [ 2]>            lda #1     ;precharge accu
1c7d : 28               [ 4]>            plp
                             
1c7e : 2c1a02           [ 4]         bit abs1+2  ;41 - should set V (M6) / cle
                                     tst_a 1,~fnz
1c81 : 08               [ 3]>            php         ;save flags
1c82 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1c84 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c86 : 68               [ 4]>            pla         ;load status
1c87 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1c88 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1c8a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  118
---------------------------- test_functional.asm -----------------------------

                            >
1c8c : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,$ff
                            >            load_flag $ff
1c8d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1c8f : 48               [ 3]>            pha         ;use stack to load status
1c90 : a901             [ 2]>            lda #1     ;precharge accu
1c92 : 28               [ 4]>            plp
                             
1c93 : 2c1902           [ 4]         bit abs1+1  ;82 - should set N (M7) & Z /
                                     tst_a 1,~fv
1c96 : 08               [ 3]>            php         ;save flags
1c97 : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1c99 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1c9b : 68               [ 4]>            pla         ;load status
1c9c : 48               [ 3]>            pha
                            >            cmp_flag ~fv
1c9d : c9bf             [ 2]>            cmp #(~fv|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1c9f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ca1 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a 1,$ff
                            >            load_flag $ff
1ca2 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1ca4 : 48               [ 3]>            pha         ;use stack to load status
1ca5 : a901             [ 2]>            lda #1     ;precharge accu
1ca7 : 28               [ 4]>            plp
                             
1ca8 : 2c1802           [ 4]         bit abs1    ;c3 - should set N (M7) & V (
                                     tst_a 1,~fz
1cab : 08               [ 3]>            php         ;save flags
1cac : c901             [ 2]>            cmp #1     ;test result
                            >            trap_ne
1cae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1cb0 : 68               [ 4]>            pla         ;load status
1cb1 : 48               [ 3]>            pha
                            >            cmp_flag ~fz
1cb2 : c9fd             [ 2]>            cmp #(~fz|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1cb4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1cb6 : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
1cb7 : ad0002           [ 4]>            lda test_case   ;previous test
1cba : c919             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
1cbc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
001a =                      >test_num = test_num + 1
1cbe : a91a             [ 2]>            lda #test_num   ;*** next tests' numb
1cc0 : 8d0002           [ 4]>            sta test_case
AS65 Assembler for R6502 [1.42].                                     Page  119
---------------------------- test_functional.asm -----------------------------

                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; CPX - zp / abs / #         
                                     set_x $80,0
                            >            load_flag 0
1cc3 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1cc5 : 48               [ 3]>            pha         ;use stack to load status
1cc6 : a280             [ 2]>            ldx #$80     ;precharge index x
1cc8 : 28               [ 4]>            plp
                             
1cc9 : e419             [ 3]         cpx zp7f
                                     tst_stat fc
1ccb : 08               [ 3]>            php         ;save status
1ccc : 68               [ 4]>            pla         ;use stack to retrieve st
1ccd : 48               [ 3]>            pha
                            >            cmp_flag fc
1cce : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1cd0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1cd2 : 28               [ 4]>            plp         ;restore status
                             
1cd3 : ca               [ 2]         dex
1cd4 : e419             [ 3]         cpx zp7f
                                     tst_stat fzc
1cd6 : 08               [ 3]>            php         ;save status
1cd7 : 68               [ 4]>            pla         ;use stack to retrieve st
1cd8 : 48               [ 3]>            pha
                            >            cmp_flag fzc
1cd9 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1cdb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1cdd : 28               [ 4]>            plp         ;restore status
                             
1cde : ca               [ 2]         dex
1cdf : e419             [ 3]         cpx zp7f
                                     tst_x $7e,fn
1ce1 : 08               [ 3]>            php         ;save flags
1ce2 : e07e             [ 2]>            cpx #$7e     ;test result
                            >            trap_ne
1ce4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ce6 : 68               [ 4]>            pla         ;load status
1ce7 : 48               [ 3]>            pha
                            >            cmp_flag fn
1ce8 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1cea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1cec : 28               [ 4]>            plp         ;restore status
                             
                                     set_x $80,$ff
                            >            load_flag $ff
1ced : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1cef : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page  120
---------------------------- test_functional.asm -----------------------------

1cf0 : a280             [ 2]>            ldx #$80     ;precharge index x
1cf2 : 28               [ 4]>            plp
                             
1cf3 : e419             [ 3]         cpx zp7f
                                     tst_stat ~fnz
1cf5 : 08               [ 3]>            php         ;save status
1cf6 : 68               [ 4]>            pla         ;use stack to retrieve st
1cf7 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1cf8 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1cfa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1cfc : 28               [ 4]>            plp         ;restore status
                             
1cfd : ca               [ 2]         dex
1cfe : e419             [ 3]         cpx zp7f
                                     tst_stat ~fn
1d00 : 08               [ 3]>            php         ;save status
1d01 : 68               [ 4]>            pla         ;use stack to retrieve st
1d02 : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1d03 : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1d05 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d07 : 28               [ 4]>            plp         ;restore status
                             
1d08 : ca               [ 2]         dex
1d09 : e419             [ 3]         cpx zp7f
                                     tst_x $7e,~fzc
1d0b : 08               [ 3]>            php         ;save flags
1d0c : e07e             [ 2]>            cpx #$7e     ;test result
                            >            trap_ne
1d0e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d10 : 68               [ 4]>            pla         ;load status
1d11 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1d12 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1d14 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d16 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_x $80,0
                            >            load_flag 0
1d17 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1d19 : 48               [ 3]>            pha         ;use stack to load status
1d1a : a280             [ 2]>            ldx #$80     ;precharge index x
1d1c : 28               [ 4]>            plp
                             
1d1d : ec1c02           [ 4]         cpx abs7f
                                     tst_stat fc
1d20 : 08               [ 3]>            php         ;save status
1d21 : 68               [ 4]>            pla         ;use stack to retrieve st
1d22 : 48               [ 3]>            pha
AS65 Assembler for R6502 [1.42].                                     Page  121
---------------------------- test_functional.asm -----------------------------

                            >            cmp_flag fc
1d23 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1d25 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d27 : 28               [ 4]>            plp         ;restore status
                             
1d28 : ca               [ 2]         dex
1d29 : ec1c02           [ 4]         cpx abs7f
                                     tst_stat fzc
1d2c : 08               [ 3]>            php         ;save status
1d2d : 68               [ 4]>            pla         ;use stack to retrieve st
1d2e : 48               [ 3]>            pha
                            >            cmp_flag fzc
1d2f : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1d31 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d33 : 28               [ 4]>            plp         ;restore status
                             
1d34 : ca               [ 2]         dex
1d35 : ec1c02           [ 4]         cpx abs7f
                                     tst_x $7e,fn
1d38 : 08               [ 3]>            php         ;save flags
1d39 : e07e             [ 2]>            cpx #$7e     ;test result
                            >            trap_ne
1d3b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d3d : 68               [ 4]>            pla         ;load status
1d3e : 48               [ 3]>            pha
                            >            cmp_flag fn
1d3f : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1d41 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d43 : 28               [ 4]>            plp         ;restore status
                             
                                     set_x $80,$ff
                            >            load_flag $ff
1d44 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1d46 : 48               [ 3]>            pha         ;use stack to load status
1d47 : a280             [ 2]>            ldx #$80     ;precharge index x
1d49 : 28               [ 4]>            plp
                             
1d4a : ec1c02           [ 4]         cpx abs7f
                                     tst_stat ~fnz
1d4d : 08               [ 3]>            php         ;save status
1d4e : 68               [ 4]>            pla         ;use stack to retrieve st
1d4f : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1d50 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1d52 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d54 : 28               [ 4]>            plp         ;restore status
                             
1d55 : ca               [ 2]         dex
AS65 Assembler for R6502 [1.42].                                     Page  122
---------------------------- test_functional.asm -----------------------------

1d56 : ec1c02           [ 4]         cpx abs7f
                                     tst_stat ~fn
1d59 : 08               [ 3]>            php         ;save status
1d5a : 68               [ 4]>            pla         ;use stack to retrieve st
1d5b : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1d5c : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1d5e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d60 : 28               [ 4]>            plp         ;restore status
                             
1d61 : ca               [ 2]         dex
1d62 : ec1c02           [ 4]         cpx abs7f
                                     tst_x $7e,~fzc
1d65 : 08               [ 3]>            php         ;save flags
1d66 : e07e             [ 2]>            cpx #$7e     ;test result
                            >            trap_ne
1d68 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d6a : 68               [ 4]>            pla         ;load status
1d6b : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1d6c : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1d6e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d70 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_x $80,0
                            >            load_flag 0
1d71 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1d73 : 48               [ 3]>            pha         ;use stack to load status
1d74 : a280             [ 2]>            ldx #$80     ;precharge index x
1d76 : 28               [ 4]>            plp
                             
1d77 : e07f             [ 2]         cpx #$7f
                                     tst_stat fc
1d79 : 08               [ 3]>            php         ;save status
1d7a : 68               [ 4]>            pla         ;use stack to retrieve st
1d7b : 48               [ 3]>            pha
                            >            cmp_flag fc
1d7c : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1d7e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d80 : 28               [ 4]>            plp         ;restore status
                             
1d81 : ca               [ 2]         dex
1d82 : e07f             [ 2]         cpx #$7f
                                     tst_stat fzc
1d84 : 08               [ 3]>            php         ;save status
1d85 : 68               [ 4]>            pla         ;use stack to retrieve st
1d86 : 48               [ 3]>            pha
                            >            cmp_flag fzc
1d87 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
AS65 Assembler for R6502 [1.42].                                     Page  123
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
1d89 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d8b : 28               [ 4]>            plp         ;restore status
                             
1d8c : ca               [ 2]         dex
1d8d : e07f             [ 2]         cpx #$7f
                                     tst_x $7e,fn
1d8f : 08               [ 3]>            php         ;save flags
1d90 : e07e             [ 2]>            cpx #$7e     ;test result
                            >            trap_ne
1d92 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d94 : 68               [ 4]>            pla         ;load status
1d95 : 48               [ 3]>            pha
                            >            cmp_flag fn
1d96 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1d98 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1d9a : 28               [ 4]>            plp         ;restore status
                             
                                     set_x $80,$ff
                            >            load_flag $ff
1d9b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1d9d : 48               [ 3]>            pha         ;use stack to load status
1d9e : a280             [ 2]>            ldx #$80     ;precharge index x
1da0 : 28               [ 4]>            plp
                             
1da1 : e07f             [ 2]         cpx #$7f
                                     tst_stat ~fnz
1da3 : 08               [ 3]>            php         ;save status
1da4 : 68               [ 4]>            pla         ;use stack to retrieve st
1da5 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1da6 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1da8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1daa : 28               [ 4]>            plp         ;restore status
                             
1dab : ca               [ 2]         dex
1dac : e07f             [ 2]         cpx #$7f
                                     tst_stat ~fn
1dae : 08               [ 3]>            php         ;save status
1daf : 68               [ 4]>            pla         ;use stack to retrieve st
1db0 : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1db1 : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1db3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1db5 : 28               [ 4]>            plp         ;restore status
                             
1db6 : ca               [ 2]         dex
1db7 : e07f             [ 2]         cpx #$7f
                                     tst_x $7e,~fzc
1db9 : 08               [ 3]>            php         ;save flags
AS65 Assembler for R6502 [1.42].                                     Page  124
---------------------------- test_functional.asm -----------------------------

1dba : e07e             [ 2]>            cpx #$7e     ;test result
                            >            trap_ne
1dbc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1dbe : 68               [ 4]>            pla         ;load status
1dbf : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1dc0 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1dc2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1dc4 : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
1dc5 : ad0002           [ 4]>            lda test_case   ;previous test
1dc8 : c91a             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
1dca : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
001b =                      >test_num = test_num + 1
1dcc : a91b             [ 2]>            lda #test_num   ;*** next tests' numb
1dce : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; CPY - zp / abs / #         
                                     set_y $80,0
                            >            load_flag 0
1dd1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1dd3 : 48               [ 3]>            pha         ;use stack to load status
1dd4 : a080             [ 2]>            ldy #$80     ;precharge index y
1dd6 : 28               [ 4]>            plp
                             
1dd7 : c419             [ 3]         cpy zp7f
                                     tst_stat fc
1dd9 : 08               [ 3]>            php         ;save status
1dda : 68               [ 4]>            pla         ;use stack to retrieve st
1ddb : 48               [ 3]>            pha
                            >            cmp_flag fc
1ddc : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1dde : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1de0 : 28               [ 4]>            plp         ;restore status
                             
1de1 : 88               [ 2]         dey
1de2 : c419             [ 3]         cpy zp7f
                                     tst_stat fzc
1de4 : 08               [ 3]>            php         ;save status
1de5 : 68               [ 4]>            pla         ;use stack to retrieve st
1de6 : 48               [ 3]>            pha
                            >            cmp_flag fzc
1de7 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1de9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1deb : 28               [ 4]>            plp         ;restore status
                             
AS65 Assembler for R6502 [1.42].                                     Page  125
---------------------------- test_functional.asm -----------------------------

1dec : 88               [ 2]         dey
1ded : c419             [ 3]         cpy zp7f
                                     tst_y $7e,fn
1def : 08               [ 3]>            php         ;save flags
1df0 : c07e             [ 2]>            cpy #$7e     ;test result
                            >            trap_ne
1df2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1df4 : 68               [ 4]>            pla         ;load status
1df5 : 48               [ 3]>            pha
                            >            cmp_flag fn
1df6 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1df8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1dfa : 28               [ 4]>            plp         ;restore status
                             
                                     set_y $80,$ff
                            >            load_flag $ff
1dfb : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1dfd : 48               [ 3]>            pha         ;use stack to load status
1dfe : a080             [ 2]>            ldy #$80     ;precharge index y
1e00 : 28               [ 4]>            plp
                             
1e01 : c419             [ 3]         cpy zp7f
                                     tst_stat ~fnz
1e03 : 08               [ 3]>            php         ;save status
1e04 : 68               [ 4]>            pla         ;use stack to retrieve st
1e05 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1e06 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1e08 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e0a : 28               [ 4]>            plp         ;restore status
                             
1e0b : 88               [ 2]         dey
1e0c : c419             [ 3]         cpy zp7f
                                     tst_stat ~fn
1e0e : 08               [ 3]>            php         ;save status
1e0f : 68               [ 4]>            pla         ;use stack to retrieve st
1e10 : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1e11 : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1e13 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e15 : 28               [ 4]>            plp         ;restore status
                             
1e16 : 88               [ 2]         dey
1e17 : c419             [ 3]         cpy zp7f
                                     tst_y $7e,~fzc
1e19 : 08               [ 3]>            php         ;save flags
1e1a : c07e             [ 2]>            cpy #$7e     ;test result
                            >            trap_ne
1e1c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e1e : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  126
---------------------------- test_functional.asm -----------------------------

1e1f : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1e20 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1e22 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e24 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_y $80,0
                            >            load_flag 0
1e25 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1e27 : 48               [ 3]>            pha         ;use stack to load status
1e28 : a080             [ 2]>            ldy #$80     ;precharge index y
1e2a : 28               [ 4]>            plp
                             
1e2b : cc1c02           [ 4]         cpy abs7f
                                     tst_stat fc
1e2e : 08               [ 3]>            php         ;save status
1e2f : 68               [ 4]>            pla         ;use stack to retrieve st
1e30 : 48               [ 3]>            pha
                            >            cmp_flag fc
1e31 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1e33 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e35 : 28               [ 4]>            plp         ;restore status
                             
1e36 : 88               [ 2]         dey
1e37 : cc1c02           [ 4]         cpy abs7f
                                     tst_stat fzc
1e3a : 08               [ 3]>            php         ;save status
1e3b : 68               [ 4]>            pla         ;use stack to retrieve st
1e3c : 48               [ 3]>            pha
                            >            cmp_flag fzc
1e3d : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1e3f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e41 : 28               [ 4]>            plp         ;restore status
                             
1e42 : 88               [ 2]         dey
1e43 : cc1c02           [ 4]         cpy abs7f
                                     tst_y $7e,fn
1e46 : 08               [ 3]>            php         ;save flags
1e47 : c07e             [ 2]>            cpy #$7e     ;test result
                            >            trap_ne
1e49 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e4b : 68               [ 4]>            pla         ;load status
1e4c : 48               [ 3]>            pha
                            >            cmp_flag fn
1e4d : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1e4f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e51 : 28               [ 4]>            plp         ;restore status
AS65 Assembler for R6502 [1.42].                                     Page  127
---------------------------- test_functional.asm -----------------------------

                             
                                     set_y $80,$ff
                            >            load_flag $ff
1e52 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1e54 : 48               [ 3]>            pha         ;use stack to load status
1e55 : a080             [ 2]>            ldy #$80     ;precharge index y
1e57 : 28               [ 4]>            plp
                             
1e58 : cc1c02           [ 4]         cpy abs7f
                                     tst_stat ~fnz
1e5b : 08               [ 3]>            php         ;save status
1e5c : 68               [ 4]>            pla         ;use stack to retrieve st
1e5d : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1e5e : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1e60 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e62 : 28               [ 4]>            plp         ;restore status
                             
1e63 : 88               [ 2]         dey
1e64 : cc1c02           [ 4]         cpy abs7f
                                     tst_stat ~fn
1e67 : 08               [ 3]>            php         ;save status
1e68 : 68               [ 4]>            pla         ;use stack to retrieve st
1e69 : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1e6a : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1e6c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e6e : 28               [ 4]>            plp         ;restore status
                             
1e6f : 88               [ 2]         dey
1e70 : cc1c02           [ 4]         cpy abs7f
                                     tst_y $7e,~fzc
1e73 : 08               [ 3]>            php         ;save flags
1e74 : c07e             [ 2]>            cpy #$7e     ;test result
                            >            trap_ne
1e76 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e78 : 68               [ 4]>            pla         ;load status
1e79 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1e7a : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1e7c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e7e : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_y $80,0
                            >            load_flag 0
1e7f : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1e81 : 48               [ 3]>            pha         ;use stack to load status
1e82 : a080             [ 2]>            ldy #$80     ;precharge index y
1e84 : 28               [ 4]>            plp
AS65 Assembler for R6502 [1.42].                                     Page  128
---------------------------- test_functional.asm -----------------------------

                             
1e85 : c07f             [ 2]         cpy #$7f
                                     tst_stat fc
1e87 : 08               [ 3]>            php         ;save status
1e88 : 68               [ 4]>            pla         ;use stack to retrieve st
1e89 : 48               [ 3]>            pha
                            >            cmp_flag fc
1e8a : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1e8c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e8e : 28               [ 4]>            plp         ;restore status
                             
1e8f : 88               [ 2]         dey
1e90 : c07f             [ 2]         cpy #$7f
                                     tst_stat fzc
1e92 : 08               [ 3]>            php         ;save status
1e93 : 68               [ 4]>            pla         ;use stack to retrieve st
1e94 : 48               [ 3]>            pha
                            >            cmp_flag fzc
1e95 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1e97 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1e99 : 28               [ 4]>            plp         ;restore status
                             
1e9a : 88               [ 2]         dey
1e9b : c07f             [ 2]         cpy #$7f
                                     tst_y $7e,fn
1e9d : 08               [ 3]>            php         ;save flags
1e9e : c07e             [ 2]>            cpy #$7e     ;test result
                            >            trap_ne
1ea0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ea2 : 68               [ 4]>            pla         ;load status
1ea3 : 48               [ 3]>            pha
                            >            cmp_flag fn
1ea4 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1ea6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ea8 : 28               [ 4]>            plp         ;restore status
                             
                                     set_y $80,$ff
                            >            load_flag $ff
1ea9 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1eab : 48               [ 3]>            pha         ;use stack to load status
1eac : a080             [ 2]>            ldy #$80     ;precharge index y
1eae : 28               [ 4]>            plp
                             
1eaf : c07f             [ 2]         cpy #$7f
                                     tst_stat ~fnz
1eb1 : 08               [ 3]>            php         ;save status
1eb2 : 68               [ 4]>            pla         ;use stack to retrieve st
1eb3 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1eb4 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
AS65 Assembler for R6502 [1.42].                                     Page  129
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
1eb6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1eb8 : 28               [ 4]>            plp         ;restore status
                             
1eb9 : 88               [ 2]         dey
1eba : c07f             [ 2]         cpy #$7f
                                     tst_stat ~fn
1ebc : 08               [ 3]>            php         ;save status
1ebd : 68               [ 4]>            pla         ;use stack to retrieve st
1ebe : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1ebf : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1ec1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ec3 : 28               [ 4]>            plp         ;restore status
                             
1ec4 : 88               [ 2]         dey
1ec5 : c07f             [ 2]         cpy #$7f
                                     tst_y $7e,~fzc
1ec7 : 08               [ 3]>            php         ;save flags
1ec8 : c07e             [ 2]>            cpy #$7e     ;test result
                            >            trap_ne
1eca : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ecc : 68               [ 4]>            pla         ;load status
1ecd : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1ece : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1ed0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ed2 : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
1ed3 : ad0002           [ 4]>            lda test_case   ;previous test
1ed6 : c91b             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
1ed8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
001c =                      >test_num = test_num + 1
1eda : a91c             [ 2]>            lda #test_num   ;*** next tests' numb
1edc : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; CMP - zp / abs / #         
                                     set_a $80,0
                            >            load_flag 0
1edf : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1ee1 : 48               [ 3]>            pha         ;use stack to load status
1ee2 : a980             [ 2]>            lda #$80     ;precharge accu
1ee4 : 28               [ 4]>            plp
                             
1ee5 : c519             [ 3]         cmp zp7f
                                     tst_a $80,fc
1ee7 : 08               [ 3]>            php         ;save flags
1ee8 : c980             [ 2]>            cmp #$80     ;test result
AS65 Assembler for R6502 [1.42].                                     Page  130
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
1eea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1eec : 68               [ 4]>            pla         ;load status
1eed : 48               [ 3]>            pha
                            >            cmp_flag fc
1eee : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1ef0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ef2 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
1ef3 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1ef5 : 48               [ 3]>            pha         ;use stack to load status
1ef6 : a97f             [ 2]>            lda #$7f     ;precharge accu
1ef8 : 28               [ 4]>            plp
                             
1ef9 : c519             [ 3]         cmp zp7f
                                     tst_a $7f,fzc
1efb : 08               [ 3]>            php         ;save flags
1efc : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
1efe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f00 : 68               [ 4]>            pla         ;load status
1f01 : 48               [ 3]>            pha
                            >            cmp_flag fzc
1f02 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1f04 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f06 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
1f07 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1f09 : 48               [ 3]>            pha         ;use stack to load status
1f0a : a97e             [ 2]>            lda #$7e     ;precharge accu
1f0c : 28               [ 4]>            plp
                             
1f0d : c519             [ 3]         cmp zp7f
                                     tst_a $7e,fn
1f0f : 08               [ 3]>            php         ;save flags
1f10 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
1f12 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f14 : 68               [ 4]>            pla         ;load status
1f15 : 48               [ 3]>            pha
                            >            cmp_flag fn
1f16 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1f18 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f1a : 28               [ 4]>            plp         ;restore status
AS65 Assembler for R6502 [1.42].                                     Page  131
---------------------------- test_functional.asm -----------------------------

                             
                                     set_a $80,$ff
                            >            load_flag $ff
1f1b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1f1d : 48               [ 3]>            pha         ;use stack to load status
1f1e : a980             [ 2]>            lda #$80     ;precharge accu
1f20 : 28               [ 4]>            plp
                             
1f21 : c519             [ 3]         cmp zp7f
                                     tst_a $80,~fnz
1f23 : 08               [ 3]>            php         ;save flags
1f24 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
1f26 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f28 : 68               [ 4]>            pla         ;load status
1f29 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1f2a : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1f2c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f2e : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
1f2f : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1f31 : 48               [ 3]>            pha         ;use stack to load status
1f32 : a97f             [ 2]>            lda #$7f     ;precharge accu
1f34 : 28               [ 4]>            plp
                             
1f35 : c519             [ 3]         cmp zp7f
                                     tst_a $7f,~fn
1f37 : 08               [ 3]>            php         ;save flags
1f38 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
1f3a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f3c : 68               [ 4]>            pla         ;load status
1f3d : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1f3e : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1f40 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f42 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
1f43 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1f45 : 48               [ 3]>            pha         ;use stack to load status
1f46 : a97e             [ 2]>            lda #$7e     ;precharge accu
1f48 : 28               [ 4]>            plp
                             
1f49 : c519             [ 3]         cmp zp7f
                                     tst_a $7e,~fzc
1f4b : 08               [ 3]>            php         ;save flags
AS65 Assembler for R6502 [1.42].                                     Page  132
---------------------------- test_functional.asm -----------------------------

1f4c : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
1f4e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f50 : 68               [ 4]>            pla         ;load status
1f51 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1f52 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1f54 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f56 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_a $80,0
                            >            load_flag 0
1f57 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1f59 : 48               [ 3]>            pha         ;use stack to load status
1f5a : a980             [ 2]>            lda #$80     ;precharge accu
1f5c : 28               [ 4]>            plp
                             
1f5d : cd1c02           [ 4]         cmp abs7f
                                     tst_a $80,fc
1f60 : 08               [ 3]>            php         ;save flags
1f61 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
1f63 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f65 : 68               [ 4]>            pla         ;load status
1f66 : 48               [ 3]>            pha
                            >            cmp_flag fc
1f67 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1f69 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f6b : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
1f6c : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1f6e : 48               [ 3]>            pha         ;use stack to load status
1f6f : a97f             [ 2]>            lda #$7f     ;precharge accu
1f71 : 28               [ 4]>            plp
                             
1f72 : cd1c02           [ 4]         cmp abs7f
                                     tst_a $7f,fzc
1f75 : 08               [ 3]>            php         ;save flags
1f76 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
1f78 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f7a : 68               [ 4]>            pla         ;load status
1f7b : 48               [ 3]>            pha
                            >            cmp_flag fzc
1f7c : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1f7e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  133
---------------------------- test_functional.asm -----------------------------

                            >
1f80 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
1f81 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1f83 : 48               [ 3]>            pha         ;use stack to load status
1f84 : a97e             [ 2]>            lda #$7e     ;precharge accu
1f86 : 28               [ 4]>            plp
                             
1f87 : cd1c02           [ 4]         cmp abs7f
                                     tst_a $7e,fn
1f8a : 08               [ 3]>            php         ;save flags
1f8b : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
1f8d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f8f : 68               [ 4]>            pla         ;load status
1f90 : 48               [ 3]>            pha
                            >            cmp_flag fn
1f91 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
1f93 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1f95 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
1f96 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1f98 : 48               [ 3]>            pha         ;use stack to load status
1f99 : a980             [ 2]>            lda #$80     ;precharge accu
1f9b : 28               [ 4]>            plp
                             
1f9c : cd1c02           [ 4]         cmp abs7f
                                     tst_a $80,~fnz
1f9f : 08               [ 3]>            php         ;save flags
1fa0 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
1fa2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fa4 : 68               [ 4]>            pla         ;load status
1fa5 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
1fa6 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1fa8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1faa : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
1fab : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1fad : 48               [ 3]>            pha         ;use stack to load status
1fae : a97f             [ 2]>            lda #$7f     ;precharge accu
1fb0 : 28               [ 4]>            plp
                             
1fb1 : cd1c02           [ 4]         cmp abs7f
AS65 Assembler for R6502 [1.42].                                     Page  134
---------------------------- test_functional.asm -----------------------------

                                     tst_a $7f,~fn
1fb4 : 08               [ 3]>            php         ;save flags
1fb5 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
1fb7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fb9 : 68               [ 4]>            pla         ;load status
1fba : 48               [ 3]>            pha
                            >            cmp_flag ~fn
1fbb : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1fbd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fbf : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
1fc0 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
1fc2 : 48               [ 3]>            pha         ;use stack to load status
1fc3 : a97e             [ 2]>            lda #$7e     ;precharge accu
1fc5 : 28               [ 4]>            plp
                             
1fc6 : cd1c02           [ 4]         cmp abs7f
                                     tst_a $7e,~fzc
1fc9 : 08               [ 3]>            php         ;save flags
1fca : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
1fcc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fce : 68               [ 4]>            pla         ;load status
1fcf : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
1fd0 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
1fd2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fd4 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_a $80,0
                            >            load_flag 0
1fd5 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1fd7 : 48               [ 3]>            pha         ;use stack to load status
1fd8 : a980             [ 2]>            lda #$80     ;precharge accu
1fda : 28               [ 4]>            plp
                             
1fdb : c97f             [ 2]         cmp #$7f
                                     tst_a $80,fc
1fdd : 08               [ 3]>            php         ;save flags
1fde : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
1fe0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fe2 : 68               [ 4]>            pla         ;load status
1fe3 : 48               [ 3]>            pha
                            >            cmp_flag fc
1fe4 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
AS65 Assembler for R6502 [1.42].                                     Page  135
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
1fe6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1fe8 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
1fe9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1feb : 48               [ 3]>            pha         ;use stack to load status
1fec : a97f             [ 2]>            lda #$7f     ;precharge accu
1fee : 28               [ 4]>            plp
                             
1fef : c97f             [ 2]         cmp #$7f
                                     tst_a $7f,fzc
1ff1 : 08               [ 3]>            php         ;save flags
1ff2 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
1ff4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ff6 : 68               [ 4]>            pla         ;load status
1ff7 : 48               [ 3]>            pha
                            >            cmp_flag fzc
1ff8 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
1ffa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
1ffc : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
1ffd : a900             [ 2]>            lda #0             ;allow test to cha
                            >
1fff : 48               [ 3]>            pha         ;use stack to load status
2000 : a97e             [ 2]>            lda #$7e     ;precharge accu
2002 : 28               [ 4]>            plp
                             
2003 : c97f             [ 2]         cmp #$7f
                                     tst_a $7e,fn
2005 : 08               [ 3]>            php         ;save flags
2006 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
2008 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
200a : 68               [ 4]>            pla         ;load status
200b : 48               [ 3]>            pha
                            >            cmp_flag fn
200c : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
200e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2010 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
2011 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2013 : 48               [ 3]>            pha         ;use stack to load status
2014 : a980             [ 2]>            lda #$80     ;precharge accu
2016 : 28               [ 4]>            plp
AS65 Assembler for R6502 [1.42].                                     Page  136
---------------------------- test_functional.asm -----------------------------

                             
2017 : c97f             [ 2]         cmp #$7f
                                     tst_a $80,~fnz
2019 : 08               [ 3]>            php         ;save flags
201a : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
201c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
201e : 68               [ 4]>            pla         ;load status
201f : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
2020 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
2022 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2024 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
2025 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2027 : 48               [ 3]>            pha         ;use stack to load status
2028 : a97f             [ 2]>            lda #$7f     ;precharge accu
202a : 28               [ 4]>            plp
                             
202b : c97f             [ 2]         cmp #$7f
                                     tst_a $7f,~fn
202d : 08               [ 3]>            php         ;save flags
202e : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
2030 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2032 : 68               [ 4]>            pla         ;load status
2033 : 48               [ 3]>            pha
                            >            cmp_flag ~fn
2034 : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
2036 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2038 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
2039 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
203b : 48               [ 3]>            pha         ;use stack to load status
203c : a97e             [ 2]>            lda #$7e     ;precharge accu
203e : 28               [ 4]>            plp
                             
203f : c97f             [ 2]         cmp #$7f
                                     tst_a $7e,~fzc
2041 : 08               [ 3]>            php         ;save flags
2042 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
2044 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2046 : 68               [ 4]>            pla         ;load status
2047 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
2048 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
AS65 Assembler for R6502 [1.42].                                     Page  137
---------------------------- test_functional.asm -----------------------------

                            >
                            >            trap_ne
204a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
204c : 28               [ 4]>            plp         ;restore status
                             
                             
204d : a204             [ 2]         ldx #4          ;with indexing by X
                                     set_a $80,0
                            >            load_flag 0
204f : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2051 : 48               [ 3]>            pha         ;use stack to load status
2052 : a980             [ 2]>            lda #$80     ;precharge accu
2054 : 28               [ 4]>            plp
                             
2055 : d515             [ 4]         cmp zp1,x
                                     tst_a $80,fc
2057 : 08               [ 3]>            php         ;save flags
2058 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
205a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
205c : 68               [ 4]>            pla         ;load status
205d : 48               [ 3]>            pha
                            >            cmp_flag fc
205e : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2060 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2062 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
2063 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2065 : 48               [ 3]>            pha         ;use stack to load status
2066 : a97f             [ 2]>            lda #$7f     ;precharge accu
2068 : 28               [ 4]>            plp
                             
2069 : d515             [ 4]         cmp zp1,x
                                     tst_a $7f,fzc
206b : 08               [ 3]>            php         ;save flags
206c : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
206e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2070 : 68               [ 4]>            pla         ;load status
2071 : 48               [ 3]>            pha
                            >            cmp_flag fzc
2072 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
2074 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2076 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
2077 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
AS65 Assembler for R6502 [1.42].                                     Page  138
---------------------------- test_functional.asm -----------------------------

2079 : 48               [ 3]>            pha         ;use stack to load status
207a : a97e             [ 2]>            lda #$7e     ;precharge accu
207c : 28               [ 4]>            plp
                             
207d : d515             [ 4]         cmp zp1,x
                                     tst_a $7e,fn
207f : 08               [ 3]>            php         ;save flags
2080 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
2082 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2084 : 68               [ 4]>            pla         ;load status
2085 : 48               [ 3]>            pha
                            >            cmp_flag fn
2086 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2088 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
208a : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
208b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
208d : 48               [ 3]>            pha         ;use stack to load status
208e : a980             [ 2]>            lda #$80     ;precharge accu
2090 : 28               [ 4]>            plp
                             
2091 : d515             [ 4]         cmp zp1,x
                                     tst_a $80,~fnz
2093 : 08               [ 3]>            php         ;save flags
2094 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
2096 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2098 : 68               [ 4]>            pla         ;load status
2099 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
209a : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
209c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
209e : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
209f : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
20a1 : 48               [ 3]>            pha         ;use stack to load status
20a2 : a97f             [ 2]>            lda #$7f     ;precharge accu
20a4 : 28               [ 4]>            plp
                             
20a5 : d515             [ 4]         cmp zp1,x
                                     tst_a $7f,~fn
20a7 : 08               [ 3]>            php         ;save flags
20a8 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
20aa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20ac : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  139
---------------------------- test_functional.asm -----------------------------

20ad : 48               [ 3]>            pha
                            >            cmp_flag ~fn
20ae : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
20b0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20b2 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
20b3 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
20b5 : 48               [ 3]>            pha         ;use stack to load status
20b6 : a97e             [ 2]>            lda #$7e     ;precharge accu
20b8 : 28               [ 4]>            plp
                             
20b9 : d515             [ 4]         cmp zp1,x
                                     tst_a $7e,~fzc
20bb : 08               [ 3]>            php         ;save flags
20bc : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
20be : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20c0 : 68               [ 4]>            pla         ;load status
20c1 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
20c2 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
20c4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20c6 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_a $80,0
                            >            load_flag 0
20c7 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
20c9 : 48               [ 3]>            pha         ;use stack to load status
20ca : a980             [ 2]>            lda #$80     ;precharge accu
20cc : 28               [ 4]>            plp
                             
20cd : dd1802           [ 4]         cmp abs1,x
                                     tst_a $80,fc
20d0 : 08               [ 3]>            php         ;save flags
20d1 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
20d3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20d5 : 68               [ 4]>            pla         ;load status
20d6 : 48               [ 3]>            pha
                            >            cmp_flag fc
20d7 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
20d9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20db : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
AS65 Assembler for R6502 [1.42].                                     Page  140
---------------------------- test_functional.asm -----------------------------

20dc : a900             [ 2]>            lda #0             ;allow test to cha
                            >
20de : 48               [ 3]>            pha         ;use stack to load status
20df : a97f             [ 2]>            lda #$7f     ;precharge accu
20e1 : 28               [ 4]>            plp
                             
20e2 : dd1802           [ 4]         cmp abs1,x
                                     tst_a $7f,fzc
20e5 : 08               [ 3]>            php         ;save flags
20e6 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
20e8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20ea : 68               [ 4]>            pla         ;load status
20eb : 48               [ 3]>            pha
                            >            cmp_flag fzc
20ec : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
20ee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20f0 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
20f1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
20f3 : 48               [ 3]>            pha         ;use stack to load status
20f4 : a97e             [ 2]>            lda #$7e     ;precharge accu
20f6 : 28               [ 4]>            plp
                             
20f7 : dd1802           [ 4]         cmp abs1,x
                                     tst_a $7e,fn
20fa : 08               [ 3]>            php         ;save flags
20fb : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
20fd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
20ff : 68               [ 4]>            pla         ;load status
2100 : 48               [ 3]>            pha
                            >            cmp_flag fn
2101 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2103 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2105 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
2106 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2108 : 48               [ 3]>            pha         ;use stack to load status
2109 : a980             [ 2]>            lda #$80     ;precharge accu
210b : 28               [ 4]>            plp
                             
210c : dd1802           [ 4]         cmp abs1,x
                                     tst_a $80,~fnz
210f : 08               [ 3]>            php         ;save flags
2110 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
2112 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  141
---------------------------- test_functional.asm -----------------------------

                            >
2114 : 68               [ 4]>            pla         ;load status
2115 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
2116 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
2118 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
211a : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
211b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
211d : 48               [ 3]>            pha         ;use stack to load status
211e : a97f             [ 2]>            lda #$7f     ;precharge accu
2120 : 28               [ 4]>            plp
                             
2121 : dd1802           [ 4]         cmp abs1,x
                                     tst_a $7f,~fn
2124 : 08               [ 3]>            php         ;save flags
2125 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
2127 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2129 : 68               [ 4]>            pla         ;load status
212a : 48               [ 3]>            pha
                            >            cmp_flag ~fn
212b : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
212d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
212f : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
2130 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2132 : 48               [ 3]>            pha         ;use stack to load status
2133 : a97e             [ 2]>            lda #$7e     ;precharge accu
2135 : 28               [ 4]>            plp
                             
2136 : dd1802           [ 4]         cmp abs1,x
                                     tst_a $7e,~fzc
2139 : 08               [ 3]>            php         ;save flags
213a : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
213c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
213e : 68               [ 4]>            pla         ;load status
213f : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
2140 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
2142 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2144 : 28               [ 4]>            plp         ;restore status
                             
                             
AS65 Assembler for R6502 [1.42].                                     Page  142
---------------------------- test_functional.asm -----------------------------

2145 : a004             [ 2]         ldy #4          ;with indexing by Y
2147 : a208             [ 2]         ldx #8          ;with indexed indirect
                                     set_a $80,0
                            >            load_flag 0
2149 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
214b : 48               [ 3]>            pha         ;use stack to load status
214c : a980             [ 2]>            lda #$80     ;precharge accu
214e : 28               [ 4]>            plp
                             
214f : d91802           [ 4]         cmp abs1,y
                                     tst_a $80,fc
2152 : 08               [ 3]>            php         ;save flags
2153 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
2155 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2157 : 68               [ 4]>            pla         ;load status
2158 : 48               [ 3]>            pha
                            >            cmp_flag fc
2159 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
215b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
215d : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
215e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2160 : 48               [ 3]>            pha         ;use stack to load status
2161 : a97f             [ 2]>            lda #$7f     ;precharge accu
2163 : 28               [ 4]>            plp
                             
2164 : d91802           [ 4]         cmp abs1,y
                                     tst_a $7f,fzc
2167 : 08               [ 3]>            php         ;save flags
2168 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
216a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
216c : 68               [ 4]>            pla         ;load status
216d : 48               [ 3]>            pha
                            >            cmp_flag fzc
216e : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
2170 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2172 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
2173 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2175 : 48               [ 3]>            pha         ;use stack to load status
2176 : a97e             [ 2]>            lda #$7e     ;precharge accu
2178 : 28               [ 4]>            plp
                             
2179 : d91802           [ 4]         cmp abs1,y
                                     tst_a $7e,fn
AS65 Assembler for R6502 [1.42].                                     Page  143
---------------------------- test_functional.asm -----------------------------

217c : 08               [ 3]>            php         ;save flags
217d : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
217f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2181 : 68               [ 4]>            pla         ;load status
2182 : 48               [ 3]>            pha
                            >            cmp_flag fn
2183 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2185 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2187 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
2188 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
218a : 48               [ 3]>            pha         ;use stack to load status
218b : a980             [ 2]>            lda #$80     ;precharge accu
218d : 28               [ 4]>            plp
                             
218e : d91802           [ 4]         cmp abs1,y
                                     tst_a $80,~fnz
2191 : 08               [ 3]>            php         ;save flags
2192 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
2194 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2196 : 68               [ 4]>            pla         ;load status
2197 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
2198 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
219a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
219c : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
219d : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
219f : 48               [ 3]>            pha         ;use stack to load status
21a0 : a97f             [ 2]>            lda #$7f     ;precharge accu
21a2 : 28               [ 4]>            plp
                             
21a3 : d91802           [ 4]         cmp abs1,y
                                     tst_a $7f,~fn
21a6 : 08               [ 3]>            php         ;save flags
21a7 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
21a9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21ab : 68               [ 4]>            pla         ;load status
21ac : 48               [ 3]>            pha
                            >            cmp_flag ~fn
21ad : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
21af : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  144
---------------------------- test_functional.asm -----------------------------

                            >
21b1 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
21b2 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
21b4 : 48               [ 3]>            pha         ;use stack to load status
21b5 : a97e             [ 2]>            lda #$7e     ;precharge accu
21b7 : 28               [ 4]>            plp
                             
21b8 : d91802           [ 4]         cmp abs1,y
                                     tst_a $7e,~fzc
21bb : 08               [ 3]>            php         ;save flags
21bc : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
21be : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21c0 : 68               [ 4]>            pla         ;load status
21c1 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
21c2 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
21c4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21c6 : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_a $80,0
                            >            load_flag 0
21c7 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
21c9 : 48               [ 3]>            pha         ;use stack to load status
21ca : a980             [ 2]>            lda #$80     ;precharge accu
21cc : 28               [ 4]>            plp
                             
21cd : c126             [ 6]         cmp (ind1,x)
                                     tst_a $80,fc
21cf : 08               [ 3]>            php         ;save flags
21d0 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
21d2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21d4 : 68               [ 4]>            pla         ;load status
21d5 : 48               [ 3]>            pha
                            >            cmp_flag fc
21d6 : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
21d8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21da : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
21db : a900             [ 2]>            lda #0             ;allow test to cha
                            >
21dd : 48               [ 3]>            pha         ;use stack to load status
21de : a97f             [ 2]>            lda #$7f     ;precharge accu
21e0 : 28               [ 4]>            plp
                             
AS65 Assembler for R6502 [1.42].                                     Page  145
---------------------------- test_functional.asm -----------------------------

21e1 : c126             [ 6]         cmp (ind1,x)
                                     tst_a $7f,fzc
21e3 : 08               [ 3]>            php         ;save flags
21e4 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
21e6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21e8 : 68               [ 4]>            pla         ;load status
21e9 : 48               [ 3]>            pha
                            >            cmp_flag fzc
21ea : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
21ec : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21ee : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
21ef : a900             [ 2]>            lda #0             ;allow test to cha
                            >
21f1 : 48               [ 3]>            pha         ;use stack to load status
21f2 : a97e             [ 2]>            lda #$7e     ;precharge accu
21f4 : 28               [ 4]>            plp
                             
21f5 : c126             [ 6]         cmp (ind1,x)
                                     tst_a $7e,fn
21f7 : 08               [ 3]>            php         ;save flags
21f8 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
21fa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
21fc : 68               [ 4]>            pla         ;load status
21fd : 48               [ 3]>            pha
                            >            cmp_flag fn
21fe : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2200 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2202 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
2203 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2205 : 48               [ 3]>            pha         ;use stack to load status
2206 : a980             [ 2]>            lda #$80     ;precharge accu
2208 : 28               [ 4]>            plp
                             
2209 : c126             [ 6]         cmp (ind1,x)
                                     tst_a $80,~fnz
220b : 08               [ 3]>            php         ;save flags
220c : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
220e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2210 : 68               [ 4]>            pla         ;load status
2211 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
2212 : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
AS65 Assembler for R6502 [1.42].                                     Page  146
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
2214 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2216 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
2217 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2219 : 48               [ 3]>            pha         ;use stack to load status
221a : a97f             [ 2]>            lda #$7f     ;precharge accu
221c : 28               [ 4]>            plp
                             
221d : c126             [ 6]         cmp (ind1,x)
                                     tst_a $7f,~fn
221f : 08               [ 3]>            php         ;save flags
2220 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
2222 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2224 : 68               [ 4]>            pla         ;load status
2225 : 48               [ 3]>            pha
                            >            cmp_flag ~fn
2226 : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
2228 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
222a : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
222b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
222d : 48               [ 3]>            pha         ;use stack to load status
222e : a97e             [ 2]>            lda #$7e     ;precharge accu
2230 : 28               [ 4]>            plp
                             
2231 : c126             [ 6]         cmp (ind1,x)
                                     tst_a $7e,~fzc
2233 : 08               [ 3]>            php         ;save flags
2234 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
2236 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2238 : 68               [ 4]>            pla         ;load status
2239 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
223a : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
223c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
223e : 28               [ 4]>            plp         ;restore status
                             
                             
                                     set_a $80,0
                            >            load_flag 0
223f : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2241 : 48               [ 3]>            pha         ;use stack to load status
2242 : a980             [ 2]>            lda #$80     ;precharge accu
AS65 Assembler for R6502 [1.42].                                     Page  147
---------------------------- test_functional.asm -----------------------------

2244 : 28               [ 4]>            plp
                             
2245 : d126             [ 5]         cmp (ind1),y
                                     tst_a $80,fc
2247 : 08               [ 3]>            php         ;save flags
2248 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
224a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
224c : 68               [ 4]>            pla         ;load status
224d : 48               [ 3]>            pha
                            >            cmp_flag fc
224e : c931             [ 2]>            cmp #(fc|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2250 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2252 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,0
                            >            load_flag 0
2253 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2255 : 48               [ 3]>            pha         ;use stack to load status
2256 : a97f             [ 2]>            lda #$7f     ;precharge accu
2258 : 28               [ 4]>            plp
                             
2259 : d126             [ 5]         cmp (ind1),y
                                     tst_a $7f,fzc
225b : 08               [ 3]>            php         ;save flags
225c : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
225e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2260 : 68               [ 4]>            pla         ;load status
2261 : 48               [ 3]>            pha
                            >            cmp_flag fzc
2262 : c933             [ 2]>            cmp #(fzc|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
2264 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2266 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,0
                            >            load_flag 0
2267 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2269 : 48               [ 3]>            pha         ;use stack to load status
226a : a97e             [ 2]>            lda #$7e     ;precharge accu
226c : 28               [ 4]>            plp
                             
226d : d126             [ 5]         cmp (ind1),y
                                     tst_a $7e,fn
226f : 08               [ 3]>            php         ;save flags
2270 : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
2272 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2274 : 68               [ 4]>            pla         ;load status
2275 : 48               [ 3]>            pha
                            >            cmp_flag fn
AS65 Assembler for R6502 [1.42].                                     Page  148
---------------------------- test_functional.asm -----------------------------

2276 : c9b0             [ 2]>            cmp #(fn|fao)&m8    ;expected flags +
                            >
                            >            trap_ne
2278 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
227a : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $80,$ff
                            >            load_flag $ff
227b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
227d : 48               [ 3]>            pha         ;use stack to load status
227e : a980             [ 2]>            lda #$80     ;precharge accu
2280 : 28               [ 4]>            plp
                             
2281 : d126             [ 5]         cmp (ind1),y
                                     tst_a $80,~fnz
2283 : 08               [ 3]>            php         ;save flags
2284 : c980             [ 2]>            cmp #$80     ;test result
                            >            trap_ne
2286 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2288 : 68               [ 4]>            pla         ;load status
2289 : 48               [ 3]>            pha
                            >            cmp_flag ~fnz
228a : c97d             [ 2]>            cmp #(~fnz|fao)&m8    ;expected flags
                            >
                            >            trap_ne
228c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
228e : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7f,$ff
                            >            load_flag $ff
228f : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2291 : 48               [ 3]>            pha         ;use stack to load status
2292 : a97f             [ 2]>            lda #$7f     ;precharge accu
2294 : 28               [ 4]>            plp
                             
2295 : d126             [ 5]         cmp (ind1),y
                                     tst_a $7f,~fn
2297 : 08               [ 3]>            php         ;save flags
2298 : c97f             [ 2]>            cmp #$7f     ;test result
                            >            trap_ne
229a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
229c : 68               [ 4]>            pla         ;load status
229d : 48               [ 3]>            pha
                            >            cmp_flag ~fn
229e : c97f             [ 2]>            cmp #(~fn|fao)&m8    ;expected flags 
                            >
                            >            trap_ne
22a0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
22a2 : 28               [ 4]>            plp         ;restore status
                             
                                     set_a $7e,$ff
                            >            load_flag $ff
22a3 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
22a5 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page  149
---------------------------- test_functional.asm -----------------------------

22a6 : a97e             [ 2]>            lda #$7e     ;precharge accu
22a8 : 28               [ 4]>            plp
                             
22a9 : d126             [ 5]         cmp (ind1),y
                                     tst_a $7e,~fzc
22ab : 08               [ 3]>            php         ;save flags
22ac : c97e             [ 2]>            cmp #$7e     ;test result
                            >            trap_ne
22ae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
22b0 : 68               [ 4]>            pla         ;load status
22b1 : 48               [ 3]>            pha
                            >            cmp_flag ~fzc
22b2 : c9fc             [ 2]>            cmp #(~fzc|fao)&m8    ;expected flags
                            >
                            >            trap_ne
22b4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
22b6 : 28               [ 4]>            plp         ;restore status
                             
                                     next_test
22b7 : ad0002           [ 4]>            lda test_case   ;previous test
22ba : c91c             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
22bc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
001d =                      >test_num = test_num + 1
22be : a91d             [ 2]>            lda #test_num   ;*** next tests' numb
22c0 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; testing shifts - ASL LSR ROL ROR all addressing
                             ; shifts - accumulator
22c3 : a205             [ 2]         ldx #5
22c5 :                       tasl
                                     set_ax zps,0
                            >            load_flag 0
22c5 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
22c7 : 48               [ 3]>            pha         ;use stack to load status
22c8 : b513             [ 4]>            lda zps,x    ;precharge accu
22ca : 28               [ 4]>            plp
                             
22cb : 0a               [ 2]         asl a
                                     tst_ax rASL,fASL,0
22cc : 08               [ 3]>            php         ;save flags
22cd : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
22d0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
22d2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
22d3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
22d5 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne     ;
22d8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
22da : ca               [ 2]         dex
22db : 10e8             [ 3]         bpl tasl
AS65 Assembler for R6502 [1.42].                                     Page  150
---------------------------- test_functional.asm -----------------------------

22dd : a205             [ 2]         ldx #5
22df :                       tasl1
                                     set_ax zps,$ff
                            >            load_flag $ff
22df : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
22e1 : 48               [ 3]>            pha         ;use stack to load status
22e2 : b513             [ 4]>            lda zps,x    ;precharge accu
22e4 : 28               [ 4]>            plp
                             
22e5 : 0a               [ 2]         asl a
                                     tst_ax rASL,fASL,$ff-fnzc
22e6 : 08               [ 3]>            php         ;save flags
22e7 : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
22ea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
22ec : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
22ed : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
22ef : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne     ;
22f2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
22f4 : ca               [ 2]         dex
22f5 : 10e8             [ 3]         bpl tasl1
                             
22f7 : a205             [ 2]         ldx #5
22f9 :                       tlsr
                                     set_ax zps,0
                            >            load_flag 0
22f9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
22fb : 48               [ 3]>            pha         ;use stack to load status
22fc : b513             [ 4]>            lda zps,x    ;precharge accu
22fe : 28               [ 4]>            plp
                             
22ff : 4a               [ 2]         lsr a
                                     tst_ax rLSR,fLSR,0
2300 : 08               [ 3]>            php         ;save flags
2301 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
2304 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2306 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2307 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2309 : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne     ;
230c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
230e : ca               [ 2]         dex
230f : 10e8             [ 4]         bpl tlsr
2311 : a205             [ 2]         ldx #5
2313 :                       tlsr1
                                     set_ax zps,$ff
                            >            load_flag $ff
2313 : a9ff             [ 2]>            lda #$ff             ;allow test to c
AS65 Assembler for R6502 [1.42].                                     Page  151
---------------------------- test_functional.asm -----------------------------

                            >
2315 : 48               [ 3]>            pha         ;use stack to load status
2316 : b513             [ 4]>            lda zps,x    ;precharge accu
2318 : 28               [ 4]>            plp
                             
2319 : 4a               [ 2]         lsr a
                                     tst_ax rLSR,fLSR,$ff-fnzc
231a : 08               [ 3]>            php         ;save flags
231b : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
231e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2320 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2321 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2323 : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne     ;
2326 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2328 : ca               [ 2]         dex
2329 : 10e8             [ 3]         bpl tlsr1
                             
232b : a205             [ 2]         ldx #5
232d :                       trol
                                     set_ax zps,0
                            >            load_flag 0
232d : a900             [ 2]>            lda #0             ;allow test to cha
                            >
232f : 48               [ 3]>            pha         ;use stack to load status
2330 : b513             [ 4]>            lda zps,x    ;precharge accu
2332 : 28               [ 4]>            plp
                             
2333 : 2a               [ 2]         rol a
                                     tst_ax rROL,fROL,0
2334 : 08               [ 3]>            php         ;save flags
2335 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
2338 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
233a : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
233b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
233d : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne     ;
2340 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2342 : ca               [ 2]         dex
2343 : 10e8             [ 3]         bpl trol
2345 : a205             [ 2]         ldx #5
2347 :                       trol1
                                     set_ax zps,$ff-fc
                            >            load_flag $ff-fc
2347 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
2349 : 48               [ 3]>            pha         ;use stack to load status
234a : b513             [ 4]>            lda zps,x    ;precharge accu
234c : 28               [ 4]>            plp
                             
AS65 Assembler for R6502 [1.42].                                     Page  152
---------------------------- test_functional.asm -----------------------------

234d : 2a               [ 2]         rol a
                                     tst_ax rROL,fROL,$ff-fnzc
234e : 08               [ 3]>            php         ;save flags
234f : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
2352 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2354 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2355 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2357 : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne     ;
235a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
235c : ca               [ 2]         dex
235d : 10e8             [ 3]         bpl trol1
                             
235f : a205             [ 2]         ldx #5
2361 :                       trolc
                                     set_ax zps,fc
                            >            load_flag fc
2361 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
2363 : 48               [ 3]>            pha         ;use stack to load status
2364 : b513             [ 4]>            lda zps,x    ;precharge accu
2366 : 28               [ 4]>            plp
                             
2367 : 2a               [ 2]         rol a
                                     tst_ax rROLc,fROLc,0
2368 : 08               [ 3]>            php         ;save flags
2369 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
236c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
236e : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
236f : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2371 : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne     ;
2374 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2376 : ca               [ 2]         dex
2377 : 10e8             [ 3]         bpl trolc
2379 : a205             [ 2]         ldx #5
237b :                       trolc1
                                     set_ax zps,$ff
                            >            load_flag $ff
237b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
237d : 48               [ 3]>            pha         ;use stack to load status
237e : b513             [ 4]>            lda zps,x    ;precharge accu
2380 : 28               [ 4]>            plp
                             
2381 : 2a               [ 2]         rol a
                                     tst_ax rROLc,fROLc,$ff-fnzc
2382 : 08               [ 3]>            php         ;save flags
2383 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page  153
---------------------------- test_functional.asm -----------------------------

2386 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2388 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2389 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
238b : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne     ;
238e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2390 : ca               [ 2]         dex
2391 : 10e8             [ 3]         bpl trolc1
                             
2393 : a205             [ 2]         ldx #5
2395 :                       tror
                                     set_ax zps,0
                            >            load_flag 0
2395 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2397 : 48               [ 3]>            pha         ;use stack to load status
2398 : b513             [ 4]>            lda zps,x    ;precharge accu
239a : 28               [ 4]>            plp
                             
239b : 6a               [ 2]         ror a
                                     tst_ax rROR,fROR,0
239c : 08               [ 3]>            php         ;save flags
239d : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
23a0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
23a2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
23a3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
23a5 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne     ;
23a8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
23aa : ca               [ 2]         dex
23ab : 10e8             [ 3]         bpl tror
23ad : a205             [ 2]         ldx #5
23af :                       tror1
                                     set_ax zps,$ff-fc
                            >            load_flag $ff-fc
23af : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
23b1 : 48               [ 3]>            pha         ;use stack to load status
23b2 : b513             [ 4]>            lda zps,x    ;precharge accu
23b4 : 28               [ 4]>            plp
                             
23b5 : 6a               [ 2]         ror a
                                     tst_ax rROR,fROR,$ff-fnzc
23b6 : 08               [ 3]>            php         ;save flags
23b7 : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
23ba : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
23bc : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
23bd : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
AS65 Assembler for R6502 [1.42].                                     Page  154
---------------------------- test_functional.asm -----------------------------

                            >
23bf : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne     ;
23c2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
23c4 : ca               [ 2]         dex
23c5 : 10e8             [ 3]         bpl tror1
                             
23c7 : a205             [ 2]         ldx #5
23c9 :                       trorc
                                     set_ax zps,fc
                            >            load_flag fc
23c9 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
23cb : 48               [ 3]>            pha         ;use stack to load status
23cc : b513             [ 4]>            lda zps,x    ;precharge accu
23ce : 28               [ 4]>            plp
                             
23cf : 6a               [ 2]         ror a
                                     tst_ax rRORc,fRORc,0
23d0 : 08               [ 3]>            php         ;save flags
23d1 : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
23d4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
23d6 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
23d7 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
23d9 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne     ;
23dc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
23de : ca               [ 2]         dex
23df : 10e8             [ 3]         bpl trorc
23e1 : a205             [ 2]         ldx #5
23e3 :                       trorc1
                                     set_ax zps,$ff
                            >            load_flag $ff
23e3 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
23e5 : 48               [ 3]>            pha         ;use stack to load status
23e6 : b513             [ 4]>            lda zps,x    ;precharge accu
23e8 : 28               [ 4]>            plp
                             
23e9 : 6a               [ 2]         ror a
                                     tst_ax rRORc,fRORc,$ff-fnzc
23ea : 08               [ 3]>            php         ;save flags
23eb : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
23ee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
23f0 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
23f1 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
23f3 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne     ;
23f6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  155
---------------------------- test_functional.asm -----------------------------

                             
23f8 : ca               [ 2]         dex
23f9 : 10e8             [ 3]         bpl trorc1
                                     next_test
23fb : ad0002           [ 4]>            lda test_case   ;previous test
23fe : c91d             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2400 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
001e =                      >test_num = test_num + 1
2402 : a91e             [ 2]>            lda #test_num   ;*** next tests' numb
2404 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; shifts - zeropage
2407 : a205             [ 2]         ldx #5
2409 :                       tasl2
                                     set_z zps,0
                            >            load_flag 0
2409 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
240b : 48               [ 3]>            pha         ;use stack to load status
240c : b513             [ 4]>            lda zps,x    ;load to zeropage
240e : 850c             [ 3]>            sta zpt
2410 : 28               [ 4]>            plp
                             
2411 : 060c             [ 5]         asl zpt
                                     tst_z rASL,fASL,0
2413 : 08               [ 3]>            php         ;save flags
2414 : a50c             [ 3]>            lda zpt
2416 : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
2419 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
241b : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
241c : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
241e : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
2421 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2423 : ca               [ 2]         dex
2424 : 10e3             [ 3]         bpl tasl2
2426 : a205             [ 2]         ldx #5
2428 :                       tasl3
                                     set_z zps,$ff
                            >            load_flag $ff
2428 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
242a : 48               [ 3]>            pha         ;use stack to load status
242b : b513             [ 4]>            lda zps,x    ;load to zeropage
242d : 850c             [ 3]>            sta zpt
242f : 28               [ 4]>            plp
                             
2430 : 060c             [ 5]         asl zpt
                                     tst_z rASL,fASL,$ff-fnzc
2432 : 08               [ 3]>            php         ;save flags
2433 : a50c             [ 3]>            lda zpt
2435 : dd2102           [ 4]>            cmp rASL,x    ;test result
AS65 Assembler for R6502 [1.42].                                     Page  156
---------------------------- test_functional.asm -----------------------------

                            >            trap_ne
2438 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
243a : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
243b : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
243d : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
2440 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2442 : ca               [ 2]         dex
2443 : 10e3             [ 3]         bpl tasl3
                             
2445 : a205             [ 2]         ldx #5
2447 :                       tlsr2
                                     set_z zps,0
                            >            load_flag 0
2447 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2449 : 48               [ 3]>            pha         ;use stack to load status
244a : b513             [ 4]>            lda zps,x    ;load to zeropage
244c : 850c             [ 3]>            sta zpt
244e : 28               [ 4]>            plp
                             
244f : 460c             [ 5]         lsr zpt
                                     tst_z rLSR,fLSR,0
2451 : 08               [ 3]>            php         ;save flags
2452 : a50c             [ 3]>            lda zpt
2454 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
2457 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2459 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
245a : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
245c : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
245f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2461 : ca               [ 2]         dex
2462 : 10e3             [ 3]         bpl tlsr2
2464 : a205             [ 2]         ldx #5
2466 :                       tlsr3
                                     set_z zps,$ff
                            >            load_flag $ff
2466 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2468 : 48               [ 3]>            pha         ;use stack to load status
2469 : b513             [ 4]>            lda zps,x    ;load to zeropage
246b : 850c             [ 3]>            sta zpt
246d : 28               [ 4]>            plp
                             
246e : 460c             [ 5]         lsr zpt
                                     tst_z rLSR,fLSR,$ff-fnzc
2470 : 08               [ 3]>            php         ;save flags
2471 : a50c             [ 3]>            lda zpt
2473 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page  157
---------------------------- test_functional.asm -----------------------------

2476 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2478 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2479 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
247b : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
247e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2480 : ca               [ 2]         dex
2481 : 10e3             [ 3]         bpl tlsr3
                             
2483 : a205             [ 2]         ldx #5
2485 :                       trol2
                                     set_z zps,0
                            >            load_flag 0
2485 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2487 : 48               [ 3]>            pha         ;use stack to load status
2488 : b513             [ 4]>            lda zps,x    ;load to zeropage
248a : 850c             [ 3]>            sta zpt
248c : 28               [ 4]>            plp
                             
248d : 260c             [ 5]         rol zpt
                                     tst_z rROL,fROL,0
248f : 08               [ 3]>            php         ;save flags
2490 : a50c             [ 3]>            lda zpt
2492 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
2495 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2497 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2498 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
249a : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
249d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
249f : ca               [ 2]         dex
24a0 : 10e3             [ 3]         bpl trol2
24a2 : a205             [ 2]         ldx #5
24a4 :                       trol3
                                     set_z zps,$ff-fc
                            >            load_flag $ff-fc
24a4 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
24a6 : 48               [ 3]>            pha         ;use stack to load status
24a7 : b513             [ 4]>            lda zps,x    ;load to zeropage
24a9 : 850c             [ 3]>            sta zpt
24ab : 28               [ 4]>            plp
                             
24ac : 260c             [ 5]         rol zpt
                                     tst_z rROL,fROL,$ff-fnzc
24ae : 08               [ 3]>            php         ;save flags
24af : a50c             [ 3]>            lda zpt
24b1 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
24b4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  158
---------------------------- test_functional.asm -----------------------------

                            >
24b6 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
24b7 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
24b9 : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
24bc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
24be : ca               [ 2]         dex
24bf : 10e3             [ 3]         bpl trol3
                             
24c1 : a205             [ 2]         ldx #5
24c3 :                       trolc2
                                     set_z zps,fc
                            >            load_flag fc
24c3 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
24c5 : 48               [ 3]>            pha         ;use stack to load status
24c6 : b513             [ 4]>            lda zps,x    ;load to zeropage
24c8 : 850c             [ 3]>            sta zpt
24ca : 28               [ 4]>            plp
                             
24cb : 260c             [ 5]         rol zpt
                                     tst_z rROLc,fROLc,0
24cd : 08               [ 3]>            php         ;save flags
24ce : a50c             [ 3]>            lda zpt
24d0 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
24d3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
24d5 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
24d6 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
24d8 : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
24db : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
24dd : ca               [ 2]         dex
24de : 10e3             [ 3]         bpl trolc2
24e0 : a205             [ 2]         ldx #5
24e2 :                       trolc3
                                     set_z zps,$ff
                            >            load_flag $ff
24e2 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
24e4 : 48               [ 3]>            pha         ;use stack to load status
24e5 : b513             [ 4]>            lda zps,x    ;load to zeropage
24e7 : 850c             [ 3]>            sta zpt
24e9 : 28               [ 4]>            plp
                             
24ea : 260c             [ 5]         rol zpt
                                     tst_z rROLc,fROLc,$ff-fnzc
24ec : 08               [ 3]>            php         ;save flags
24ed : a50c             [ 3]>            lda zpt
24ef : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
24f2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  159
---------------------------- test_functional.asm -----------------------------

24f4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
24f5 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
24f7 : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
24fa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
24fc : ca               [ 2]         dex
24fd : 10e3             [ 3]         bpl trolc3
                             
24ff : a205             [ 2]         ldx #5
2501 :                       tror2
                                     set_z zps,0
                            >            load_flag 0
2501 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2503 : 48               [ 3]>            pha         ;use stack to load status
2504 : b513             [ 4]>            lda zps,x    ;load to zeropage
2506 : 850c             [ 3]>            sta zpt
2508 : 28               [ 4]>            plp
                             
2509 : 660c             [ 5]         ror zpt
                                     tst_z rROR,fROR,0
250b : 08               [ 3]>            php         ;save flags
250c : a50c             [ 3]>            lda zpt
250e : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
2511 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2513 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2514 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2516 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
2519 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
251b : ca               [ 2]         dex
251c : 10e3             [ 3]         bpl tror2
251e : a205             [ 2]         ldx #5
2520 :                       tror3
                                     set_z zps,$ff-fc
                            >            load_flag $ff-fc
2520 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
2522 : 48               [ 3]>            pha         ;use stack to load status
2523 : b513             [ 4]>            lda zps,x    ;load to zeropage
2525 : 850c             [ 3]>            sta zpt
2527 : 28               [ 4]>            plp
                             
2528 : 660c             [ 5]         ror zpt
                                     tst_z rROR,fROR,$ff-fnzc
252a : 08               [ 3]>            php         ;save flags
252b : a50c             [ 3]>            lda zpt
252d : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
2530 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2532 : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  160
---------------------------- test_functional.asm -----------------------------

                            >            eor_flag $ff-fnzc
2533 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2535 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
2538 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
253a : ca               [ 2]         dex
253b : 10e3             [ 3]         bpl tror3
                             
253d : a205             [ 2]         ldx #5
253f :                       trorc2
                                     set_z zps,fc
                            >            load_flag fc
253f : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
2541 : 48               [ 3]>            pha         ;use stack to load status
2542 : b513             [ 4]>            lda zps,x    ;load to zeropage
2544 : 850c             [ 3]>            sta zpt
2546 : 28               [ 4]>            plp
                             
2547 : 660c             [ 5]         ror zpt
                                     tst_z rRORc,fRORc,0
2549 : 08               [ 3]>            php         ;save flags
254a : a50c             [ 3]>            lda zpt
254c : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
254f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2551 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2552 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2554 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
2557 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2559 : ca               [ 2]         dex
255a : 10e3             [ 3]         bpl trorc2
255c : a205             [ 2]         ldx #5
255e :                       trorc3
                                     set_z zps,$ff
                            >            load_flag $ff
255e : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2560 : 48               [ 3]>            pha         ;use stack to load status
2561 : b513             [ 4]>            lda zps,x    ;load to zeropage
2563 : 850c             [ 3]>            sta zpt
2565 : 28               [ 4]>            plp
                             
2566 : 660c             [ 5]         ror zpt
                                     tst_z rRORc,fRORc,$ff-fnzc
2568 : 08               [ 3]>            php         ;save flags
2569 : a50c             [ 3]>            lda zpt
256b : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
256e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2570 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
AS65 Assembler for R6502 [1.42].                                     Page  161
---------------------------- test_functional.asm -----------------------------

2571 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2573 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
2576 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2578 : ca               [ 2]         dex
2579 : 10e3             [ 3]         bpl trorc3
                                     next_test
257b : ad0002           [ 4]>            lda test_case   ;previous test
257e : c91e             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2580 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
001f =                      >test_num = test_num + 1
2582 : a91f             [ 2]>            lda #test_num   ;*** next tests' numb
2584 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; shifts - absolute
2587 : a205             [ 2]         ldx #5
2589 :                       tasl4
                                     set_abs zps,0
                            >            load_flag 0
2589 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
258b : 48               [ 3]>            pha         ;use stack to load status
258c : b513             [ 4]>            lda zps,x    ;load to memory
258e : 8d0302           [ 4]>            sta abst
2591 : 28               [ 4]>            plp
                             
2592 : 0e0302           [ 6]         asl abst
                                     tst_abs rASL,fASL,0
2595 : 08               [ 3]>            php         ;save flags
2596 : ad0302           [ 4]>            lda abst
2599 : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
259c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
259e : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
259f : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
25a1 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
25a4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
25a6 : ca               [ 2]         dex
25a7 : 10e0             [ 3]         bpl tasl4
25a9 : a205             [ 2]         ldx #5
25ab :                       tasl5
                                     set_abs zps,$ff
                            >            load_flag $ff
25ab : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
25ad : 48               [ 3]>            pha         ;use stack to load status
25ae : b513             [ 4]>            lda zps,x    ;load to memory
25b0 : 8d0302           [ 4]>            sta abst
25b3 : 28               [ 4]>            plp
AS65 Assembler for R6502 [1.42].                                     Page  162
---------------------------- test_functional.asm -----------------------------

                             
25b4 : 0e0302           [ 6]         asl abst
                                     tst_abs rASL,fASL,$ff-fnzc
25b7 : 08               [ 3]>            php         ;save flags
25b8 : ad0302           [ 4]>            lda abst
25bb : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
25be : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
25c0 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
25c1 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
25c3 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
25c6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
25c8 : ca               [ 2]         dex
25c9 : 10e0             [ 3]         bpl tasl5
                             
25cb : a205             [ 2]         ldx #5
25cd :                       tlsr4
                                     set_abs zps,0
                            >            load_flag 0
25cd : a900             [ 2]>            lda #0             ;allow test to cha
                            >
25cf : 48               [ 3]>            pha         ;use stack to load status
25d0 : b513             [ 4]>            lda zps,x    ;load to memory
25d2 : 8d0302           [ 4]>            sta abst
25d5 : 28               [ 4]>            plp
                             
25d6 : 4e0302           [ 6]         lsr abst
                                     tst_abs rLSR,fLSR,0
25d9 : 08               [ 3]>            php         ;save flags
25da : ad0302           [ 4]>            lda abst
25dd : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
25e0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
25e2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
25e3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
25e5 : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
25e8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
25ea : ca               [ 2]         dex
25eb : 10e0             [ 3]         bpl tlsr4
25ed : a205             [ 2]         ldx #5
25ef :                       tlsr5
                                     set_abs zps,$ff
                            >            load_flag $ff
25ef : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
25f1 : 48               [ 3]>            pha         ;use stack to load status
25f2 : b513             [ 4]>            lda zps,x    ;load to memory
25f4 : 8d0302           [ 4]>            sta abst
25f7 : 28               [ 4]>            plp
                             
AS65 Assembler for R6502 [1.42].                                     Page  163
---------------------------- test_functional.asm -----------------------------

25f8 : 4e0302           [ 6]         lsr abst
                                     tst_abs rLSR,fLSR,$ff-fnzc
25fb : 08               [ 3]>            php         ;save flags
25fc : ad0302           [ 4]>            lda abst
25ff : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
2602 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2604 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2605 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2607 : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
260a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
260c : ca               [ 2]         dex
260d : 10e0             [ 4]         bpl tlsr5
                             
260f : a205             [ 2]         ldx #5
2611 :                       trol4
                                     set_abs zps,0
                            >            load_flag 0
2611 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2613 : 48               [ 3]>            pha         ;use stack to load status
2614 : b513             [ 4]>            lda zps,x    ;load to memory
2616 : 8d0302           [ 4]>            sta abst
2619 : 28               [ 4]>            plp
                             
261a : 2e0302           [ 6]         rol abst
                                     tst_abs rROL,fROL,0
261d : 08               [ 3]>            php         ;save flags
261e : ad0302           [ 4]>            lda abst
2621 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
2624 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2626 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2627 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2629 : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
262c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
262e : ca               [ 2]         dex
262f : 10e0             [ 3]         bpl trol4
2631 : a205             [ 2]         ldx #5
2633 :                       trol5
                                     set_abs zps,$ff-fc
                            >            load_flag $ff-fc
2633 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
2635 : 48               [ 3]>            pha         ;use stack to load status
2636 : b513             [ 4]>            lda zps,x    ;load to memory
2638 : 8d0302           [ 4]>            sta abst
263b : 28               [ 4]>            plp
                             
263c : 2e0302           [ 6]         rol abst
AS65 Assembler for R6502 [1.42].                                     Page  164
---------------------------- test_functional.asm -----------------------------

                                     tst_abs rROL,fROL,$ff-fnzc
263f : 08               [ 3]>            php         ;save flags
2640 : ad0302           [ 4]>            lda abst
2643 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
2646 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2648 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2649 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
264b : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
264e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2650 : ca               [ 2]         dex
2651 : 10e0             [ 3]         bpl trol5
                             
2653 : a205             [ 2]         ldx #5
2655 :                       trolc4
                                     set_abs zps,fc
                            >            load_flag fc
2655 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
2657 : 48               [ 3]>            pha         ;use stack to load status
2658 : b513             [ 4]>            lda zps,x    ;load to memory
265a : 8d0302           [ 4]>            sta abst
265d : 28               [ 4]>            plp
                             
265e : 2e0302           [ 6]         rol abst
                                     tst_abs rROLc,fROLc,0
2661 : 08               [ 3]>            php         ;save flags
2662 : ad0302           [ 4]>            lda abst
2665 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
2668 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
266a : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
266b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
266d : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
2670 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2672 : ca               [ 2]         dex
2673 : 10e0             [ 3]         bpl trolc4
2675 : a205             [ 2]         ldx #5
2677 :                       trolc5
                                     set_abs zps,$ff
                            >            load_flag $ff
2677 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2679 : 48               [ 3]>            pha         ;use stack to load status
267a : b513             [ 4]>            lda zps,x    ;load to memory
267c : 8d0302           [ 4]>            sta abst
267f : 28               [ 4]>            plp
                             
2680 : 2e0302           [ 6]         rol abst
                                     tst_abs rROLc,fROLc,$ff-fnzc
AS65 Assembler for R6502 [1.42].                                     Page  165
---------------------------- test_functional.asm -----------------------------

2683 : 08               [ 3]>            php         ;save flags
2684 : ad0302           [ 4]>            lda abst
2687 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
268a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
268c : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
268d : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
268f : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
2692 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2694 : ca               [ 2]         dex
2695 : 10e0             [ 3]         bpl trolc5
                             
2697 : a205             [ 2]         ldx #5
2699 :                       tror4
                                     set_abs zps,0
                            >            load_flag 0
2699 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
269b : 48               [ 3]>            pha         ;use stack to load status
269c : b513             [ 4]>            lda zps,x    ;load to memory
269e : 8d0302           [ 4]>            sta abst
26a1 : 28               [ 4]>            plp
                             
26a2 : 6e0302           [ 6]         ror abst
                                     tst_abs rROR,fROR,0
26a5 : 08               [ 3]>            php         ;save flags
26a6 : ad0302           [ 4]>            lda abst
26a9 : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
26ac : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
26ae : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
26af : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
26b1 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
26b4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
26b6 : ca               [ 2]         dex
26b7 : 10e0             [ 3]         bpl tror4
26b9 : a205             [ 2]         ldx #5
26bb :                       tror5
                                     set_abs zps,$ff-fc
                            >            load_flag $ff-fc
26bb : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
26bd : 48               [ 3]>            pha         ;use stack to load status
26be : b513             [ 4]>            lda zps,x    ;load to memory
26c0 : 8d0302           [ 4]>            sta abst
26c3 : 28               [ 4]>            plp
                             
26c4 : 6e0302           [ 6]         ror abst
                                     tst_abs rROR,fROR,$ff-fnzc
26c7 : 08               [ 3]>            php         ;save flags
AS65 Assembler for R6502 [1.42].                                     Page  166
---------------------------- test_functional.asm -----------------------------

26c8 : ad0302           [ 4]>            lda abst
26cb : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
26ce : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
26d0 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
26d1 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
26d3 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
26d6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
26d8 : ca               [ 2]         dex
26d9 : 10e0             [ 3]         bpl tror5
                             
26db : a205             [ 2]         ldx #5
26dd :                       trorc4
                                     set_abs zps,fc
                            >            load_flag fc
26dd : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
26df : 48               [ 3]>            pha         ;use stack to load status
26e0 : b513             [ 4]>            lda zps,x    ;load to memory
26e2 : 8d0302           [ 4]>            sta abst
26e5 : 28               [ 4]>            plp
                             
26e6 : 6e0302           [ 6]         ror abst
                                     tst_abs rRORc,fRORc,0
26e9 : 08               [ 3]>            php         ;save flags
26ea : ad0302           [ 4]>            lda abst
26ed : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
26f0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
26f2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
26f3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
26f5 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
26f8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
26fa : ca               [ 2]         dex
26fb : 10e0             [ 3]         bpl trorc4
26fd : a205             [ 2]         ldx #5
26ff :                       trorc5
                                     set_abs zps,$ff
                            >            load_flag $ff
26ff : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2701 : 48               [ 3]>            pha         ;use stack to load status
2702 : b513             [ 4]>            lda zps,x    ;load to memory
2704 : 8d0302           [ 4]>            sta abst
2707 : 28               [ 4]>            plp
                             
2708 : 6e0302           [ 6]         ror abst
                                     tst_abs rRORc,fRORc,$ff-fnzc
270b : 08               [ 3]>            php         ;save flags
270c : ad0302           [ 4]>            lda abst
AS65 Assembler for R6502 [1.42].                                     Page  167
---------------------------- test_functional.asm -----------------------------

270f : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
2712 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2714 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2715 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2717 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
271a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
271c : ca               [ 2]         dex
271d : 10e0             [ 4]         bpl trorc5
                                     next_test
271f : ad0002           [ 4]>            lda test_case   ;previous test
2722 : c91f             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2724 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0020 =                      >test_num = test_num + 1
2726 : a920             [ 2]>            lda #test_num   ;*** next tests' numb
2728 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; shifts - zp indexed
272b : a205             [ 2]         ldx #5
272d :                       tasl6
                                     set_zx zps,0
                            >            load_flag 0
272d : a900             [ 2]>            lda #0             ;allow test to cha
                            >
272f : 48               [ 3]>            pha         ;use stack to load status
2730 : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
2732 : 950c             [ 4]>            sta zpt,x
2734 : 28               [ 4]>            plp
                             
2735 : 160c             [ 6]         asl zpt,x
                                     tst_zx rASL,fASL,0
2737 : 08               [ 3]>            php         ;save flags
2738 : b50c             [ 4]>            lda zpt,x
273a : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
273d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
273f : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2740 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2742 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
2745 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2747 : ca               [ 2]         dex
2748 : 10e3             [ 3]         bpl tasl6
274a : a205             [ 2]         ldx #5
274c :                       tasl7
                                     set_zx zps,$ff
                            >            load_flag $ff
AS65 Assembler for R6502 [1.42].                                     Page  168
---------------------------- test_functional.asm -----------------------------

274c : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
274e : 48               [ 3]>            pha         ;use stack to load status
274f : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
2751 : 950c             [ 4]>            sta zpt,x
2753 : 28               [ 4]>            plp
                             
2754 : 160c             [ 6]         asl zpt,x
                                     tst_zx rASL,fASL,$ff-fnzc
2756 : 08               [ 3]>            php         ;save flags
2757 : b50c             [ 4]>            lda zpt,x
2759 : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
275c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
275e : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
275f : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2761 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
2764 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2766 : ca               [ 2]         dex
2767 : 10e3             [ 3]         bpl tasl7
                             
2769 : a205             [ 2]         ldx #5
276b :                       tlsr6
                                     set_zx zps,0
                            >            load_flag 0
276b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
276d : 48               [ 3]>            pha         ;use stack to load status
276e : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
2770 : 950c             [ 4]>            sta zpt,x
2772 : 28               [ 4]>            plp
                             
2773 : 560c             [ 6]         lsr zpt,x
                                     tst_zx rLSR,fLSR,0
2775 : 08               [ 3]>            php         ;save flags
2776 : b50c             [ 4]>            lda zpt,x
2778 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
277b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
277d : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
277e : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2780 : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
2783 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2785 : ca               [ 2]         dex
2786 : 10e3             [ 3]         bpl tlsr6
2788 : a205             [ 2]         ldx #5
278a :                       tlsr7
                                     set_zx zps,$ff
                            >            load_flag $ff
278a : a9ff             [ 2]>            lda #$ff             ;allow test to c
AS65 Assembler for R6502 [1.42].                                     Page  169
---------------------------- test_functional.asm -----------------------------

                            >
278c : 48               [ 3]>            pha         ;use stack to load status
278d : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
278f : 950c             [ 4]>            sta zpt,x
2791 : 28               [ 4]>            plp
                             
2792 : 560c             [ 6]         lsr zpt,x
                                     tst_zx rLSR,fLSR,$ff-fnzc
2794 : 08               [ 3]>            php         ;save flags
2795 : b50c             [ 4]>            lda zpt,x
2797 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
279a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
279c : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
279d : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
279f : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
27a2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
27a4 : ca               [ 2]         dex
27a5 : 10e3             [ 3]         bpl tlsr7
                             
27a7 : a205             [ 2]         ldx #5
27a9 :                       trol6
                                     set_zx zps,0
                            >            load_flag 0
27a9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
27ab : 48               [ 3]>            pha         ;use stack to load status
27ac : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
27ae : 950c             [ 4]>            sta zpt,x
27b0 : 28               [ 4]>            plp
                             
27b1 : 360c             [ 6]         rol zpt,x
                                     tst_zx rROL,fROL,0
27b3 : 08               [ 3]>            php         ;save flags
27b4 : b50c             [ 4]>            lda zpt,x
27b6 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
27b9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
27bb : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
27bc : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
27be : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
27c1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
27c3 : ca               [ 2]         dex
27c4 : 10e3             [ 3]         bpl trol6
27c6 : a205             [ 2]         ldx #5
27c8 :                       trol7
                                     set_zx zps,$ff-fc
                            >            load_flag $ff-fc
27c8 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
AS65 Assembler for R6502 [1.42].                                     Page  170
---------------------------- test_functional.asm -----------------------------

27ca : 48               [ 3]>            pha         ;use stack to load status
27cb : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
27cd : 950c             [ 4]>            sta zpt,x
27cf : 28               [ 4]>            plp
                             
27d0 : 360c             [ 6]         rol zpt,x
                                     tst_zx rROL,fROL,$ff-fnzc
27d2 : 08               [ 3]>            php         ;save flags
27d3 : b50c             [ 4]>            lda zpt,x
27d5 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
27d8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
27da : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
27db : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
27dd : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
27e0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
27e2 : ca               [ 2]         dex
27e3 : 10e3             [ 3]         bpl trol7
                             
27e5 : a205             [ 2]         ldx #5
27e7 :                       trolc6
                                     set_zx zps,fc
                            >            load_flag fc
27e7 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
27e9 : 48               [ 3]>            pha         ;use stack to load status
27ea : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
27ec : 950c             [ 4]>            sta zpt,x
27ee : 28               [ 4]>            plp
                             
27ef : 360c             [ 6]         rol zpt,x
                                     tst_zx rROLc,fROLc,0
27f1 : 08               [ 3]>            php         ;save flags
27f2 : b50c             [ 4]>            lda zpt,x
27f4 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
27f7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
27f9 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
27fa : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
27fc : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
27ff : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2801 : ca               [ 2]         dex
2802 : 10e3             [ 4]         bpl trolc6
2804 : a205             [ 2]         ldx #5
2806 :                       trolc7
                                     set_zx zps,$ff
                            >            load_flag $ff
2806 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2808 : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page  171
---------------------------- test_functional.asm -----------------------------

2809 : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
280b : 950c             [ 4]>            sta zpt,x
280d : 28               [ 4]>            plp
                             
280e : 360c             [ 6]         rol zpt,x
                                     tst_zx rROLc,fROLc,$ff-fnzc
2810 : 08               [ 3]>            php         ;save flags
2811 : b50c             [ 4]>            lda zpt,x
2813 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
2816 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2818 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2819 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
281b : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
281e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2820 : ca               [ 2]         dex
2821 : 10e3             [ 3]         bpl trolc7
                             
2823 : a205             [ 2]         ldx #5
2825 :                       tror6
                                     set_zx zps,0
                            >            load_flag 0
2825 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2827 : 48               [ 3]>            pha         ;use stack to load status
2828 : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
282a : 950c             [ 4]>            sta zpt,x
282c : 28               [ 4]>            plp
                             
282d : 760c             [ 6]         ror zpt,x
                                     tst_zx rROR,fROR,0
282f : 08               [ 3]>            php         ;save flags
2830 : b50c             [ 4]>            lda zpt,x
2832 : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
2835 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2837 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2838 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
283a : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
283d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
283f : ca               [ 2]         dex
2840 : 10e3             [ 3]         bpl tror6
2842 : a205             [ 2]         ldx #5
2844 :                       tror7
                                     set_zx zps,$ff-fc
                            >            load_flag $ff-fc
2844 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
2846 : 48               [ 3]>            pha         ;use stack to load status
2847 : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
AS65 Assembler for R6502 [1.42].                                     Page  172
---------------------------- test_functional.asm -----------------------------

2849 : 950c             [ 4]>            sta zpt,x
284b : 28               [ 4]>            plp
                             
284c : 760c             [ 6]         ror zpt,x
                                     tst_zx rROR,fROR,$ff-fnzc
284e : 08               [ 3]>            php         ;save flags
284f : b50c             [ 4]>            lda zpt,x
2851 : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
2854 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2856 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2857 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2859 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
285c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
285e : ca               [ 2]         dex
285f : 10e3             [ 3]         bpl tror7
                             
2861 : a205             [ 2]         ldx #5
2863 :                       trorc6
                                     set_zx zps,fc
                            >            load_flag fc
2863 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
2865 : 48               [ 3]>            pha         ;use stack to load status
2866 : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
2868 : 950c             [ 4]>            sta zpt,x
286a : 28               [ 4]>            plp
                             
286b : 760c             [ 6]         ror zpt,x
                                     tst_zx rRORc,fRORc,0
286d : 08               [ 3]>            php         ;save flags
286e : b50c             [ 4]>            lda zpt,x
2870 : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
2873 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2875 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2876 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2878 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
287b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
287d : ca               [ 2]         dex
287e : 10e3             [ 3]         bpl trorc6
2880 : a205             [ 2]         ldx #5
2882 :                       trorc7
                                     set_zx zps,$ff
                            >            load_flag $ff
2882 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2884 : 48               [ 3]>            pha         ;use stack to load status
2885 : b513             [ 4]>            lda zps,x    ;load to indexed zeropag
2887 : 950c             [ 4]>            sta zpt,x
AS65 Assembler for R6502 [1.42].                                     Page  173
---------------------------- test_functional.asm -----------------------------

2889 : 28               [ 4]>            plp
                             
288a : 760c             [ 6]         ror zpt,x
                                     tst_zx rRORc,fRORc,$ff-fnzc
288c : 08               [ 3]>            php         ;save flags
288d : b50c             [ 4]>            lda zpt,x
288f : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
2892 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2894 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2895 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2897 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
289a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
289c : ca               [ 2]         dex
289d : 10e3             [ 3]         bpl trorc7
                                     next_test
289f : ad0002           [ 4]>            lda test_case   ;previous test
28a2 : c920             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
28a4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0021 =                      >test_num = test_num + 1
28a6 : a921             [ 2]>            lda #test_num   ;*** next tests' numb
28a8 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                                     
                             ; shifts - abs indexed
28ab : a205             [ 2]         ldx #5
28ad :                       tasl8
                                     set_absx zps,0
                            >            load_flag 0
28ad : a900             [ 2]>            lda #0             ;allow test to cha
                            >
28af : 48               [ 3]>            pha         ;use stack to load status
28b0 : b513             [ 4]>            lda zps,x    ;load to indexed memory
28b2 : 9d0302           [ 5]>            sta abst,x
28b5 : 28               [ 4]>            plp
                             
28b6 : 1e0302           [ 7]         asl abst,x
                                     tst_absx rASL,fASL,0
28b9 : 08               [ 3]>            php         ;save flags
28ba : bd0302           [ 4]>            lda abst,x
28bd : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
28c0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
28c2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
28c3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
28c5 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
28c8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
AS65 Assembler for R6502 [1.42].                                     Page  174
---------------------------- test_functional.asm -----------------------------

28ca : ca               [ 2]         dex
28cb : 10e0             [ 3]         bpl tasl8
28cd : a205             [ 2]         ldx #5
28cf :                       tasl9
                                     set_absx zps,$ff
                            >            load_flag $ff
28cf : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
28d1 : 48               [ 3]>            pha         ;use stack to load status
28d2 : b513             [ 4]>            lda zps,x    ;load to indexed memory
28d4 : 9d0302           [ 5]>            sta abst,x
28d7 : 28               [ 4]>            plp
                             
28d8 : 1e0302           [ 7]         asl abst,x
                                     tst_absx rASL,fASL,$ff-fnzc
28db : 08               [ 3]>            php         ;save flags
28dc : bd0302           [ 4]>            lda abst,x
28df : dd2102           [ 4]>            cmp rASL,x    ;test result
                            >            trap_ne
28e2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
28e4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
28e5 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
28e7 : dd3902           [ 4]>            cmp fASL,x    ;test flags
                            >            trap_ne
28ea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
28ec : ca               [ 2]         dex
28ed : 10e0             [ 3]         bpl tasl9
                             
28ef : a205             [ 2]         ldx #5
28f1 :                       tlsr8
                                     set_absx zps,0
                            >            load_flag 0
28f1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
28f3 : 48               [ 3]>            pha         ;use stack to load status
28f4 : b513             [ 4]>            lda zps,x    ;load to indexed memory
28f6 : 9d0302           [ 5]>            sta abst,x
28f9 : 28               [ 4]>            plp
                             
28fa : 5e0302           [ 7]         lsr abst,x
                                     tst_absx rLSR,fLSR,0
28fd : 08               [ 3]>            php         ;save flags
28fe : bd0302           [ 4]>            lda abst,x
2901 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
2904 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2906 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2907 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2909 : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
290c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
290e : ca               [ 2]         dex
AS65 Assembler for R6502 [1.42].                                     Page  175
---------------------------- test_functional.asm -----------------------------

290f : 10e0             [ 4]         bpl tlsr8
2911 : a205             [ 2]         ldx #5
2913 :                       tlsr9
                                     set_absx zps,$ff
                            >            load_flag $ff
2913 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2915 : 48               [ 3]>            pha         ;use stack to load status
2916 : b513             [ 4]>            lda zps,x    ;load to indexed memory
2918 : 9d0302           [ 5]>            sta abst,x
291b : 28               [ 4]>            plp
                             
291c : 5e0302           [ 7]         lsr abst,x
                                     tst_absx rLSR,fLSR,$ff-fnzc
291f : 08               [ 3]>            php         ;save flags
2920 : bd0302           [ 4]>            lda abst,x
2923 : dd2d02           [ 4]>            cmp rLSR,x    ;test result
                            >            trap_ne
2926 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2928 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2929 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
292b : dd4502           [ 4]>            cmp fLSR,x    ;test flags
                            >            trap_ne
292e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2930 : ca               [ 2]         dex
2931 : 10e0             [ 3]         bpl tlsr9
                             
2933 : a205             [ 2]         ldx #5
2935 :                       trol8
                                     set_absx zps,0
                            >            load_flag 0
2935 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2937 : 48               [ 3]>            pha         ;use stack to load status
2938 : b513             [ 4]>            lda zps,x    ;load to indexed memory
293a : 9d0302           [ 5]>            sta abst,x
293d : 28               [ 4]>            plp
                             
293e : 3e0302           [ 7]         rol abst,x
                                     tst_absx rROL,fROL,0
2941 : 08               [ 3]>            php         ;save flags
2942 : bd0302           [ 4]>            lda abst,x
2945 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
2948 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
294a : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
294b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
294d : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
2950 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2952 : ca               [ 2]         dex
2953 : 10e0             [ 3]         bpl trol8
AS65 Assembler for R6502 [1.42].                                     Page  176
---------------------------- test_functional.asm -----------------------------

2955 : a205             [ 2]         ldx #5
2957 :                       trol9
                                     set_absx zps,$ff-fc
                            >            load_flag $ff-fc
2957 : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
2959 : 48               [ 3]>            pha         ;use stack to load status
295a : b513             [ 4]>            lda zps,x    ;load to indexed memory
295c : 9d0302           [ 5]>            sta abst,x
295f : 28               [ 4]>            plp
                             
2960 : 3e0302           [ 7]         rol abst,x
                                     tst_absx rROL,fROL,$ff-fnzc
2963 : 08               [ 3]>            php         ;save flags
2964 : bd0302           [ 4]>            lda abst,x
2967 : dd2102           [ 4]>            cmp rROL,x    ;test result
                            >            trap_ne
296a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
296c : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
296d : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
296f : dd3902           [ 4]>            cmp fROL,x    ;test flags
                            >            trap_ne
2972 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2974 : ca               [ 2]         dex
2975 : 10e0             [ 3]         bpl trol9
                             
2977 : a205             [ 2]         ldx #5
2979 :                       trolc8
                                     set_absx zps,fc
                            >            load_flag fc
2979 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
297b : 48               [ 3]>            pha         ;use stack to load status
297c : b513             [ 4]>            lda zps,x    ;load to indexed memory
297e : 9d0302           [ 5]>            sta abst,x
2981 : 28               [ 4]>            plp
                             
2982 : 3e0302           [ 7]         rol abst,x
                                     tst_absx rROLc,fROLc,0
2985 : 08               [ 3]>            php         ;save flags
2986 : bd0302           [ 4]>            lda abst,x
2989 : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
298c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
298e : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
298f : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2991 : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
2994 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2996 : ca               [ 2]         dex
2997 : 10e0             [ 3]         bpl trolc8
2999 : a205             [ 2]         ldx #5
AS65 Assembler for R6502 [1.42].                                     Page  177
---------------------------- test_functional.asm -----------------------------

299b :                       trolc9
                                     set_absx zps,$ff
                            >            load_flag $ff
299b : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
299d : 48               [ 3]>            pha         ;use stack to load status
299e : b513             [ 4]>            lda zps,x    ;load to indexed memory
29a0 : 9d0302           [ 5]>            sta abst,x
29a3 : 28               [ 4]>            plp
                             
29a4 : 3e0302           [ 7]         rol abst,x
                                     tst_absx rROLc,fROLc,$ff-fnzc
29a7 : 08               [ 3]>            php         ;save flags
29a8 : bd0302           [ 4]>            lda abst,x
29ab : dd2702           [ 4]>            cmp rROLc,x    ;test result
                            >            trap_ne
29ae : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
29b0 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
29b1 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
29b3 : dd3f02           [ 4]>            cmp fROLc,x    ;test flags
                            >            trap_ne
29b6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
29b8 : ca               [ 2]         dex
29b9 : 10e0             [ 3]         bpl trolc9
                             
29bb : a205             [ 2]         ldx #5
29bd :                       tror8
                                     set_absx zps,0
                            >            load_flag 0
29bd : a900             [ 2]>            lda #0             ;allow test to cha
                            >
29bf : 48               [ 3]>            pha         ;use stack to load status
29c0 : b513             [ 4]>            lda zps,x    ;load to indexed memory
29c2 : 9d0302           [ 5]>            sta abst,x
29c5 : 28               [ 4]>            plp
                             
29c6 : 7e0302           [ 7]         ror abst,x
                                     tst_absx rROR,fROR,0
29c9 : 08               [ 3]>            php         ;save flags
29ca : bd0302           [ 4]>            lda abst,x
29cd : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
29d0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
29d2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
29d3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
29d5 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
29d8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
29da : ca               [ 2]         dex
29db : 10e0             [ 3]         bpl tror8
29dd : a205             [ 2]         ldx #5
29df :                       tror9
AS65 Assembler for R6502 [1.42].                                     Page  178
---------------------------- test_functional.asm -----------------------------

                                     set_absx zps,$ff-fc
                            >            load_flag $ff-fc
29df : a9fe             [ 2]>            lda #$ff-fc             ;allow test t
                            >
29e1 : 48               [ 3]>            pha         ;use stack to load status
29e2 : b513             [ 4]>            lda zps,x    ;load to indexed memory
29e4 : 9d0302           [ 5]>            sta abst,x
29e7 : 28               [ 4]>            plp
                             
29e8 : 7e0302           [ 7]         ror abst,x
                                     tst_absx rROR,fROR,$ff-fnzc
29eb : 08               [ 3]>            php         ;save flags
29ec : bd0302           [ 4]>            lda abst,x
29ef : dd2d02           [ 4]>            cmp rROR,x    ;test result
                            >            trap_ne
29f2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
29f4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
29f5 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
29f7 : dd4502           [ 4]>            cmp fROR,x    ;test flags
                            >            trap_ne
29fa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
29fc : ca               [ 2]         dex
29fd : 10e0             [ 3]         bpl tror9
                             
29ff : a205             [ 2]         ldx #5
2a01 :                       trorc8
                                     set_absx zps,fc
                            >            load_flag fc
2a01 : a901             [ 2]>            lda #fc             ;allow test to ch
                            >
2a03 : 48               [ 3]>            pha         ;use stack to load status
2a04 : b513             [ 4]>            lda zps,x    ;load to indexed memory
2a06 : 9d0302           [ 5]>            sta abst,x
2a09 : 28               [ 4]>            plp
                             
2a0a : 7e0302           [ 7]         ror abst,x
                                     tst_absx rRORc,fRORc,0
2a0d : 08               [ 3]>            php         ;save flags
2a0e : bd0302           [ 4]>            lda abst,x
2a11 : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
2a14 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2a16 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2a17 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2a19 : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
2a1c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2a1e : ca               [ 2]         dex
2a1f : 10e0             [ 3]         bpl trorc8
2a21 : a205             [ 2]         ldx #5
2a23 :                       trorc9
                                     set_absx zps,$ff
AS65 Assembler for R6502 [1.42].                                     Page  179
---------------------------- test_functional.asm -----------------------------

                            >            load_flag $ff
2a23 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2a25 : 48               [ 3]>            pha         ;use stack to load status
2a26 : b513             [ 4]>            lda zps,x    ;load to indexed memory
2a28 : 9d0302           [ 5]>            sta abst,x
2a2b : 28               [ 4]>            plp
                             
2a2c : 7e0302           [ 7]         ror abst,x
                                     tst_absx rRORc,fRORc,$ff-fnzc
2a2f : 08               [ 3]>            php         ;save flags
2a30 : bd0302           [ 4]>            lda abst,x
2a33 : dd3302           [ 4]>            cmp rRORc,x    ;test result
                            >            trap_ne
2a36 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2a38 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnzc
2a39 : 497c             [ 2]>            eor #$ff-fnzc|fao         ;invert exp
                            >
2a3b : dd4b02           [ 4]>            cmp fRORc,x    ;test flags
                            >            trap_ne
2a3e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2a40 : ca               [ 2]         dex
2a41 : 10e0             [ 3]         bpl trorc9
                                     next_test
2a43 : ad0002           [ 4]>            lda test_case   ;previous test
2a46 : c921             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2a48 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0022 =                      >test_num = test_num + 1
2a4a : a922             [ 2]>            lda #test_num   ;*** next tests' numb
2a4c : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; testing memory increment/decrement - INC DEC al
                             ; zeropage
2a4f : a200             [ 2]         ldx #0
2a51 : a97e             [ 2]         lda #$7e
2a53 : 850c             [ 3]         sta zpt
2a55 :                       tinc    
                                     set_stat 0
                            >            load_flag 0
2a55 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2a57 : 48               [ 3]>            pha         ;use stack to load status
2a58 : 28               [ 4]>            plp
                             
2a59 : e60c             [ 5]         inc zpt
                                     tst_z rINC,fINC,0
2a5b : 08               [ 3]>            php         ;save flags
2a5c : a50c             [ 3]>            lda zpt
2a5e : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2a61 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2a63 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
AS65 Assembler for R6502 [1.42].                                     Page  180
---------------------------- test_functional.asm -----------------------------

2a64 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2a66 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2a69 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2a6b : e8               [ 2]         inx
2a6c : e002             [ 2]         cpx #2
2a6e : d0fe             [ 4]         bne tinc1
2a70 : a9fe             [ 2]         lda #$fe
2a72 : 850c             [ 3]         sta zpt
2a74 : e005             [ 2] tinc1   cpx #5
2a76 : d0dd             [ 3]         bne tinc
2a78 : ca               [ 2]         dex
2a79 : e60c             [ 5]         inc zpt
2a7b :                       tdec    
                                     set_stat 0
                            >            load_flag 0
2a7b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2a7d : 48               [ 3]>            pha         ;use stack to load status
2a7e : 28               [ 4]>            plp
                             
2a7f : c60c             [ 5]         dec zpt
                                     tst_z rINC,fINC,0
2a81 : 08               [ 3]>            php         ;save flags
2a82 : a50c             [ 3]>            lda zpt
2a84 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2a87 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2a89 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2a8a : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2a8c : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2a8f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2a91 : ca               [ 2]         dex
2a92 : 30fe             [ 4]         bmi tdec1
2a94 : e001             [ 2]         cpx #1
2a96 : d0e3             [ 3]         bne tdec
2a98 : a981             [ 2]         lda #$81
2a9a : 850c             [ 3]         sta zpt
2a9c : d0dd             [ 3]         bne tdec
2a9e :                       tdec1
2a9e : a200             [ 2]         ldx #0
2aa0 : a97e             [ 2]         lda #$7e
2aa2 : 850c             [ 3]         sta zpt
2aa4 :                       tinc10    
                                     set_stat $ff
                            >            load_flag $ff
2aa4 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2aa6 : 48               [ 3]>            pha         ;use stack to load status
2aa7 : 28               [ 4]>            plp
                             
2aa8 : e60c             [ 5]         inc zpt
                                     tst_z rINC,fINC,$ff-fnz
AS65 Assembler for R6502 [1.42].                                     Page  181
---------------------------- test_functional.asm -----------------------------

2aaa : 08               [ 3]>            php         ;save flags
2aab : a50c             [ 3]>            lda zpt
2aad : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2ab0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ab2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2ab3 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2ab5 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2ab8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2aba : e8               [ 2]         inx
2abb : e002             [ 2]         cpx #2
2abd : d0fe             [ 4]         bne tinc11
2abf : a9fe             [ 2]         lda #$fe
2ac1 : 850c             [ 3]         sta zpt
2ac3 : e005             [ 2] tinc11  cpx #5
2ac5 : d0dd             [ 3]         bne tinc10
2ac7 : ca               [ 2]         dex
2ac8 : e60c             [ 5]         inc zpt
2aca :                       tdec10    
                                     set_stat $ff
                            >            load_flag $ff
2aca : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2acc : 48               [ 3]>            pha         ;use stack to load status
2acd : 28               [ 4]>            plp
                             
2ace : c60c             [ 5]         dec zpt
                                     tst_z rINC,fINC,$ff-fnz
2ad0 : 08               [ 3]>            php         ;save flags
2ad1 : a50c             [ 3]>            lda zpt
2ad3 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2ad6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ad8 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2ad9 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2adb : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2ade : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2ae0 : ca               [ 2]         dex
2ae1 : 30fe             [ 4]         bmi tdec11
2ae3 : e001             [ 2]         cpx #1
2ae5 : d0e3             [ 3]         bne tdec10
2ae7 : a981             [ 2]         lda #$81
2ae9 : 850c             [ 3]         sta zpt
2aeb : d0dd             [ 3]         bne tdec10
2aed :                       tdec11
                                     next_test
2aed : ad0002           [ 4]>            lda test_case   ;previous test
2af0 : c922             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2af2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  182
---------------------------- test_functional.asm -----------------------------

                            >
0023 =                      >test_num = test_num + 1
2af4 : a923             [ 2]>            lda #test_num   ;*** next tests' numb
2af6 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; absolute memory
2af9 : a200             [ 2]         ldx #0
2afb : a97e             [ 2]         lda #$7e
2afd : 8d0302           [ 4]         sta abst
2b00 :                       tinc2    
                                     set_stat 0
                            >            load_flag 0
2b00 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2b02 : 48               [ 3]>            pha         ;use stack to load status
2b03 : 28               [ 4]>            plp
                             
2b04 : ee0302           [ 6]         inc abst
                                     tst_abs rINC,fINC,0
2b07 : 08               [ 3]>            php         ;save flags
2b08 : ad0302           [ 4]>            lda abst
2b0b : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2b0e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2b10 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2b11 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2b13 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2b16 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2b18 : e8               [ 2]         inx
2b19 : e002             [ 2]         cpx #2
2b1b : d0fe             [ 4]         bne tinc3
2b1d : a9fe             [ 2]         lda #$fe
2b1f : 8d0302           [ 4]         sta abst
2b22 : e005             [ 2] tinc3   cpx #5
2b24 : d0da             [ 3]         bne tinc2
2b26 : ca               [ 2]         dex
2b27 : ee0302           [ 6]         inc abst
2b2a :                       tdec2    
                                     set_stat 0
                            >            load_flag 0
2b2a : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2b2c : 48               [ 3]>            pha         ;use stack to load status
2b2d : 28               [ 4]>            plp
                             
2b2e : ce0302           [ 6]         dec abst
                                     tst_abs rINC,fINC,0
2b31 : 08               [ 3]>            php         ;save flags
2b32 : ad0302           [ 4]>            lda abst
2b35 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2b38 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2b3a : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  183
---------------------------- test_functional.asm -----------------------------

                            >            eor_flag 0
2b3b : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2b3d : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2b40 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2b42 : ca               [ 2]         dex
2b43 : 30fe             [ 4]         bmi tdec3
2b45 : e001             [ 2]         cpx #1
2b47 : d0e1             [ 3]         bne tdec2
2b49 : a981             [ 2]         lda #$81
2b4b : 8d0302           [ 4]         sta abst
2b4e : d0da             [ 3]         bne tdec2
2b50 :                       tdec3
2b50 : a200             [ 2]         ldx #0
2b52 : a97e             [ 2]         lda #$7e
2b54 : 8d0302           [ 4]         sta abst
2b57 :                       tinc12    
                                     set_stat $ff
                            >            load_flag $ff
2b57 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2b59 : 48               [ 3]>            pha         ;use stack to load status
2b5a : 28               [ 4]>            plp
                             
2b5b : ee0302           [ 6]         inc abst
                                     tst_abs rINC,fINC,$ff-fnz
2b5e : 08               [ 3]>            php         ;save flags
2b5f : ad0302           [ 4]>            lda abst
2b62 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2b65 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2b67 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2b68 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2b6a : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2b6d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2b6f : e8               [ 2]         inx
2b70 : e002             [ 2]         cpx #2
2b72 : d0fe             [ 4]         bne tinc13
2b74 : a9fe             [ 2]         lda #$fe
2b76 : 8d0302           [ 4]         sta abst
2b79 : e005             [ 2] tinc13   cpx #5
2b7b : d0da             [ 3]         bne tinc12
2b7d : ca               [ 2]         dex
2b7e : ee0302           [ 6]         inc abst
2b81 :                       tdec12    
                                     set_stat $ff
                            >            load_flag $ff
2b81 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2b83 : 48               [ 3]>            pha         ;use stack to load status
2b84 : 28               [ 4]>            plp
                             
2b85 : ce0302           [ 6]         dec abst
AS65 Assembler for R6502 [1.42].                                     Page  184
---------------------------- test_functional.asm -----------------------------

                                     tst_abs rINC,fINC,$ff-fnz
2b88 : 08               [ 3]>            php         ;save flags
2b89 : ad0302           [ 4]>            lda abst
2b8c : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2b8f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2b91 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2b92 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2b94 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2b97 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2b99 : ca               [ 2]         dex
2b9a : 30fe             [ 4]         bmi tdec13
2b9c : e001             [ 2]         cpx #1
2b9e : d0e1             [ 3]         bne tdec12
2ba0 : a981             [ 2]         lda #$81
2ba2 : 8d0302           [ 4]         sta abst
2ba5 : d0da             [ 3]         bne tdec12
2ba7 :                       tdec13
                                     next_test
2ba7 : ad0002           [ 4]>            lda test_case   ;previous test
2baa : c923             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2bac : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0024 =                      >test_num = test_num + 1
2bae : a924             [ 2]>            lda #test_num   ;*** next tests' numb
2bb0 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; zeropage indexed
2bb3 : a200             [ 2]         ldx #0
2bb5 : a97e             [ 2]         lda #$7e
2bb7 : 950c             [ 4] tinc4   sta zpt,x
                                     set_stat 0
                            >            load_flag 0
2bb9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2bbb : 48               [ 3]>            pha         ;use stack to load status
2bbc : 28               [ 4]>            plp
                             
2bbd : f60c             [ 6]         inc zpt,x
                                     tst_zx rINC,fINC,0
2bbf : 08               [ 3]>            php         ;save flags
2bc0 : b50c             [ 4]>            lda zpt,x
2bc2 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2bc5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2bc7 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2bc8 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2bca : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2bcd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  185
---------------------------- test_functional.asm -----------------------------

                            >
                             
2bcf : b50c             [ 4]         lda zpt,x
2bd1 : e8               [ 2]         inx
2bd2 : e002             [ 2]         cpx #2
2bd4 : d0fe             [ 4]         bne tinc5
2bd6 : a9fe             [ 2]         lda #$fe
2bd8 : e005             [ 2] tinc5   cpx #5
2bda : d0db             [ 3]         bne tinc4
2bdc : ca               [ 2]         dex
2bdd : a902             [ 2]         lda #2
2bdf : 950c             [ 4] tdec4   sta zpt,x 
                                     set_stat 0
                            >            load_flag 0
2be1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2be3 : 48               [ 3]>            pha         ;use stack to load status
2be4 : 28               [ 4]>            plp
                             
2be5 : d60c             [ 6]         dec zpt,x
                                     tst_zx rINC,fINC,0
2be7 : 08               [ 3]>            php         ;save flags
2be8 : b50c             [ 4]>            lda zpt,x
2bea : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2bed : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2bef : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2bf0 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2bf2 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2bf5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2bf7 : b50c             [ 4]         lda zpt,x
2bf9 : ca               [ 2]         dex
2bfa : 30fe             [ 4]         bmi tdec5
2bfc : e001             [ 2]         cpx #1
2bfe : d0df             [ 3]         bne tdec4
2c00 : a981             [ 2]         lda #$81
2c02 : d0db             [ 4]         bne tdec4
2c04 :                       tdec5
2c04 : a200             [ 2]         ldx #0
2c06 : a97e             [ 2]         lda #$7e
2c08 : 950c             [ 4] tinc14  sta zpt,x
                                     set_stat $ff
                            >            load_flag $ff
2c0a : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2c0c : 48               [ 3]>            pha         ;use stack to load status
2c0d : 28               [ 4]>            plp
                             
2c0e : f60c             [ 6]         inc zpt,x
                                     tst_zx rINC,fINC,$ff-fnz
2c10 : 08               [ 3]>            php         ;save flags
2c11 : b50c             [ 4]>            lda zpt,x
2c13 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2c16 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  186
---------------------------- test_functional.asm -----------------------------

2c18 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2c19 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2c1b : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2c1e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2c20 : b50c             [ 4]         lda zpt,x
2c22 : e8               [ 2]         inx
2c23 : e002             [ 2]         cpx #2
2c25 : d0fe             [ 4]         bne tinc15
2c27 : a9fe             [ 2]         lda #$fe
2c29 : e005             [ 2] tinc15  cpx #5
2c2b : d0db             [ 3]         bne tinc14
2c2d : ca               [ 2]         dex
2c2e : a902             [ 2]         lda #2
2c30 : 950c             [ 4] tdec14  sta zpt,x 
                                     set_stat $ff
                            >            load_flag $ff
2c32 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2c34 : 48               [ 3]>            pha         ;use stack to load status
2c35 : 28               [ 4]>            plp
                             
2c36 : d60c             [ 6]         dec zpt,x
                                     tst_zx rINC,fINC,$ff-fnz
2c38 : 08               [ 3]>            php         ;save flags
2c39 : b50c             [ 4]>            lda zpt,x
2c3b : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2c3e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2c40 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2c41 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2c43 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2c46 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2c48 : b50c             [ 4]         lda zpt,x
2c4a : ca               [ 2]         dex
2c4b : 30fe             [ 4]         bmi tdec15
2c4d : e001             [ 2]         cpx #1
2c4f : d0df             [ 3]         bne tdec14
2c51 : a981             [ 2]         lda #$81
2c53 : d0db             [ 3]         bne tdec14
2c55 :                       tdec15
                                     next_test
2c55 : ad0002           [ 4]>            lda test_case   ;previous test
2c58 : c924             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2c5a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0025 =                      >test_num = test_num + 1
2c5c : a925             [ 2]>            lda #test_num   ;*** next tests' numb
2c5e : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
AS65 Assembler for R6502 [1.42].                                     Page  187
---------------------------- test_functional.asm -----------------------------

                             
                             ; memory indexed
2c61 : a200             [ 2]         ldx #0
2c63 : a97e             [ 2]         lda #$7e
2c65 : 9d0302           [ 5] tinc6   sta abst,x
                                     set_stat 0
                            >            load_flag 0
2c68 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2c6a : 48               [ 3]>            pha         ;use stack to load status
2c6b : 28               [ 4]>            plp
                             
2c6c : fe0302           [ 7]         inc abst,x
                                     tst_absx rINC,fINC,0
2c6f : 08               [ 3]>            php         ;save flags
2c70 : bd0302           [ 4]>            lda abst,x
2c73 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2c76 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2c78 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2c79 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2c7b : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2c7e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2c80 : bd0302           [ 4]         lda abst,x
2c83 : e8               [ 2]         inx
2c84 : e002             [ 2]         cpx #2
2c86 : d0fe             [ 4]         bne tinc7
2c88 : a9fe             [ 2]         lda #$fe
2c8a : e005             [ 2] tinc7   cpx #5
2c8c : d0d7             [ 3]         bne tinc6
2c8e : ca               [ 2]         dex
2c8f : a902             [ 2]         lda #2
2c91 : 9d0302           [ 5] tdec6   sta abst,x 
                                     set_stat 0
                            >            load_flag 0
2c94 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2c96 : 48               [ 3]>            pha         ;use stack to load status
2c97 : 28               [ 4]>            plp
                             
2c98 : de0302           [ 7]         dec abst,x
                                     tst_absx rINC,fINC,0
2c9b : 08               [ 3]>            php         ;save flags
2c9c : bd0302           [ 4]>            lda abst,x
2c9f : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2ca2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ca4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2ca5 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2ca7 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2caa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  188
---------------------------- test_functional.asm -----------------------------

                             
2cac : bd0302           [ 4]         lda abst,x
2caf : ca               [ 2]         dex
2cb0 : 30fe             [ 4]         bmi tdec7
2cb2 : e001             [ 2]         cpx #1
2cb4 : d0db             [ 3]         bne tdec6
2cb6 : a981             [ 2]         lda #$81
2cb8 : d0d7             [ 3]         bne tdec6
2cba :                       tdec7
2cba : a200             [ 2]         ldx #0
2cbc : a97e             [ 2]         lda #$7e
2cbe : 9d0302           [ 5] tinc16  sta abst,x
                                     set_stat $ff
                            >            load_flag $ff
2cc1 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2cc3 : 48               [ 3]>            pha         ;use stack to load status
2cc4 : 28               [ 4]>            plp
                             
2cc5 : fe0302           [ 7]         inc abst,x
                                     tst_absx rINC,fINC,$ff-fnz
2cc8 : 08               [ 3]>            php         ;save flags
2cc9 : bd0302           [ 4]>            lda abst,x
2ccc : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2ccf : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2cd1 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2cd2 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2cd4 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2cd7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2cd9 : bd0302           [ 4]         lda abst,x
2cdc : e8               [ 2]         inx
2cdd : e002             [ 2]         cpx #2
2cdf : d0fe             [ 4]         bne tinc17
2ce1 : a9fe             [ 2]         lda #$fe
2ce3 : e005             [ 2] tinc17  cpx #5
2ce5 : d0d7             [ 3]         bne tinc16
2ce7 : ca               [ 2]         dex
2ce8 : a902             [ 2]         lda #2
2cea : 9d0302           [ 5] tdec16  sta abst,x 
                                     set_stat $ff
                            >            load_flag $ff
2ced : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2cef : 48               [ 3]>            pha         ;use stack to load status
2cf0 : 28               [ 4]>            plp
                             
2cf1 : de0302           [ 7]         dec abst,x
                                     tst_absx rINC,fINC,$ff-fnz
2cf4 : 08               [ 3]>            php         ;save flags
2cf5 : bd0302           [ 4]>            lda abst,x
2cf8 : dd5102           [ 4]>            cmp rINC,x    ;test result
                            >            trap_ne
2cfb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2cfd : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  189
---------------------------- test_functional.asm -----------------------------

                            >            eor_flag $ff-fnz
2cfe : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2d00 : dd5602           [ 4]>            cmp fINC,x    ;test flags
                            >            trap_ne
2d03 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2d05 : bd0302           [ 4]         lda abst,x
2d08 : ca               [ 2]         dex
2d09 : 30fe             [ 4]         bmi tdec17
2d0b : e001             [ 2]         cpx #1
2d0d : d0db             [ 4]         bne tdec16
2d0f : a981             [ 2]         lda #$81
2d11 : d0d7             [ 4]         bne tdec16
2d13 :                       tdec17
                                     next_test
2d13 : ad0002           [ 4]>            lda test_case   ;previous test
2d16 : c925             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2d18 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0026 =                      >test_num = test_num + 1
2d1a : a926             [ 2]>            lda #test_num   ;*** next tests' numb
2d1c : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; testing logical instructions - AND EOR ORA all 
                             ; AND
2d1f : a203             [ 2]         ldx #3          ;immediate
2d21 : b51e             [ 4] tand    lda zpAN,x
2d23 : 8d0a02           [ 4]         sta ex_andi+1   ;set AND # operand
                                     set_ax  absANa,0
                            >            load_flag 0
2d26 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2d28 : 48               [ 3]>            pha         ;use stack to load status
2d29 : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2d2c : 28               [ 4]>            plp
                             
2d2d : 200902           [ 6]         jsr ex_andi     ;execute AND # in RAM
                                     tst_ax  absrlo,absflo,0
2d30 : 08               [ 3]>            php         ;save flags
2d31 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2d34 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2d36 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2d37 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2d39 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2d3c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2d3e : ca               [ 2]         dex
2d3f : 10e0             [ 3]         bpl tand
2d41 : a203             [ 2]         ldx #3
2d43 : b51e             [ 4] tand1   lda zpAN,x
2d45 : 8d0a02           [ 4]         sta ex_andi+1   ;set AND # operand
AS65 Assembler for R6502 [1.42].                                     Page  190
---------------------------- test_functional.asm -----------------------------

                                     set_ax  absANa,$ff
                            >            load_flag $ff
2d48 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2d4a : 48               [ 3]>            pha         ;use stack to load status
2d4b : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2d4e : 28               [ 4]>            plp
                             
2d4f : 200902           [ 6]         jsr ex_andi     ;execute AND # in RAM
                                     tst_ax  absrlo,absflo,$ff-fnz
2d52 : 08               [ 3]>            php         ;save flags
2d53 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2d56 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2d58 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2d59 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2d5b : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2d5e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2d60 : ca               [ 2]         dex
2d61 : 10e0             [ 3]         bpl tand1
                                 
2d63 : a203             [ 2]         ldx #3      ;zp
2d65 : b51e             [ 4] tand2   lda zpAN,x
2d67 : 850c             [ 3]         sta zpt
                                     set_ax  absANa,0
                            >            load_flag 0
2d69 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2d6b : 48               [ 3]>            pha         ;use stack to load status
2d6c : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2d6f : 28               [ 4]>            plp
                             
2d70 : 250c             [ 3]         and zpt
                                     tst_ax  absrlo,absflo,0
2d72 : 08               [ 3]>            php         ;save flags
2d73 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2d76 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2d78 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2d79 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2d7b : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2d7e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2d80 : ca               [ 2]         dex
2d81 : 10e2             [ 3]         bpl tand2
2d83 : a203             [ 2]         ldx #3
2d85 : b51e             [ 4] tand3   lda zpAN,x
2d87 : 850c             [ 3]         sta zpt
                                     set_ax  absANa,$ff
                            >            load_flag $ff
2d89 : a9ff             [ 2]>            lda #$ff             ;allow test to c
AS65 Assembler for R6502 [1.42].                                     Page  191
---------------------------- test_functional.asm -----------------------------

                            >
2d8b : 48               [ 3]>            pha         ;use stack to load status
2d8c : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2d8f : 28               [ 4]>            plp
                             
2d90 : 250c             [ 3]         and zpt
                                     tst_ax  absrlo,absflo,$ff-fnz
2d92 : 08               [ 3]>            php         ;save flags
2d93 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2d96 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2d98 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2d99 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2d9b : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2d9e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2da0 : ca               [ 2]         dex
2da1 : 10e2             [ 3]         bpl tand3
                             
2da3 : a203             [ 2]         ldx #3      ;abs
2da5 : b51e             [ 4] tand4   lda zpAN,x
2da7 : 8d0302           [ 4]         sta abst
                                     set_ax  absANa,0
                            >            load_flag 0
2daa : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2dac : 48               [ 3]>            pha         ;use stack to load status
2dad : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2db0 : 28               [ 4]>            plp
                             
2db1 : 2d0302           [ 4]         and abst
                                     tst_ax  absrlo,absflo,0
2db4 : 08               [ 3]>            php         ;save flags
2db5 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2db8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2dba : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2dbb : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2dbd : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2dc0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2dc2 : ca               [ 2]         dex
2dc3 : 10e0             [ 3]         bpl tand4
2dc5 : a203             [ 2]         ldx #3
2dc7 : b51e             [ 4] tand5   lda zpAN,x
2dc9 : 8d0302           [ 4]         sta abst
                                     set_ax  absANa,$ff
                            >            load_flag $ff
2dcc : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2dce : 48               [ 3]>            pha         ;use stack to load status
2dcf : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
AS65 Assembler for R6502 [1.42].                                     Page  192
---------------------------- test_functional.asm -----------------------------

2dd2 : 28               [ 4]>            plp
                             
2dd3 : 2d0302           [ 4]         and abst
                                     tst_ax  absrlo,absflo,$ff-fnz
2dd6 : 08               [ 3]>            php         ;save flags
2dd7 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2dda : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ddc : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2ddd : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2ddf : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2de2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2de4 : ca               [ 2]         dex
2de5 : 10fe             [ 4]         bpl tand6
                             
2de7 : a203             [ 2]         ldx #3      ;zp,x
2de9 :                       tand6
                                     set_ax  absANa,0
                            >            load_flag 0
2de9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2deb : 48               [ 3]>            pha         ;use stack to load status
2dec : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2def : 28               [ 4]>            plp
                             
2df0 : 351e             [ 4]         and zpAN,x
                                     tst_ax  absrlo,absflo,0
2df2 : 08               [ 3]>            php         ;save flags
2df3 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2df6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2df8 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2df9 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2dfb : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2dfe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2e00 : ca               [ 2]         dex
2e01 : 10e6             [ 4]         bpl tand6
2e03 : a203             [ 2]         ldx #3
2e05 :                       tand7
                                     set_ax  absANa,$ff
                            >            load_flag $ff
2e05 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2e07 : 48               [ 3]>            pha         ;use stack to load status
2e08 : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2e0b : 28               [ 4]>            plp
                             
2e0c : 351e             [ 4]         and zpAN,x
                                     tst_ax  absrlo,absflo,$ff-fnz
2e0e : 08               [ 3]>            php         ;save flags
AS65 Assembler for R6502 [1.42].                                     Page  193
---------------------------- test_functional.asm -----------------------------

2e0f : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2e12 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2e14 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2e15 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2e17 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2e1a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2e1c : ca               [ 2]         dex
2e1d : 10e6             [ 3]         bpl tand7
                             
2e1f : a203             [ 2]         ldx #3      ;abs,x
2e21 :                       tand8
                                     set_ax  absANa,0
                            >            load_flag 0
2e21 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2e23 : 48               [ 3]>            pha         ;use stack to load status
2e24 : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2e27 : 28               [ 4]>            plp
                             
2e28 : 3d5f02           [ 4]         and absAN,x
                                     tst_ax  absrlo,absflo,0
2e2b : 08               [ 3]>            php         ;save flags
2e2c : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2e2f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2e31 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2e32 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2e34 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2e37 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2e39 : ca               [ 2]         dex
2e3a : 10e5             [ 3]         bpl tand8
2e3c : a203             [ 2]         ldx #3
2e3e :                       tand9
                                     set_ax  absANa,$ff
                            >            load_flag $ff
2e3e : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2e40 : 48               [ 3]>            pha         ;use stack to load status
2e41 : bd6b02           [ 4]>            lda absANa,x    ;precharge accu
2e44 : 28               [ 4]>            plp
                             
2e45 : 3d5f02           [ 4]         and absAN,x
                                     tst_ax  absrlo,absflo,$ff-fnz
2e48 : 08               [ 3]>            php         ;save flags
2e49 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2e4c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2e4e : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  194
---------------------------- test_functional.asm -----------------------------

                            >            eor_flag $ff-fnz
2e4f : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2e51 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2e54 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2e56 : ca               [ 2]         dex
2e57 : 10e5             [ 3]         bpl tand9
                             
2e59 : a003             [ 2]         ldy #3      ;abs,y
2e5b :                       tand10
                                     set_ay  absANa,0
                            >            load_flag 0
2e5b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2e5d : 48               [ 3]>            pha         ;use stack to load status
2e5e : b96b02           [ 4]>            lda absANa,y    ;precharge accu
2e61 : 28               [ 4]>            plp
                             
2e62 : 395f02           [ 4]         and absAN,y
                                     tst_ay  absrlo,absflo,0
2e65 : 08               [ 3]>            php         ;save flags
2e66 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
2e69 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2e6b : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2e6c : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2e6e : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
2e71 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2e73 : 88               [ 2]         dey
2e74 : 10e5             [ 3]         bpl tand10
2e76 : a003             [ 2]         ldy #3
2e78 :                       tand11
                                     set_ay  absANa,$ff
                            >            load_flag $ff
2e78 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2e7a : 48               [ 3]>            pha         ;use stack to load status
2e7b : b96b02           [ 4]>            lda absANa,y    ;precharge accu
2e7e : 28               [ 4]>            plp
                             
2e7f : 395f02           [ 4]         and absAN,y
                                     tst_ay  absrlo,absflo,$ff-fnz
2e82 : 08               [ 3]>            php         ;save flags
2e83 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
2e86 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2e88 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2e89 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2e8b : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
AS65 Assembler for R6502 [1.42].                                     Page  195
---------------------------- test_functional.asm -----------------------------

2e8e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2e90 : 88               [ 2]         dey
2e91 : 10e5             [ 3]         bpl tand11
                             
2e93 : a206             [ 2]         ldx #6      ;(zp,x)
2e95 : a003             [ 2]         ldy #3
2e97 :                       tand12
                                     set_ay  absANa,0
                            >            load_flag 0
2e97 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2e99 : 48               [ 3]>            pha         ;use stack to load status
2e9a : b96b02           [ 4]>            lda absANa,y    ;precharge accu
2e9d : 28               [ 4]>            plp
                             
2e9e : 213c             [ 6]         and (indAN,x)
                                     tst_ay  absrlo,absflo,0
2ea0 : 08               [ 3]>            php         ;save flags
2ea1 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
2ea4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ea6 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2ea7 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2ea9 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
2eac : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2eae : ca               [ 2]         dex
2eaf : ca               [ 2]         dex
2eb0 : 88               [ 2]         dey
2eb1 : 10e4             [ 3]         bpl tand12
2eb3 : a206             [ 2]         ldx #6
2eb5 : a003             [ 2]         ldy #3
2eb7 :                       tand13
                                     set_ay  absANa,$ff
                            >            load_flag $ff
2eb7 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2eb9 : 48               [ 3]>            pha         ;use stack to load status
2eba : b96b02           [ 4]>            lda absANa,y    ;precharge accu
2ebd : 28               [ 4]>            plp
                             
2ebe : 213c             [ 6]         and (indAN,x)
                                     tst_ay  absrlo,absflo,$ff-fnz
2ec0 : 08               [ 3]>            php         ;save flags
2ec1 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
2ec4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ec6 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2ec7 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2ec9 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
2ecc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  196
---------------------------- test_functional.asm -----------------------------

                            >
                             
2ece : ca               [ 2]         dex
2ecf : ca               [ 2]         dex
2ed0 : 88               [ 2]         dey
2ed1 : 10e4             [ 3]         bpl tand13
                             
2ed3 : a003             [ 2]         ldy #3      ;(zp),y
2ed5 :                       tand14
                                     set_ay  absANa,0
                            >            load_flag 0
2ed5 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2ed7 : 48               [ 3]>            pha         ;use stack to load status
2ed8 : b96b02           [ 4]>            lda absANa,y    ;precharge accu
2edb : 28               [ 4]>            plp
                             
2edc : 313c             [ 5]         and (indAN),y
                                     tst_ay  absrlo,absflo,0
2ede : 08               [ 3]>            php         ;save flags
2edf : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
2ee2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ee4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2ee5 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2ee7 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
2eea : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2eec : 88               [ 2]         dey
2eed : 10e6             [ 3]         bpl tand14
2eef : a003             [ 2]         ldy #3
2ef1 :                       tand15
                                     set_ay  absANa,$ff
                            >            load_flag $ff
2ef1 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2ef3 : 48               [ 3]>            pha         ;use stack to load status
2ef4 : b96b02           [ 4]>            lda absANa,y    ;precharge accu
2ef7 : 28               [ 4]>            plp
                             
2ef8 : 313c             [ 5]         and (indAN),y
                                     tst_ay  absrlo,absflo,$ff-fnz
2efa : 08               [ 3]>            php         ;save flags
2efb : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
2efe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2f00 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2f01 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2f03 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
2f06 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2f08 : 88               [ 2]         dey
AS65 Assembler for R6502 [1.42].                                     Page  197
---------------------------- test_functional.asm -----------------------------

2f09 : 10e6             [ 4]         bpl tand15
                                     next_test
2f0b : ad0002           [ 4]>            lda test_case   ;previous test
2f0e : c926             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
2f10 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0027 =                      >test_num = test_num + 1
2f12 : a927             [ 2]>            lda #test_num   ;*** next tests' numb
2f14 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; EOR
2f17 : a203             [ 2]         ldx #3          ;immediate - self modifyi
2f19 : b522             [ 4] teor    lda zpEO,x
2f1b : 8d0d02           [ 4]         sta ex_eori+1   ;set EOR # operand
                                     set_ax  absEOa,0
                            >            load_flag 0
2f1e : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2f20 : 48               [ 3]>            pha         ;use stack to load status
2f21 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2f24 : 28               [ 4]>            plp
                             
2f25 : 200c02           [ 6]         jsr ex_eori     ;execute EOR # in RAM
                                     tst_ax  absrlo,absflo,0
2f28 : 08               [ 3]>            php         ;save flags
2f29 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2f2c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2f2e : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2f2f : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2f31 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2f34 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2f36 : ca               [ 2]         dex
2f37 : 10e0             [ 3]         bpl teor
2f39 : a203             [ 2]         ldx #3
2f3b : b522             [ 4] teor1   lda zpEO,x
2f3d : 8d0d02           [ 4]         sta ex_eori+1   ;set EOR # operand
                                     set_ax  absEOa,$ff
                            >            load_flag $ff
2f40 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2f42 : 48               [ 3]>            pha         ;use stack to load status
2f43 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2f46 : 28               [ 4]>            plp
                             
2f47 : 200c02           [ 6]         jsr ex_eori     ;execute EOR # in RAM
                                     tst_ax  absrlo,absflo,$ff-fnz
2f4a : 08               [ 3]>            php         ;save flags
2f4b : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2f4e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2f50 : 68               [ 4]>            pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page  198
---------------------------- test_functional.asm -----------------------------

                            >            eor_flag $ff-fnz
2f51 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2f53 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2f56 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2f58 : ca               [ 2]         dex
2f59 : 10e0             [ 3]         bpl teor1
                                 
2f5b : a203             [ 2]         ldx #3      ;zp
2f5d : b522             [ 4] teor2    lda zpEO,x
2f5f : 850c             [ 3]         sta zpt
                                     set_ax  absEOa,0
                            >            load_flag 0
2f61 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2f63 : 48               [ 3]>            pha         ;use stack to load status
2f64 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2f67 : 28               [ 4]>            plp
                             
2f68 : 450c             [ 3]         eor zpt
                                     tst_ax  absrlo,absflo,0
2f6a : 08               [ 3]>            php         ;save flags
2f6b : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2f6e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2f70 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2f71 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2f73 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2f76 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2f78 : ca               [ 2]         dex
2f79 : 10e2             [ 3]         bpl teor2
2f7b : a203             [ 2]         ldx #3
2f7d : b522             [ 4] teor3   lda zpEO,x
2f7f : 850c             [ 3]         sta zpt
                                     set_ax  absEOa,$ff
                            >            load_flag $ff
2f81 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2f83 : 48               [ 3]>            pha         ;use stack to load status
2f84 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2f87 : 28               [ 4]>            plp
                             
2f88 : 450c             [ 3]         eor zpt
                                     tst_ax  absrlo,absflo,$ff-fnz
2f8a : 08               [ 3]>            php         ;save flags
2f8b : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2f8e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2f90 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2f91 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
AS65 Assembler for R6502 [1.42].                                     Page  199
---------------------------- test_functional.asm -----------------------------

2f93 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2f96 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2f98 : ca               [ 2]         dex
2f99 : 10e2             [ 3]         bpl teor3
                             
2f9b : a203             [ 2]         ldx #3      ;abs
2f9d : b522             [ 4] teor4   lda zpEO,x
2f9f : 8d0302           [ 4]         sta abst
                                     set_ax  absEOa,0
                            >            load_flag 0
2fa2 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2fa4 : 48               [ 3]>            pha         ;use stack to load status
2fa5 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2fa8 : 28               [ 4]>            plp
                             
2fa9 : 4d0302           [ 4]         eor abst
                                     tst_ax  absrlo,absflo,0
2fac : 08               [ 3]>            php         ;save flags
2fad : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2fb0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2fb2 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2fb3 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2fb5 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2fb8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2fba : ca               [ 2]         dex
2fbb : 10e0             [ 3]         bpl teor4
2fbd : a203             [ 2]         ldx #3
2fbf : b522             [ 4] teor5   lda zpEO,x
2fc1 : 8d0302           [ 4]         sta abst
                                     set_ax  absEOa,$ff
                            >            load_flag $ff
2fc4 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2fc6 : 48               [ 3]>            pha         ;use stack to load status
2fc7 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2fca : 28               [ 4]>            plp
                             
2fcb : 4d0302           [ 4]         eor abst
                                     tst_ax  absrlo,absflo,$ff-fnz
2fce : 08               [ 3]>            php         ;save flags
2fcf : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2fd2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2fd4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
2fd5 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
2fd7 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2fda : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  200
---------------------------- test_functional.asm -----------------------------

                            >
                             
2fdc : ca               [ 2]         dex
2fdd : 10fe             [ 4]         bpl teor6
                             
2fdf : a203             [ 2]         ldx #3      ;zp,x
2fe1 :                       teor6
                                     set_ax  absEOa,0
                            >            load_flag 0
2fe1 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
2fe3 : 48               [ 3]>            pha         ;use stack to load status
2fe4 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
2fe7 : 28               [ 4]>            plp
                             
2fe8 : 5522             [ 4]         eor zpEO,x
                                     tst_ax  absrlo,absflo,0
2fea : 08               [ 3]>            php         ;save flags
2feb : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
2fee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
2ff0 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
2ff1 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
2ff3 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
2ff6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
2ff8 : ca               [ 2]         dex
2ff9 : 10e6             [ 3]         bpl teor6
2ffb : a203             [ 2]         ldx #3
2ffd :                       teor7
                                     set_ax  absEOa,$ff
                            >            load_flag $ff
2ffd : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
2fff : 48               [ 3]>            pha         ;use stack to load status
3000 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
3003 : 28               [ 4]>            plp
                             
3004 : 5522             [ 4]         eor zpEO,x
                                     tst_ax  absrlo,absflo,$ff-fnz
3006 : 08               [ 3]>            php         ;save flags
3007 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
300a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
300c : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
300d : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
300f : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
3012 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3014 : ca               [ 2]         dex
3015 : 10e6             [ 4]         bpl teor7
                             
AS65 Assembler for R6502 [1.42].                                     Page  201
---------------------------- test_functional.asm -----------------------------

3017 : a203             [ 2]         ldx #3      ;abs,x
3019 :                       teor8
                                     set_ax  absEOa,0
                            >            load_flag 0
3019 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
301b : 48               [ 3]>            pha         ;use stack to load status
301c : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
301f : 28               [ 4]>            plp
                             
3020 : 5d6302           [ 4]         eor absEO,x
                                     tst_ax  absrlo,absflo,0
3023 : 08               [ 3]>            php         ;save flags
3024 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3027 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3029 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
302a : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
302c : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
302f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3031 : ca               [ 2]         dex
3032 : 10e5             [ 3]         bpl teor8
3034 : a203             [ 2]         ldx #3
3036 :                       teor9
                                     set_ax  absEOa,$ff
                            >            load_flag $ff
3036 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
3038 : 48               [ 3]>            pha         ;use stack to load status
3039 : bd6f02           [ 4]>            lda absEOa,x    ;precharge accu
303c : 28               [ 4]>            plp
                             
303d : 5d6302           [ 4]         eor absEO,x
                                     tst_ax  absrlo,absflo,$ff-fnz
3040 : 08               [ 3]>            php         ;save flags
3041 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3044 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3046 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
3047 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
3049 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
304c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
304e : ca               [ 2]         dex
304f : 10e5             [ 3]         bpl teor9
                             
3051 : a003             [ 2]         ldy #3      ;abs,y
3053 :                       teor10
                                     set_ay  absEOa,0
                            >            load_flag 0
3053 : a900             [ 2]>            lda #0             ;allow test to cha
AS65 Assembler for R6502 [1.42].                                     Page  202
---------------------------- test_functional.asm -----------------------------

                            >
3055 : 48               [ 3]>            pha         ;use stack to load status
3056 : b96f02           [ 4]>            lda absEOa,y    ;precharge accu
3059 : 28               [ 4]>            plp
                             
305a : 596302           [ 4]         eor absEO,y
                                     tst_ay  absrlo,absflo,0
305d : 08               [ 3]>            php         ;save flags
305e : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
3061 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3063 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
3064 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
3066 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
3069 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
306b : 88               [ 2]         dey
306c : 10e5             [ 3]         bpl teor10
306e : a003             [ 2]         ldy #3
3070 :                       teor11
                                     set_ay  absEOa,$ff
                            >            load_flag $ff
3070 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
3072 : 48               [ 3]>            pha         ;use stack to load status
3073 : b96f02           [ 4]>            lda absEOa,y    ;precharge accu
3076 : 28               [ 4]>            plp
                             
3077 : 596302           [ 4]         eor absEO,y
                                     tst_ay  absrlo,absflo,$ff-fnz
307a : 08               [ 3]>            php         ;save flags
307b : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
307e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3080 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
3081 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
3083 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
3086 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3088 : 88               [ 2]         dey
3089 : 10e5             [ 3]         bpl teor11
                             
308b : a206             [ 2]         ldx #6      ;(zp,x)
308d : a003             [ 2]         ldy #3
308f :                       teor12
                                     set_ay  absEOa,0
                            >            load_flag 0
308f : a900             [ 2]>            lda #0             ;allow test to cha
                            >
3091 : 48               [ 3]>            pha         ;use stack to load status
3092 : b96f02           [ 4]>            lda absEOa,y    ;precharge accu
3095 : 28               [ 4]>            plp
AS65 Assembler for R6502 [1.42].                                     Page  203
---------------------------- test_functional.asm -----------------------------

                             
3096 : 4144             [ 6]         eor (indEO,x)
                                     tst_ay  absrlo,absflo,0
3098 : 08               [ 3]>            php         ;save flags
3099 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
309c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
309e : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
309f : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
30a1 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
30a4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
30a6 : ca               [ 2]         dex
30a7 : ca               [ 2]         dex
30a8 : 88               [ 2]         dey
30a9 : 10e4             [ 3]         bpl teor12
30ab : a206             [ 2]         ldx #6
30ad : a003             [ 2]         ldy #3
30af :                       teor13
                                     set_ay  absEOa,$ff
                            >            load_flag $ff
30af : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
30b1 : 48               [ 3]>            pha         ;use stack to load status
30b2 : b96f02           [ 4]>            lda absEOa,y    ;precharge accu
30b5 : 28               [ 4]>            plp
                             
30b6 : 4144             [ 6]         eor (indEO,x)
                                     tst_ay  absrlo,absflo,$ff-fnz
30b8 : 08               [ 3]>            php         ;save flags
30b9 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
30bc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
30be : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
30bf : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
30c1 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
30c4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
30c6 : ca               [ 2]         dex
30c7 : ca               [ 2]         dex
30c8 : 88               [ 2]         dey
30c9 : 10e4             [ 3]         bpl teor13
                             
30cb : a003             [ 2]         ldy #3      ;(zp),y
30cd :                       teor14
                                     set_ay  absEOa,0
                            >            load_flag 0
30cd : a900             [ 2]>            lda #0             ;allow test to cha
                            >
30cf : 48               [ 3]>            pha         ;use stack to load status
30d0 : b96f02           [ 4]>            lda absEOa,y    ;precharge accu
30d3 : 28               [ 4]>            plp
AS65 Assembler for R6502 [1.42].                                     Page  204
---------------------------- test_functional.asm -----------------------------

                             
30d4 : 5144             [ 5]         eor (indEO),y
                                     tst_ay  absrlo,absflo,0
30d6 : 08               [ 3]>            php         ;save flags
30d7 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
30da : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
30dc : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
30dd : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
30df : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
30e2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
30e4 : 88               [ 2]         dey
30e5 : 10e6             [ 3]         bpl teor14
30e7 : a003             [ 2]         ldy #3
30e9 :                       teor15
                                     set_ay  absEOa,$ff
                            >            load_flag $ff
30e9 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
30eb : 48               [ 3]>            pha         ;use stack to load status
30ec : b96f02           [ 4]>            lda absEOa,y    ;precharge accu
30ef : 28               [ 4]>            plp
                             
30f0 : 5144             [ 5]         eor (indEO),y
                                     tst_ay  absrlo,absflo,$ff-fnz
30f2 : 08               [ 3]>            php         ;save flags
30f3 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
30f6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
30f8 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
30f9 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
30fb : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
30fe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3100 : 88               [ 2]         dey
3101 : 10e6             [ 4]         bpl teor15
                                     next_test
3103 : ad0002           [ 4]>            lda test_case   ;previous test
3106 : c927             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
3108 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0028 =                      >test_num = test_num + 1
310a : a928             [ 2]>            lda #test_num   ;*** next tests' numb
310c : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; OR
310f : a203             [ 2]         ldx #3          ;immediate - self modifyi
3111 : b51a             [ 4] tora    lda zpOR,x
AS65 Assembler for R6502 [1.42].                                     Page  205
---------------------------- test_functional.asm -----------------------------

3113 : 8d1002           [ 4]         sta ex_orai+1   ;set ORA # operand
                                     set_ax  absORa,0
                            >            load_flag 0
3116 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
3118 : 48               [ 3]>            pha         ;use stack to load status
3119 : bd6702           [ 4]>            lda absORa,x    ;precharge accu
311c : 28               [ 4]>            plp
                             
311d : 200f02           [ 6]         jsr ex_orai     ;execute ORA # in RAM
                                     tst_ax  absrlo,absflo,0
3120 : 08               [ 3]>            php         ;save flags
3121 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3124 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3126 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
3127 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
3129 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
312c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
312e : ca               [ 2]         dex
312f : 10e0             [ 3]         bpl tora
3131 : a203             [ 2]         ldx #3
3133 : b51a             [ 4] tora1   lda zpOR,x
3135 : 8d1002           [ 4]         sta ex_orai+1   ;set ORA # operand
                                     set_ax  absORa,$ff
                            >            load_flag $ff
3138 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
313a : 48               [ 3]>            pha         ;use stack to load status
313b : bd6702           [ 4]>            lda absORa,x    ;precharge accu
313e : 28               [ 4]>            plp
                             
313f : 200f02           [ 6]         jsr ex_orai     ;execute ORA # in RAM
                                     tst_ax  absrlo,absflo,$ff-fnz
3142 : 08               [ 3]>            php         ;save flags
3143 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3146 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3148 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
3149 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
314b : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
314e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3150 : ca               [ 2]         dex
3151 : 10e0             [ 3]         bpl tora1
                                 
3153 : a203             [ 2]         ldx #3      ;zp
3155 : b51a             [ 4] tora2   lda zpOR,x
3157 : 850c             [ 3]         sta zpt
                                     set_ax  absORa,0
                            >            load_flag 0
AS65 Assembler for R6502 [1.42].                                     Page  206
---------------------------- test_functional.asm -----------------------------

3159 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
315b : 48               [ 3]>            pha         ;use stack to load status
315c : bd6702           [ 4]>            lda absORa,x    ;precharge accu
315f : 28               [ 4]>            plp
                             
3160 : 050c             [ 3]         ora zpt
                                     tst_ax  absrlo,absflo,0
3162 : 08               [ 3]>            php         ;save flags
3163 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3166 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3168 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
3169 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
316b : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
316e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3170 : ca               [ 2]         dex
3171 : 10e2             [ 3]         bpl tora2
3173 : a203             [ 2]         ldx #3
3175 : b51a             [ 4] tora3   lda zpOR,x
3177 : 850c             [ 3]         sta zpt
                                     set_ax  absORa,$ff
                            >            load_flag $ff
3179 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
317b : 48               [ 3]>            pha         ;use stack to load status
317c : bd6702           [ 4]>            lda absORa,x    ;precharge accu
317f : 28               [ 4]>            plp
                             
3180 : 050c             [ 3]         ora zpt
                                     tst_ax  absrlo,absflo,$ff-fnz
3182 : 08               [ 3]>            php         ;save flags
3183 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3186 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3188 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
3189 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
318b : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
318e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3190 : ca               [ 2]         dex
3191 : 10e2             [ 3]         bpl tora3
                             
3193 : a203             [ 2]         ldx #3      ;abs
3195 : b51a             [ 4] tora4   lda zpOR,x
3197 : 8d0302           [ 4]         sta abst
                                     set_ax  absORa,0
                            >            load_flag 0
319a : a900             [ 2]>            lda #0             ;allow test to cha
                            >
319c : 48               [ 3]>            pha         ;use stack to load status
AS65 Assembler for R6502 [1.42].                                     Page  207
---------------------------- test_functional.asm -----------------------------

319d : bd6702           [ 4]>            lda absORa,x    ;precharge accu
31a0 : 28               [ 4]>            plp
                             
31a1 : 0d0302           [ 4]         ora abst
                                     tst_ax  absrlo,absflo,0
31a4 : 08               [ 3]>            php         ;save flags
31a5 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
31a8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
31aa : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
31ab : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
31ad : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
31b0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
31b2 : ca               [ 2]         dex
31b3 : 10e0             [ 3]         bpl tora4
31b5 : a203             [ 2]         ldx #3
31b7 : b51a             [ 4] tora5   lda zpOR,x
31b9 : 8d0302           [ 4]         sta abst
                                     set_ax  absORa,$ff
                            >            load_flag $ff
31bc : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
31be : 48               [ 3]>            pha         ;use stack to load status
31bf : bd6702           [ 4]>            lda absORa,x    ;precharge accu
31c2 : 28               [ 4]>            plp
                             
31c3 : 0d0302           [ 4]         ora abst
                                     tst_ax  absrlo,absflo,$ff-fnz
31c6 : 08               [ 3]>            php         ;save flags
31c7 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
31ca : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
31cc : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
31cd : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
31cf : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
31d2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
31d4 : ca               [ 2]         dex
31d5 : 10fe             [ 4]         bpl tora6
                             
31d7 : a203             [ 2]         ldx #3      ;zp,x
31d9 :                       tora6
                                     set_ax  absORa,0
                            >            load_flag 0
31d9 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
31db : 48               [ 3]>            pha         ;use stack to load status
31dc : bd6702           [ 4]>            lda absORa,x    ;precharge accu
31df : 28               [ 4]>            plp
                             
31e0 : 151a             [ 4]         ora zpOR,x
AS65 Assembler for R6502 [1.42].                                     Page  208
---------------------------- test_functional.asm -----------------------------

                                     tst_ax  absrlo,absflo,0
31e2 : 08               [ 3]>            php         ;save flags
31e3 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
31e6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
31e8 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
31e9 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
31eb : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
31ee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
31f0 : ca               [ 2]         dex
31f1 : 10e6             [ 3]         bpl tora6
31f3 : a203             [ 2]         ldx #3
31f5 :                       tora7
                                     set_ax  absORa,$ff
                            >            load_flag $ff
31f5 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
31f7 : 48               [ 3]>            pha         ;use stack to load status
31f8 : bd6702           [ 4]>            lda absORa,x    ;precharge accu
31fb : 28               [ 4]>            plp
                             
31fc : 151a             [ 4]         ora zpOR,x
                                     tst_ax  absrlo,absflo,$ff-fnz
31fe : 08               [ 3]>            php         ;save flags
31ff : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
3202 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3204 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
3205 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
3207 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
320a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
320c : ca               [ 2]         dex
320d : 10e6             [ 4]         bpl tora7
                             
320f : a203             [ 2]         ldx #3      ;abs,x
3211 :                       tora8
                                     set_ax  absORa,0
                            >            load_flag 0
3211 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
3213 : 48               [ 3]>            pha         ;use stack to load status
3214 : bd6702           [ 4]>            lda absORa,x    ;precharge accu
3217 : 28               [ 4]>            plp
                             
3218 : 1d5b02           [ 4]         ora absOR,x
                                     tst_ax  absrlo,absflo,0
321b : 08               [ 3]>            php         ;save flags
321c : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
321f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  209
---------------------------- test_functional.asm -----------------------------

                            >
3221 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
3222 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
3224 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
3227 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3229 : ca               [ 2]         dex
322a : 10e5             [ 3]         bpl tora8
322c : a203             [ 2]         ldx #3
322e :                       tora9
                                     set_ax  absORa,$ff
                            >            load_flag $ff
322e : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
3230 : 48               [ 3]>            pha         ;use stack to load status
3231 : bd6702           [ 4]>            lda absORa,x    ;precharge accu
3234 : 28               [ 4]>            plp
                             
3235 : 1d5b02           [ 4]         ora absOR,x
                                     tst_ax  absrlo,absflo,$ff-fnz
3238 : 08               [ 3]>            php         ;save flags
3239 : dd7302           [ 4]>            cmp absrlo,x    ;test result
                            >            trap_ne
323c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
323e : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
323f : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
3241 : dd7702           [ 4]>            cmp absflo,x    ;test flags
                            >            trap_ne     ;
3244 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3246 : ca               [ 2]         dex
3247 : 10e5             [ 3]         bpl tora9
                             
3249 : a003             [ 2]         ldy #3      ;abs,y
324b :                       tora10
                                     set_ay  absORa,0
                            >            load_flag 0
324b : a900             [ 2]>            lda #0             ;allow test to cha
                            >
324d : 48               [ 3]>            pha         ;use stack to load status
324e : b96702           [ 4]>            lda absORa,y    ;precharge accu
3251 : 28               [ 4]>            plp
                             
3252 : 195b02           [ 4]         ora absOR,y
                                     tst_ay  absrlo,absflo,0
3255 : 08               [ 3]>            php         ;save flags
3256 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
3259 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
325b : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
325c : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
AS65 Assembler for R6502 [1.42].                                     Page  210
---------------------------- test_functional.asm -----------------------------

325e : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
3261 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3263 : 88               [ 2]         dey
3264 : 10e5             [ 3]         bpl tora10
3266 : a003             [ 2]         ldy #3
3268 :                       tora11
                                     set_ay  absORa,$ff
                            >            load_flag $ff
3268 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
326a : 48               [ 3]>            pha         ;use stack to load status
326b : b96702           [ 4]>            lda absORa,y    ;precharge accu
326e : 28               [ 4]>            plp
                             
326f : 195b02           [ 4]         ora absOR,y
                                     tst_ay  absrlo,absflo,$ff-fnz
3272 : 08               [ 3]>            php         ;save flags
3273 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
3276 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3278 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
3279 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
327b : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
327e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
3280 : 88               [ 2]         dey
3281 : 10e5             [ 3]         bpl tora11
                             
3283 : a206             [ 2]         ldx #6      ;(zp,x)
3285 : a003             [ 2]         ldy #3
3287 :                       tora12
                                     set_ay  absORa,0
                            >            load_flag 0
3287 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
3289 : 48               [ 3]>            pha         ;use stack to load status
328a : b96702           [ 4]>            lda absORa,y    ;precharge accu
328d : 28               [ 4]>            plp
                             
328e : 014c             [ 6]         ora (indOR,x)
                                     tst_ay  absrlo,absflo,0
3290 : 08               [ 3]>            php         ;save flags
3291 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
3294 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
3296 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
3297 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
3299 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
329c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  211
---------------------------- test_functional.asm -----------------------------

                             
329e : ca               [ 2]         dex
329f : ca               [ 2]         dex
32a0 : 88               [ 2]         dey
32a1 : 10e4             [ 3]         bpl tora12
32a3 : a206             [ 2]         ldx #6
32a5 : a003             [ 2]         ldy #3
32a7 :                       tora13
                                     set_ay  absORa,$ff
                            >            load_flag $ff
32a7 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
32a9 : 48               [ 3]>            pha         ;use stack to load status
32aa : b96702           [ 4]>            lda absORa,y    ;precharge accu
32ad : 28               [ 4]>            plp
                             
32ae : 014c             [ 6]         ora (indOR,x)
                                     tst_ay  absrlo,absflo,$ff-fnz
32b0 : 08               [ 3]>            php         ;save flags
32b1 : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
32b4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
32b6 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
32b7 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
32b9 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
32bc : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
32be : ca               [ 2]         dex
32bf : ca               [ 2]         dex
32c0 : 88               [ 2]         dey
32c1 : 10e4             [ 3]         bpl tora13
                             
32c3 : a003             [ 2]         ldy #3      ;(zp),y
32c5 :                       tora14
                                     set_ay  absORa,0
                            >            load_flag 0
32c5 : a900             [ 2]>            lda #0             ;allow test to cha
                            >
32c7 : 48               [ 3]>            pha         ;use stack to load status
32c8 : b96702           [ 4]>            lda absORa,y    ;precharge accu
32cb : 28               [ 4]>            plp
                             
32cc : 114c             [ 5]         ora (indOR),y
                                     tst_ay  absrlo,absflo,0
32ce : 08               [ 3]>            php         ;save flags
32cf : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
32d2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
32d4 : 68               [ 4]>            pla         ;load status
                            >            eor_flag 0
32d5 : 4930             [ 2]>            eor #0|fao         ;invert expected f
                            >
32d7 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
32da : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
AS65 Assembler for R6502 [1.42].                                     Page  212
---------------------------- test_functional.asm -----------------------------

                             
32dc : 88               [ 2]         dey
32dd : 10e6             [ 3]         bpl tora14
32df : a003             [ 2]         ldy #3
32e1 :                       tora15
                                     set_ay  absORa,$ff
                            >            load_flag $ff
32e1 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
32e3 : 48               [ 3]>            pha         ;use stack to load status
32e4 : b96702           [ 4]>            lda absORa,y    ;precharge accu
32e7 : 28               [ 4]>            plp
                             
32e8 : 114c             [ 5]         ora (indOR),y
                                     tst_ay  absrlo,absflo,$ff-fnz
32ea : 08               [ 3]>            php         ;save flags
32eb : d97302           [ 4]>            cmp absrlo,y    ;test result
                            >            trap_ne     ;
32ee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
32f0 : 68               [ 4]>            pla         ;load status
                            >            eor_flag $ff-fnz
32f1 : 497d             [ 2]>            eor #$ff-fnz|fao         ;invert expe
                            >
32f3 : d97702           [ 4]>            cmp absflo,y    ;test flags
                            >            trap_ne
32f6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
                             
32f8 : 88               [ 2]         dey
32f9 : 10e6             [ 3]         bpl tora15
                                 if I_flag = 3
32fb : 58               [ 2]         cli
                                 endif                
                                     next_test
32fc : ad0002           [ 4]>            lda test_case   ;previous test
32ff : c928             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
3301 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
0029 =                      >test_num = test_num + 1
3303 : a929             [ 2]>            lda #test_num   ;*** next tests' numb
3305 : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; full binary add/subtract test
                             ; iterates through all combinations of operands a
                             ; uses increments/decrements to predict result & 
3308 : d8               [ 2]         cld
3309 : a20e             [ 2]         ldx #ad2        ;for indexed test
330b : a0ff             [ 2]         ldy #$ff        ;max range
330d : a900             [ 2]         lda #0          ;start with adding zeroes
330f : 850c             [ 3]         sta adfc        ;carry in - for diag
3311 : 850d             [ 3]         sta ad1         ;operand 1 - accumulator
3313 : 850e             [ 3]         sta ad2         ;operand 2 - memory or im
3315 : 8d0302           [ 4]         sta ada2        ;non zp
3318 : 850f             [ 3]         sta adrl        ;expected result bits 0-7
331a : 8510             [ 3]         sta adrh        ;expected result bit 8 (c
331c : a9ff             [ 2]         lda #$ff        ;complemented operand 2 f
331e : 8512             [ 3]         sta sb2
3320 : 8d0402           [ 4]         sta sba2        ;non zp
AS65 Assembler for R6502 [1.42].                                     Page  213
---------------------------- test_functional.asm -----------------------------

3323 : a902             [ 2]         lda #2          ;expected Z-flag
3325 : 8511             [ 3]         sta adrf
3327 : 18               [ 2] tadd    clc             ;test with carry clear
3328 : 200000           [ 6]         jsr chkadd
332b : e60c             [ 5]         inc adfc        ;now with carry
332d : e60f             [ 5]         inc adrl        ;result +1
332f : 08               [ 3]         php             ;save N & Z from low resu
3330 : 08               [ 3]         php
3331 : 68               [ 4]         pla             ;accu holds expected flag
3332 : 2982             [ 2]         and #$82        ;mask N & Z
3334 : 28               [ 4]         plp
3335 : d0fe             [ 4]         bne tadd1
3337 : e610             [ 5]         inc adrh        ;result bit 8 - carry
3339 : 0510             [ 3] tadd1   ora adrh        ;merge C to expected flag
333b : 8511             [ 3]         sta adrf        ;save expected flags exce
333d : 38               [ 2]         sec             ;test with carry set
333e : 200000           [ 6]         jsr chkadd
3341 : c60c             [ 5]         dec adfc        ;same for operand +1 but 
3343 : e60d             [ 5]         inc ad1
3345 : d0e0             [ 3]         bne tadd        ;iterate op1
3347 : a900             [ 2]         lda #0          ;preset result to op2 whe
3349 : 8510             [ 3]         sta adrh
334b : ee0302           [ 6]         inc ada2
334e : e60e             [ 5]         inc ad2
3350 : 08               [ 3]         php             ;save NZ as operand 2 bec
3351 : 68               [ 4]         pla
3352 : 2982             [ 2]         and #$82        ;mask N00000Z0
3354 : 8511             [ 3]         sta adrf        ;no need to check carry a
3356 : c612             [ 5]         dec sb2         ;complement subtract oper
3358 : ce0402           [ 6]         dec sba2
335b : a50e             [ 3]         lda ad2         
335d : 850f             [ 3]         sta adrl
335f : d0c6             [ 3]         bne tadd        ;iterate op2
                                 if disable_decimal < 1
                                     next_test
3361 : ad0002           [ 4]>            lda test_case   ;previous test
3364 : c929             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
3366 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
002a =                      >test_num = test_num + 1
3368 : a92a             [ 2]>            lda #test_num   ;*** next tests' numb
336a : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; decimal add/subtract test
                             ; *** WARNING - tests documented behavior only! *
                             ;   only valid BCD operands are tested, N V Z fla
                             ; iterates through all valid combinations of oper
                             ; uses increments/decrements to predict result & 
336d : f8               [ 2]         sed 
336e : a20e             [ 2]         ldx #ad2        ;for indexed test
3370 : a0ff             [ 2]         ldy #$ff        ;max range
3372 : a999             [ 2]         lda #$99        ;start with adding 99 to 
3374 : 850d             [ 3]         sta ad1         ;operand 1 - accumulator
3376 : 850e             [ 3]         sta ad2         ;operand 2 - memory or im
3378 : 8d0302           [ 4]         sta ada2        ;non zp
337b : 850f             [ 3]         sta adrl        ;expected result bits 0-7
337d : a901             [ 2]         lda #1          ;set carry in & out
337f : 850c             [ 3]         sta adfc        ;carry in - for diag
3381 : 8510             [ 3]         sta adrh        ;expected result bit 8 (c
AS65 Assembler for R6502 [1.42].                                     Page  214
---------------------------- test_functional.asm -----------------------------

3383 : a900             [ 2]         lda #0          ;complemented operand 2 f
3385 : 8512             [ 3]         sta sb2
3387 : 8d0402           [ 4]         sta sba2        ;non zp
338a : 38               [ 2] tdad    sec             ;test with carry set
338b : 200000           [ 6]         jsr chkdad
338e : c60c             [ 5]         dec adfc        ;now with carry clear
3390 : a50f             [ 3]         lda adrl        ;decimal adjust result
3392 : d0fe             [ 4]         bne tdad1       ;skip clear carry & prese
3394 : c610             [ 5]         dec adrh
3396 : a999             [ 2]         lda #$99
3398 : 850f             [ 3]         sta adrl
339a : d0fe             [ 4]         bne tdad3
339c : 290f             [ 2] tdad1   and #$f         ;lower nibble mask
339e : d0fe             [ 4]         bne tdad2       ;no decimal adjust needed
33a0 : c60f             [ 5]         dec adrl        ;decimal adjust (?0-6)
33a2 : c60f             [ 5]         dec adrl
33a4 : c60f             [ 5]         dec adrl
33a6 : c60f             [ 5]         dec adrl
33a8 : c60f             [ 5]         dec adrl
33aa : c60f             [ 5]         dec adrl
33ac : c60f             [ 5] tdad2   dec adrl        ;result -1
33ae : 18               [ 2] tdad3   clc             ;test with carry clear
33af : 200000           [ 6]         jsr chkdad
33b2 : e60c             [ 5]         inc adfc        ;same for operand -1 but 
33b4 : a50d             [ 3]         lda ad1         ;decimal adjust operand 1
33b6 : f0fe             [ 4]         beq tdad5       ;iterate operand 2
33b8 : 290f             [ 2]         and #$f         ;lower nibble mask
33ba : d0fe             [ 4]         bne tdad4       ;skip decimal adjust
33bc : c60d             [ 5]         dec ad1         ;decimal adjust (?0-6)
33be : c60d             [ 5]         dec ad1
33c0 : c60d             [ 5]         dec ad1
33c2 : c60d             [ 5]         dec ad1
33c4 : c60d             [ 5]         dec ad1
33c6 : c60d             [ 5]         dec ad1
33c8 : c60d             [ 5] tdad4   dec ad1         ;operand 1 -1
33ca : 4c8a33           [ 3]         jmp tdad        ;iterate op1
                             
33cd : a999             [ 2] tdad5   lda #$99        ;precharge op1 max
33cf : 850d             [ 3]         sta ad1
33d1 : a50e             [ 3]         lda ad2         ;decimal adjust operand 2
33d3 : f0fe             [ 4]         beq tdad7       ;end of iteration
33d5 : 290f             [ 2]         and #$f         ;lower nibble mask
33d7 : d0fe             [ 4]         bne tdad6       ;skip decimal adjust
33d9 : c60e             [ 5]         dec ad2         ;decimal adjust (?0-6)
33db : c60e             [ 5]         dec ad2
33dd : c60e             [ 5]         dec ad2
33df : c60e             [ 5]         dec ad2
33e1 : c60e             [ 5]         dec ad2
33e3 : c60e             [ 5]         dec ad2
33e5 : e612             [ 5]         inc sb2         ;complemented decimal adj
33e7 : e612             [ 5]         inc sb2
33e9 : e612             [ 5]         inc sb2
33eb : e612             [ 5]         inc sb2
33ed : e612             [ 5]         inc sb2
33ef : e612             [ 5]         inc sb2
33f1 : c60e             [ 5] tdad6   dec ad2         ;operand 2 -1
33f3 : e612             [ 5]         inc sb2         ;complemented operand for
33f5 : a512             [ 3]         lda sb2
33f7 : 8d0402           [ 4]         sta sba2        ;copy as non zp operand
33fa : a50e             [ 3]         lda ad2
33fc : 8d0302           [ 4]         sta ada2        ;copy as non zp operand
33ff : 850f             [ 3]         sta adrl        ;new result since op1+car
AS65 Assembler for R6502 [1.42].                                     Page  215
---------------------------- test_functional.asm -----------------------------

3401 : e610             [ 5]         inc adrh        ;result carry
3403 : d085             [ 4]         bne tdad        ;iterate op2
3405 :                       tdad7
                                     next_test
3405 : ad0002           [ 4]>            lda test_case   ;previous test
3408 : c92a             [ 2]>            cmp #test_num
                            >            trap_ne         ;test is out of seque
340a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                            >
002b =                      >test_num = test_num + 1
340c : a92b             [ 2]>            lda #test_num   ;*** next tests' numb
340e : 8d0002           [ 4]>            sta test_case
                            >            ;check_ram       ;uncomment to find a
                             
                             
                             ; decimal/binary switch test
                             ; tests CLD, SED, PLP, RTI to properly switch bet
                             ;   tables
3411 : 18               [ 2]         clc
3412 : d8               [ 2]         cld
3413 : 08               [ 3]         php
3414 : a955             [ 2]         lda #$55
3416 : 6955             [ 2]         adc #$55
3418 : c9aa             [ 2]         cmp #$aa
                                     trap_ne         ;expected binary result a
341a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
341c : 18               [ 2]         clc
341d : f8               [ 2]         sed
341e : 08               [ 3]         php
341f : a955             [ 2]         lda #$55
3421 : 6955             [ 2]         adc #$55
3423 : c910             [ 2]         cmp #$10
                                     trap_ne         ;expected decimal result 
3425 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3427 : d8               [ 2]         cld
3428 : 28               [ 4]         plp
3429 : a955             [ 2]         lda #$55
342b : 6955             [ 2]         adc #$55
342d : c910             [ 2]         cmp #$10
                                     trap_ne         ;expected decimal result 
342f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3431 : 28               [ 4]         plp
3432 : a955             [ 2]         lda #$55
3434 : 6955             [ 2]         adc #$55
3436 : c9aa             [ 2]         cmp #$aa
                                     trap_ne         ;expected binary result a
3438 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
343a : 18               [ 2]         clc
343b : a900             [ 2]         lda #hi bin_rti_ret ;emulated interrupt f
343d : 48               [ 3]         pha
343e : a900             [ 2]         lda #lo bin_rti_ret
3440 : 48               [ 3]         pha
3441 : 08               [ 3]         php
3442 : f8               [ 2]         sed
3443 : a900             [ 2]         lda #hi dec_rti_ret ;emulated interrupt f
3445 : 48               [ 3]         pha
3446 : a900             [ 2]         lda #lo dec_rti_ret
3448 : 48               [ 3]         pha
AS65 Assembler for R6502 [1.42].                                     Page  216
---------------------------- test_functional.asm -----------------------------

3449 : 08               [ 3]         php
344a : d8               [ 2]         cld
344b : 40               [ 6]         rti
344c :                       dec_rti_ret
344c : a955             [ 2]         lda #$55
344e : 6955             [ 2]         adc #$55
3450 : c910             [ 2]         cmp #$10
                                     trap_ne         ;expected decimal result 
3452 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3454 : 40               [ 6]         rti
3455 :                       bin_rti_ret        
3455 : a955             [ 2]         lda #$55
3457 : 6955             [ 2]         adc #$55
3459 : c9aa             [ 2]         cmp #$aa
                                     trap_ne         ;expected binary result a
345b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                 endif
                                 
345d : ad0002           [ 4]         lda test_case
3460 : c92b             [ 2]         cmp #test_num
                                     trap_ne         ;previous test is out of 
3462 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3464 : a9f0             [ 2]         lda #$f0        ;mark opcode testing comp
3466 : 8d0002           [ 4]         sta test_case
                                     
                             ; final RAM integrity test
                             ;   verifies that none of the previous tests has 
                             ;   designated write areas.
                                     check_ram
                            >            ;RAM check disabled - RAM size not se
                             
                             ; *** DEBUG INFO ***
                             ; to debug checksum errors uncomment check_ram in
                             ; narrow down the responsible opcode.
                             ; may give false errors when monitor, OS or other
                             ; allowed during previous tests.
                             
                             
                             ; S U C C E S S *********************************
                             ; -------------       
                                     success         ;if you get here everythi
3469 : 4c6934           [ 3]>        jmp *           ;test passed, no errors
                             
                             ; -------------       
                             ; S U C C E S S *********************************
346c : 4c0004           [ 3]         jmp start       ;run again      
                             
                                 if disable_decimal < 1
                             ; core subroutine of the decimal add/subtract tes
                             ; *** WARNING - tests documented behavior only! *
                             ;   only valid BCD operands are tested, N V Z fla
                             ; iterates through all valid combinations of oper
                             ; uses increments/decrements to predict result & 
346f :                       chkdad
                             ; decimal ADC / SBC zp
346f : 08               [ 3]         php             ;save carry for subtract
3470 : a50d             [ 3]         lda ad1
3472 : 650e             [ 3]         adc ad2         ;perform add
3474 : 08               [ 3]         php          
AS65 Assembler for R6502 [1.42].                                     Page  217
---------------------------- test_functional.asm -----------------------------

3475 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3477 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3479 : 68               [ 4]         pla             ;check flags
347a : 2901             [ 2]         and #1          ;mask carry
347c : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
347e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3480 : 28               [ 4]         plp
3481 : 08               [ 3]         php             ;save carry for next add
3482 : a50d             [ 3]         lda ad1
3484 : e512             [ 3]         sbc sb2         ;perform subtract
3486 : 08               [ 3]         php          
3487 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3489 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
348b : 68               [ 4]         pla             ;check flags
348c : 2901             [ 2]         and #1          ;mask carry
348e : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad flags
3490 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3492 : 28               [ 4]         plp
                             ; decimal ADC / SBC abs
3493 : 08               [ 3]         php             ;save carry for subtract
3494 : a50d             [ 3]         lda ad1
3496 : 6d0302           [ 4]         adc ada2        ;perform add
3499 : 08               [ 3]         php          
349a : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
349c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
349e : 68               [ 4]         pla             ;check flags
349f : 2901             [ 2]         and #1          ;mask carry
34a1 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
34a3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34a5 : 28               [ 4]         plp
34a6 : 08               [ 3]         php             ;save carry for next add
34a7 : a50d             [ 3]         lda ad1
34a9 : ed0402           [ 4]         sbc sba2        ;perform subtract
34ac : 08               [ 3]         php          
34ad : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
34af : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34b1 : 68               [ 4]         pla             ;check flags
34b2 : 2901             [ 2]         and #1          ;mask carry
34b4 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
34b6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34b8 : 28               [ 4]         plp
                             ; decimal ADC / SBC #
34b9 : 08               [ 3]         php             ;save carry for subtract
34ba : a50e             [ 3]         lda ad2
34bc : 8d1302           [ 4]         sta ex_adci+1   ;set ADC # operand
34bf : a50d             [ 3]         lda ad1
AS65 Assembler for R6502 [1.42].                                     Page  218
---------------------------- test_functional.asm -----------------------------

34c1 : 201202           [ 6]         jsr ex_adci     ;execute ADC # in RAM
34c4 : 08               [ 3]         php          
34c5 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
34c7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34c9 : 68               [ 4]         pla             ;check flags
34ca : 2901             [ 2]         and #1          ;mask carry
34cc : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
34ce : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34d0 : 28               [ 4]         plp
34d1 : 08               [ 3]         php             ;save carry for next add
34d2 : a512             [ 3]         lda sb2
34d4 : 8d1602           [ 4]         sta ex_sbci+1   ;set SBC # operand
34d7 : a50d             [ 3]         lda ad1
34d9 : 201502           [ 6]         jsr ex_sbci     ;execute SBC # in RAM
34dc : 08               [ 3]         php          
34dd : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
34df : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34e1 : 68               [ 4]         pla             ;check flags
34e2 : 2901             [ 2]         and #1          ;mask carry
34e4 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
34e6 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34e8 : 28               [ 4]         plp
                             ; decimal ADC / SBC zp,x
34e9 : 08               [ 3]         php             ;save carry for subtract
34ea : a50d             [ 3]         lda ad1
34ec : 7500             [ 4]         adc 0,x         ;perform add
34ee : 08               [ 3]         php          
34ef : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
34f1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34f3 : 68               [ 4]         pla             ;check flags
34f4 : 2901             [ 2]         and #1          ;mask carry
34f6 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
34f8 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
34fa : 28               [ 4]         plp
34fb : 08               [ 3]         php             ;save carry for next add
34fc : a50d             [ 3]         lda ad1
34fe : f504             [ 4]         sbc sb2-ad2,x   ;perform subtract
3500 : 08               [ 3]         php          
3501 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3503 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3505 : 68               [ 4]         pla             ;check flags
3506 : 2901             [ 2]         and #1          ;mask carry
3508 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
350a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
350c : 28               [ 4]         plp
                             ; decimal ADC / SBC abs,x
AS65 Assembler for R6502 [1.42].                                     Page  219
---------------------------- test_functional.asm -----------------------------

350d : 08               [ 3]         php             ;save carry for subtract
350e : a50d             [ 3]         lda ad1
3510 : 7df501           [ 4]         adc ada2-ad2,x  ;perform add
3513 : 08               [ 3]         php          
3514 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3516 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3518 : 68               [ 4]         pla             ;check flags
3519 : 2901             [ 2]         and #1          ;mask carry
351b : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
351d : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
351f : 28               [ 4]         plp
3520 : 08               [ 3]         php             ;save carry for next add
3521 : a50d             [ 3]         lda ad1
3523 : fdf601           [ 4]         sbc sba2-ad2,x  ;perform subtract
3526 : 08               [ 3]         php          
3527 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3529 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
352b : 68               [ 4]         pla             ;check flags
352c : 2901             [ 2]         and #1          ;mask carry
352e : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
3530 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3532 : 28               [ 4]         plp
                             ; decimal ADC / SBC abs,y
3533 : 08               [ 3]         php             ;save carry for subtract
3534 : a50d             [ 3]         lda ad1
3536 : 790401           [ 4]         adc ada2-$ff,y  ;perform add
3539 : 08               [ 3]         php          
353a : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
353c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
353e : 68               [ 4]         pla             ;check flags
353f : 2901             [ 2]         and #1          ;mask carry
3541 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
3543 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3545 : 28               [ 4]         plp
3546 : 08               [ 3]         php             ;save carry for next add
3547 : a50d             [ 3]         lda ad1
3549 : f90501           [ 4]         sbc sba2-$ff,y  ;perform subtract
354c : 08               [ 3]         php          
354d : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
354f : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3551 : 68               [ 4]         pla             ;check flags
3552 : 2901             [ 2]         and #1          ;mask carry
3554 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
3556 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3558 : 28               [ 4]         plp
                             ; decimal ADC / SBC (zp,x)
AS65 Assembler for R6502 [1.42].                                     Page  220
---------------------------- test_functional.asm -----------------------------

3559 : 08               [ 3]         php             ;save carry for subtract
355a : a50d             [ 3]         lda ad1
355c : 6146             [ 6]         adc (lo adi2-ad2,x) ;perform add
355e : 08               [ 3]         php          
355f : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3561 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3563 : 68               [ 4]         pla             ;check flags
3564 : 2901             [ 2]         and #1          ;mask carry
3566 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
3568 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
356a : 28               [ 4]         plp
356b : 08               [ 3]         php             ;save carry for next add
356c : a50d             [ 3]         lda ad1
356e : e148             [ 6]         sbc (lo sbi2-ad2,x) ;perform subtract
3570 : 08               [ 3]         php          
3571 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3573 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3575 : 68               [ 4]         pla             ;check flags
3576 : 2901             [ 2]         and #1          ;mask carry
3578 : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
357a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
357c : 28               [ 4]         plp
                             ; decimal ADC / SBC (abs),y
357d : 08               [ 3]         php             ;save carry for subtract
357e : a50d             [ 3]         lda ad1
3580 : 7158             [ 5]         adc (adiy2),y   ;perform add
3582 : 08               [ 3]         php          
3583 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3585 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3587 : 68               [ 4]         pla             ;check flags
3588 : 2901             [ 2]         and #1          ;mask carry
358a : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
358c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
358e : 28               [ 4]         plp
358f : 08               [ 3]         php             ;save carry for next add
3590 : a50d             [ 3]         lda ad1
3592 : f15a             [ 5]         sbc (sbiy2),y   ;perform subtract
3594 : 08               [ 3]         php          
3595 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3597 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3599 : 68               [ 4]         pla             ;check flags
359a : 2901             [ 2]         and #1          ;mask carry
359c : c510             [ 3]         cmp adrh
                                     trap_ne         ;bad carry
359e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35a0 : 28               [ 4]         plp
35a1 : 60               [ 6]         rts
AS65 Assembler for R6502 [1.42].                                     Page  221
---------------------------- test_functional.asm -----------------------------

                                 endif
                             
                             ; core subroutine of the full binary add/subtract
                             ; iterates through all combinations of operands a
                             ; uses increments/decrements to predict result & 
35a2 : a511             [ 3] chkadd  lda adrf        ;add V-flag if overflow
35a4 : 2983             [ 2]         and #$83        ;keep N-----ZC / clear V
35a6 : 48               [ 3]         pha
35a7 : a50d             [ 3]         lda ad1         ;test sign unequal betwee
35a9 : 450e             [ 3]         eor ad2
35ab : 30fe             [ 4]         bmi ckad1       ;no overflow possible - o
35ad : a50d             [ 3]         lda ad1         ;test sign equal between 
35af : 450f             [ 3]         eor adrl
35b1 : 10fe             [ 4]         bpl ckad1       ;no overflow occured - op
35b3 : 68               [ 4]         pla
35b4 : 0940             [ 2]         ora #$40        ;set V
35b6 : 48               [ 3]         pha
35b7 : 68               [ 4] ckad1   pla
35b8 : 8511             [ 3]         sta adrf        ;save expected flags
                             ; binary ADC / SBC zp
35ba : 08               [ 3]         php             ;save carry for subtract
35bb : a50d             [ 3]         lda ad1
35bd : 650e             [ 3]         adc ad2         ;perform add
35bf : 08               [ 3]         php          
35c0 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
35c2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35c4 : 68               [ 4]         pla             ;check flags
35c5 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
35c7 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
35c9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35cb : 28               [ 4]         plp
35cc : 08               [ 3]         php             ;save carry for next add
35cd : a50d             [ 3]         lda ad1
35cf : e512             [ 3]         sbc sb2         ;perform subtract
35d1 : 08               [ 3]         php          
35d2 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
35d4 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35d6 : 68               [ 4]         pla             ;check flags
35d7 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
35d9 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
35db : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35dd : 28               [ 4]         plp
                             ; binary ADC / SBC abs
35de : 08               [ 3]         php             ;save carry for subtract
35df : a50d             [ 3]         lda ad1
35e1 : 6d0302           [ 4]         adc ada2        ;perform add
35e4 : 08               [ 3]         php          
35e5 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
35e7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35e9 : 68               [ 4]         pla             ;check flags
35ea : 29c3             [ 2]         and #$c3        ;mask NV----ZC
35ec : c511             [ 3]         cmp adrf
AS65 Assembler for R6502 [1.42].                                     Page  222
---------------------------- test_functional.asm -----------------------------

                                     trap_ne         ;bad flags
35ee : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35f0 : 28               [ 4]         plp
35f1 : 08               [ 3]         php             ;save carry for next add
35f2 : a50d             [ 3]         lda ad1
35f4 : ed0402           [ 4]         sbc sba2        ;perform subtract
35f7 : 08               [ 3]         php          
35f8 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
35fa : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
35fc : 68               [ 4]         pla             ;check flags
35fd : 29c3             [ 2]         and #$c3        ;mask NV----ZC
35ff : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
3601 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3603 : 28               [ 4]         plp
                             ; binary ADC / SBC #
3604 : 08               [ 3]         php             ;save carry for subtract
3605 : a50e             [ 3]         lda ad2
3607 : 8d1302           [ 4]         sta ex_adci+1   ;set ADC # operand
360a : a50d             [ 3]         lda ad1
360c : 201202           [ 6]         jsr ex_adci     ;execute ADC # in RAM
360f : 08               [ 3]         php          
3610 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3612 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3614 : 68               [ 4]         pla             ;check flags
3615 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
3617 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
3619 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
361b : 28               [ 4]         plp
361c : 08               [ 3]         php             ;save carry for next add
361d : a512             [ 3]         lda sb2
361f : 8d1602           [ 4]         sta ex_sbci+1   ;set SBC # operand
3622 : a50d             [ 3]         lda ad1
3624 : 201502           [ 6]         jsr ex_sbci     ;execute SBC # in RAM
3627 : 08               [ 3]         php          
3628 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
362a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
362c : 68               [ 4]         pla             ;check flags
362d : 29c3             [ 2]         and #$c3        ;mask NV----ZC
362f : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
3631 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3633 : 28               [ 4]         plp
                             ; binary ADC / SBC zp,x
3634 : 08               [ 3]         php             ;save carry for subtract
3635 : a50d             [ 3]         lda ad1
3637 : 7500             [ 4]         adc 0,x         ;perform add
3639 : 08               [ 3]         php          
363a : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
363c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  223
---------------------------- test_functional.asm -----------------------------

                             
363e : 68               [ 4]         pla             ;check flags
363f : 29c3             [ 2]         and #$c3        ;mask NV----ZC
3641 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
3643 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3645 : 28               [ 4]         plp
3646 : 08               [ 3]         php             ;save carry for next add
3647 : a50d             [ 3]         lda ad1
3649 : f504             [ 4]         sbc sb2-ad2,x   ;perform subtract
364b : 08               [ 3]         php          
364c : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
364e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3650 : 68               [ 4]         pla             ;check flags
3651 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
3653 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
3655 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3657 : 28               [ 4]         plp
                             ; binary ADC / SBC abs,x
3658 : 08               [ 3]         php             ;save carry for subtract
3659 : a50d             [ 3]         lda ad1
365b : 7df501           [ 4]         adc ada2-ad2,x  ;perform add
365e : 08               [ 3]         php          
365f : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3661 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3663 : 68               [ 4]         pla             ;check flags
3664 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
3666 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
3668 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
366a : 28               [ 4]         plp
366b : 08               [ 3]         php             ;save carry for next add
366c : a50d             [ 3]         lda ad1
366e : fdf601           [ 4]         sbc sba2-ad2,x  ;perform subtract
3671 : 08               [ 3]         php          
3672 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3674 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3676 : 68               [ 4]         pla             ;check flags
3677 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
3679 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
367b : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
367d : 28               [ 4]         plp
                             ; binary ADC / SBC abs,y
367e : 08               [ 3]         php             ;save carry for subtract
367f : a50d             [ 3]         lda ad1
3681 : 790401           [ 4]         adc ada2-$ff,y  ;perform add
3684 : 08               [ 3]         php          
3685 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
3687 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  224
---------------------------- test_functional.asm -----------------------------

                             
3689 : 68               [ 4]         pla             ;check flags
368a : 29c3             [ 2]         and #$c3        ;mask NV----ZC
368c : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
368e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3690 : 28               [ 4]         plp
3691 : 08               [ 3]         php             ;save carry for next add
3692 : a50d             [ 3]         lda ad1
3694 : f90501           [ 4]         sbc sba2-$ff,y  ;perform subtract
3697 : 08               [ 3]         php          
3698 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
369a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
369c : 68               [ 4]         pla             ;check flags
369d : 29c3             [ 2]         and #$c3        ;mask NV----ZC
369f : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
36a1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36a3 : 28               [ 4]         plp
                             ; binary ADC / SBC (zp,x)
36a4 : 08               [ 3]         php             ;save carry for subtract
36a5 : a50d             [ 3]         lda ad1
36a7 : 6146             [ 6]         adc (lo adi2-ad2,x) ;perform add
36a9 : 08               [ 3]         php          
36aa : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
36ac : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36ae : 68               [ 4]         pla             ;check flags
36af : 29c3             [ 2]         and #$c3        ;mask NV----ZC
36b1 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
36b3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36b5 : 28               [ 4]         plp
36b6 : 08               [ 3]         php             ;save carry for next add
36b7 : a50d             [ 3]         lda ad1
36b9 : e148             [ 6]         sbc (lo sbi2-ad2,x) ;perform subtract
36bb : 08               [ 3]         php          
36bc : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
36be : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36c0 : 68               [ 4]         pla             ;check flags
36c1 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
36c3 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
36c5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36c7 : 28               [ 4]         plp
                             ; binary ADC / SBC (abs),y
36c8 : 08               [ 3]         php             ;save carry for subtract
36c9 : a50d             [ 3]         lda ad1
36cb : 7158             [ 5]         adc (adiy2),y   ;perform add
36cd : 08               [ 3]         php          
36ce : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
36d0 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
AS65 Assembler for R6502 [1.42].                                     Page  225
---------------------------- test_functional.asm -----------------------------

                             
36d2 : 68               [ 4]         pla             ;check flags
36d3 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
36d5 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
36d7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36d9 : 28               [ 4]         plp
36da : 08               [ 3]         php             ;save carry for next add
36db : a50d             [ 3]         lda ad1
36dd : f15a             [ 5]         sbc (sbiy2),y   ;perform subtract
36df : 08               [ 3]         php          
36e0 : c50f             [ 3]         cmp adrl        ;check result
                                     trap_ne         ;bad result
36e2 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36e4 : 68               [ 4]         pla             ;check flags
36e5 : 29c3             [ 2]         and #$c3        ;mask NV----ZC
36e7 : c511             [ 3]         cmp adrf
                                     trap_ne         ;bad flags
36e9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
36eb : 28               [ 4]         plp
36ec : 60               [ 6]         rts
                             
                             ; target for the jump absolute test
36ed : 88               [ 2]         dey
36ee : 88               [ 2]         dey
36ef :                       test_far
36ef : 08               [ 3]         php             ;either SP or Y count wil
36f0 : 88               [ 2]         dey
36f1 : 88               [ 2]         dey
36f2 : 88               [ 2]         dey
36f3 : 28               [ 4]         plp
                                     trap_cs         ;flags loaded?
36f4 : b0fe             [ 3]>        bcs *           ;failed carry set
                             
                                     trap_vs
36f6 : 70fe             [ 3]>        bvs *           ;failed overflow set
                             
                                     trap_mi
36f8 : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
                                     trap_eq 
36fa : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
36fc : c946             [ 2]         cmp #'F'        ;registers loaded?
                                     trap_ne
36fe : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3700 : e041             [ 2]         cpx #'A'
                                     trap_ne        
3702 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3704 : c04f             [ 2]         cpy #('R'-3)
                                     trap_ne
3706 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3708 : 48               [ 3]         pha             ;save a,x
3709 : 8a               [ 2]         txa
370a : 48               [ 3]         pha
370b : ba               [ 2]         tsx
AS65 Assembler for R6502 [1.42].                                     Page  226
---------------------------- test_functional.asm -----------------------------

370c : e0fd             [ 2]         cpx #$fd        ;check SP
                                     trap_ne
370e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3710 : 68               [ 4]         pla             ;restore x
3711 : aa               [ 2]         tax
                                     set_stat $ff
                            >            load_flag $ff
3712 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
3714 : 48               [ 3]>            pha         ;use stack to load status
3715 : 28               [ 4]>            plp
                             
3716 : 68               [ 4]         pla             ;restore a
3717 : e8               [ 2]         inx             ;return registers with mo
3718 : 49aa             [ 2]         eor #$aa        ;N=1, V=1, Z=0, C=1
371a : 4c0f09           [ 3]         jmp far_ret
                                     
                             ; target for the jump indirect test
371d : 00                            align
371e : 0000                  ptr_tst_ind dw test_ind
3720 : 6409                  ptr_ind_ret dw ind_ret
                                     trap            ;runover protection
3722 : 4c2237           [ 3]>        jmp *           ;failed anyway
                             
3725 : 88               [ 2]         dey
3726 : 88               [ 2]         dey
3727 :                       test_ind
3727 : 08               [ 3]         php             ;either SP or Y count wil
3728 : 88               [ 2]         dey
3729 : 88               [ 2]         dey
372a : 88               [ 2]         dey
372b : 28               [ 4]         plp
                                     trap_cs         ;flags loaded?
372c : b0fe             [ 3]>        bcs *           ;failed carry set
                             
                                     trap_vs
372e : 70fe             [ 3]>        bvs *           ;failed overflow set
                             
                                     trap_mi
3730 : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
                                     trap_eq 
3732 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
3734 : c949             [ 2]         cmp #'I'        ;registers loaded?
                                     trap_ne
3736 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3738 : e04e             [ 2]         cpx #'N'
                                     trap_ne        
373a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
373c : c041             [ 2]         cpy #('D'-3)
                                     trap_ne
373e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3740 : 48               [ 3]         pha             ;save a,x
3741 : 8a               [ 2]         txa
3742 : 48               [ 3]         pha
3743 : ba               [ 2]         tsx
3744 : e0fd             [ 2]         cpx #$fd        ;check SP
AS65 Assembler for R6502 [1.42].                                     Page  227
---------------------------- test_functional.asm -----------------------------

                                     trap_ne
3746 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3748 : 68               [ 4]         pla             ;restore x
3749 : aa               [ 2]         tax
                                     set_stat $ff
                            >            load_flag $ff
374a : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
374c : 48               [ 3]>            pha         ;use stack to load status
374d : 28               [ 4]>            plp
                             
374e : 68               [ 4]         pla             ;restore a
374f : e8               [ 2]         inx             ;return registers with mo
3750 : 49aa             [ 2]         eor #$aa        ;N=1, V=1, Z=0, C=1
3752 : 6c2037           [ 6]         jmp (ptr_ind_ret)
                                     trap            ;runover protection
3755 : 4c5537           [ 3]>        jmp *           ;failed anyway
                             
3758 : 4c0004           [ 3]         jmp start       ;catastrophic error - can
                             
                             ; target for the jump subroutine test
375b : 88               [ 2]         dey
375c : 88               [ 2]         dey
375d :                       test_jsr
375d : 08               [ 3]         php             ;either SP or Y count wil
375e : 88               [ 2]         dey
375f : 88               [ 2]         dey
3760 : 88               [ 2]         dey
3761 : 28               [ 4]         plp
                                     trap_cs         ;flags loaded?
3762 : b0fe             [ 3]>        bcs *           ;failed carry set
                             
                                     trap_vs
3764 : 70fe             [ 3]>        bvs *           ;failed overflow set
                             
                                     trap_mi
3766 : 30fe             [ 3]>        bmi *           ;failed minus (bit 7 set)
                             
                                     trap_eq 
3768 : f0fe             [ 3]>        beq *           ;failed equal (zero)
                             
376a : c94a             [ 2]         cmp #'J'        ;registers loaded?
                                     trap_ne
376c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
376e : e053             [ 2]         cpx #'S'
                                     trap_ne        
3770 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3772 : c04f             [ 2]         cpy #('R'-3)
                                     trap_ne
3774 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3776 : 48               [ 3]         pha             ;save a,x
3777 : 8a               [ 2]         txa
3778 : 48               [ 3]         pha       
3779 : ba               [ 2]         tsx             ;sp -4? (return addr,a,x)
377a : e0fb             [ 2]         cpx #$fb
                                     trap_ne
377c : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
AS65 Assembler for R6502 [1.42].                                     Page  228
---------------------------- test_functional.asm -----------------------------

377e : adff01           [ 4]         lda $1ff        ;propper return on stack
3781 : c909             [ 2]         cmp #hi(jsr_ret)
                                     trap_ne
3783 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3785 : adfe01           [ 4]         lda $1fe
3788 : c99a             [ 2]         cmp #lo(jsr_ret)
                                     trap_ne
378a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     set_stat $ff
                            >            load_flag $ff
378c : a9ff             [ 2]>            lda #$ff             ;allow test to c
                            >
378e : 48               [ 3]>            pha         ;use stack to load status
378f : 28               [ 4]>            plp
                             
3790 : 68               [ 4]         pla             ;pull x,a
3791 : aa               [ 2]         tax
3792 : 68               [ 4]         pla
3793 : e8               [ 2]         inx             ;return registers with mo
3794 : 49aa             [ 2]         eor #$aa        ;N=1, V=1, Z=0, C=1
3796 : 60               [ 6]         rts
                                     trap            ;runover protection
3797 : 4c9737           [ 3]>        jmp *           ;failed anyway
                             
379a : 4c0004           [ 3]         jmp start       ;catastrophic error - can
                                     
                             ;trap in case of unexpected IRQ, NMI, BRK, RESET 
379d :                       nmi_trap
                                     trap            ;check stack for conditio
379d : 4c9d37           [ 3]>        jmp *           ;failed anyway
                             
37a0 : 4c0004           [ 3]         jmp start       ;catastrophic error - can
37a3 :                       res_trap
                                     trap            ;unexpected RESET
37a3 : 4ca337           [ 3]>        jmp *           ;failed anyway
                             
37a6 : 4c0004           [ 3]         jmp start       ;catastrophic error - can
                                     
37a9 : 88               [ 2]         dey
37aa : 88               [ 2]         dey
37ab :                       irq_trap                ;BRK test or unextpected 
37ab : 08               [ 3]         php             ;either SP or Y count wil
37ac : 88               [ 2]         dey
37ad : 88               [ 2]         dey
37ae : 88               [ 2]         dey
                                     ;next traps could be caused by unexpected
                                     ;check stack for BREAK and originating lo
                                     ;possible jump/branch into weeds (uniniti
37af : c9bd             [ 2]         cmp #$ff-'B'    ;BRK pass 2 registers loa
37b1 : f0fe             [ 4]         beq break2
37b3 : c942             [ 2]         cmp #'B'        ;BRK pass 1 registers loa
                                     trap_ne
37b5 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37b7 : e052             [ 2]         cpx #'R'
                                     trap_ne        
37b9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37bb : c048             [ 2]         cpy #'K'-3
                                     trap_ne
AS65 Assembler for R6502 [1.42].                                     Page  229
---------------------------- test_functional.asm -----------------------------

37bd : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37bf : 850a             [ 3]         sta irq_a       ;save registers during br
37c1 : 860b             [ 3]         stx irq_x
37c3 : ba               [ 2]         tsx             ;test break on stack
37c4 : bd0201           [ 4]         lda $102,x
                                     cmp_flag 0      ;break test should have B
37c7 : c930             [ 2]>            cmp #(0      |fao)&m8    ;expected fl
                             
                                     trap_ne         ; - no break flag on stac
37c9 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37cb : 68               [ 4]         pla
                                     cmp_flag intdis ;should have added interr
37cc : c934             [ 2]>            cmp #(intdis |fao)&m8    ;expected fl
                             
                                     trap_ne
37ce : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37d0 : ba               [ 2]         tsx
37d1 : e0fc             [ 2]         cpx #$fc        ;sp -3? (return addr, fla
                                     trap_ne
37d3 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37d5 : adff01           [ 4]         lda $1ff        ;propper return on stack
37d8 : c909             [ 2]         cmp #hi(brk_ret0)
                                     trap_ne
37da : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37dc : adfe01           [ 4]         lda $1fe
37df : c9d1             [ 2]         cmp #lo(brk_ret0)
                                     trap_ne
37e1 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     load_flag $ff
37e3 : a9ff             [ 2]>            lda #$ff             ;allow test to c
                             
37e5 : 48               [ 3]         pha
37e6 : a60b             [ 3]         ldx irq_x
37e8 : e8               [ 2]         inx             ;return registers with mo
37e9 : a50a             [ 3]         lda irq_a
37eb : 49aa             [ 2]         eor #$aa
37ed : 28               [ 4]         plp             ;N=1, V=1, Z=1, C=1 but o
37ee : 40               [ 6]         rti
                                     trap            ;runover protection
37ef : 4cef37           [ 3]>        jmp *           ;failed anyway
                             
37f2 : 4c0004           [ 3]         jmp start       ;catastrophic error - can
                                     
37f5 :                       break2                  ;BRK pass 2        
37f5 : e0ad             [ 2]         cpx #$ff-'R'
                                     trap_ne        
37f7 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37f9 : c0b1             [ 2]         cpy #$ff-'K'-3
                                     trap_ne
37fb : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
37fd : 850a             [ 3]         sta irq_a       ;save registers during br
37ff : 860b             [ 3]         stx irq_x
3801 : ba               [ 2]         tsx             ;test break on stack
3802 : bd0201           [ 4]         lda $102,x
AS65 Assembler for R6502 [1.42].                                     Page  230
---------------------------- test_functional.asm -----------------------------

                                     cmp_flag $ff    ;break test should have B
3805 : c9ff             [ 2]>            cmp #($ff    |fao)&m8    ;expected fl
                             
                                     trap_ne         ; - no break flag on stac
3807 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3809 : 68               [ 4]         pla
380a : 0908             [ 2]         ora #decmode    ;ignore decmode cleared i
                                     cmp_flag $ff    ;actual passed flags
380c : c9ff             [ 2]>            cmp #($ff    |fao)&m8    ;expected fl
                             
                                     trap_ne
380e : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3810 : ba               [ 2]         tsx
3811 : e0fc             [ 2]         cpx #$fc        ;sp -3? (return addr, fla
                                     trap_ne
3813 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
3815 : adff01           [ 4]         lda $1ff        ;propper return on stack
3818 : c909             [ 2]         cmp #hi(brk_ret1)
                                     trap_ne
381a : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
381c : adfe01           [ 4]         lda $1fe
381f : c9f7             [ 2]         cmp #lo(brk_ret1)
                                     trap_ne
3821 : d0fe             [ 3]>        bne *           ;failed not equal (non ze
                             
                                     load_flag intdis
3823 : a904             [ 2]>            lda #intdis             ;allow test t
                             
3825 : 48               [ 3]         pha      
3826 : a60b             [ 3]         ldx irq_x
3828 : e8               [ 2]         inx             ;return registers with mo
3829 : a50a             [ 3]         lda irq_a
382b : 49aa             [ 2]         eor #$aa
382d : 28               [ 4]         plp             ;N=0, V=0, Z=0, C=0 but o
382e : 40               [ 6]         rti
                                     trap            ;runover protection
382f : 4c2f38           [ 3]>        jmp *           ;failed anyway
                             
3832 : 4c0004           [ 3]         jmp start       ;catastrophic error - can
                             
                                 if report = 1
                                     include "report.i65"
                                 endif
                                     
                             ;copy of data to initialize BSS segment
                                 if load_data_direct != 1
                             zp_init
                             zps_    db  $80,1           ;additional shift pat
                             zp1_    db  $c3,$82,$41,0   ;test patterns for LD
                             zp7f_   db  $7f             ;test pattern for com
                             ;logical zeropage operands
                             zpOR_   db  0,$1f,$71,$80   ;test pattern for OR
                             zpAN_   db  $0f,$ff,$7f,$80 ;test pattern for AND
                             zpEO_   db  $ff,$0f,$8f,$8f ;test pattern for EOR
                             ;indirect addressing pointers
                             ind1_   dw  abs1            ;indirect pointer to 
                                     dw  abs1+1
                                     dw  abs1+2
AS65 Assembler for R6502 [1.42].                                     Page  231
---------------------------- test_functional.asm -----------------------------

                                     dw  abs1+3
                                     dw  abs7f
                             inw1_   dw  abs1-$f8        ;indirect pointer for
                             indt_   dw  abst            ;indirect pointer to 
                                     dw  abst+1
                                     dw  abst+2
                                     dw  abst+3
                             inwt_   dw  abst-$f8        ;indirect pointer for
                             indAN_  dw  absAN           ;indirect pointer to 
                                     dw  absAN+1
                                     dw  absAN+2
                                     dw  absAN+3
                             indEO_  dw  absEO           ;indirect pointer to 
                                     dw  absEO+1
                                     dw  absEO+2
                                     dw  absEO+3
                             indOR_  dw  absOR           ;indirect pointer to 
                                     dw  absOR+1
                                     dw  absOR+2
                                     dw  absOR+3
                             ;add/subtract indirect pointers
                             adi2_   dw  ada2            ;indirect pointer to 
                             sbi2_   dw  sba2            ;indirect pointer to 
                             adiy2_  dw  ada2-$ff        ;with offset for indi
                             sbiy2_  dw  sba2-$ff
                             zp_end
                                 if (zp_end - zp_init) != (zp_bss_end - zp_bss
                                     ;force assembler error if size is differe
                                     ERROR ERROR ERROR   ;mismatch between bss
                                 endif 
                             data_init
                             ex_and_ and #0              ;execute immediate op
                                     rts
                             ex_eor_ eor #0              ;execute immediate op
                                     rts
                             ex_ora_ ora #0              ;execute immediate op
                                     rts
                             ex_adc_ adc #0              ;execute immediate op
                                     rts
                             ex_sbc_ sbc #0              ;execute immediate op
                                     rts
                             ;zps    db  $80,1           ;additional shift pat
                             abs1_   db  $c3,$82,$41,0   ;test patterns for LD
                             abs7f_  db  $7f             ;test pattern for com
                             ;loads
                             fLDx_   db  fn,fn,0,fz              ;expected fla
                             ;shifts
                             rASL_                               ;expected res
                             rROL_   db  0,2,$86,$04,$82,0
                             rROLc_  db  1,3,$87,$05,$83,1       ;expected res
                             rLSR_                               ;expected res
                             rROR_   db  $40,0,$61,$41,$20,0
                             rRORc_  db  $c0,$80,$e1,$c1,$a0,$80 ;expected res
                             fASL_                               ;expected fla
                             fROL_   db  fzc,0,fnc,fc,fn,fz      ;no carry in
                             fROLc_  db  fc,0,fnc,fc,fn,0        ;carry in 
                             fLSR_
                             fROR_   db  0,fzc,fc,0,fc,fz        ;no carry in
                             fRORc_  db  fn,fnc,fnc,fn,fnc,fn    ;carry in
                             ;increments (decrements)
                             rINC_   db  $7f,$80,$ff,0,1         ;expected res
                             fINC_   db  0,fn,fn,fz,0            ;expected fla
AS65 Assembler for R6502 [1.42].                                     Page  232
---------------------------- test_functional.asm -----------------------------

                             ;logical memory operand
                             absOR_  db  0,$1f,$71,$80           ;test pattern
                             absAN_  db  $0f,$ff,$7f,$80         ;test pattern
                             absEO_  db  $ff,$0f,$8f,$8f         ;test pattern
                             ;logical accu operand
                             absORa_ db  0,$f1,$1f,0             ;test pattern
                             absANa_ db  $f0,$ff,$ff,$ff         ;test pattern
                             absEOa_ db  $ff,$f0,$f0,$0f         ;test pattern
                             ;logical results
                             absrlo_ db  0,$ff,$7f,$80
                             absflo_ db  fz,fn,0,fn
                             data_end
                                 if (data_end - data_init) != (data_bss_end - 
                                     ;force assembler error if size is differe
                                     ERROR ERROR ERROR   ;mismatch between bss
                                 endif 
                             
                             vec_init
                                     dw  nmi_trap
                                     dw  res_trap
                                     dw  irq_trap
                             vec_bss equ $fffa
                                 endif                   ;end of RAM init data
                                 
                                 if (load_data_direct = 1) & (ROM_vectors = 1)
fffa =                               org $fffa       ;vectors
fffa : 9d37                          dw  nmi_trap
fffc : a337                          dw  res_trap
fffe : ab37                          dw  irq_trap
                                 endif
                             
fffa =                               end start
                                         

AS65 Assembler for R6502 [1.42].                                     Page  233
---------------------------- test_functional.asm -----------------------------

-------------------------------- Symbol Table --------------------------------

              Symbol   Value        Decimal

               absAN : $025f            607
              absANa : $026b            619
               absEO : $0263            611
              absEOa : $026f            623
              absflo : $0277            631
               absOR : $025b            603
              absORa : $0267            615
              absrlo : $0273            627
                abst : $0203            515
                abs1 : $0218            536
               abs7f : $021c            540
                ada2 : $0203            515
                adfc : $000c             12
               adiy2 : $0058             88
                adi2 : $0054             84
                adrf : $0011             17
                adrh : $0010             16
                adrl : $000f             15
                 ad1 : $000d             13
                 ad2 : $000e             14
         bin_rti_ret : $3455          13397
               brcc1 : $071e           1822
               brcc2 : $0721           1825
               brcc3 : $0725           1829
               brcc4 : $0728           1832
               brcc5 : $072c           1836
               brcc6 : $072f           1839
               brcc7 : $0733           1843
               brcc8 : $0736           1846
               brcs1 : $069e           1694
               brcs2 : $06a1           1697
               brcs3 : $06a5           1701
               brcs4 : $06a8           1704
               brcs5 : $06ac           1708
               brcs6 : $06af           1711
               brcs7 : $06b3           1715
               brcs8 : $06b6           1718
               break : $0010             16
              break2 : $37f5          14325
            brk_ret0 : $09d1           2513
            brk_ret1 : $09f7           2551
               brmi1 : $06be           1726
               brmi2 : $06c1           1729
               brmi3 : $06c5           1733
               brmi4 : $06c8           1736
               brmi5 : $06cc           1740
               brmi6 : $06cf           1743
               brmi7 : $06d3           1747
               brmi8 : $06d6           1750
               brpl1 : $073e           1854
               brpl2 : $0741           1857
               brpl3 : $0745           1861
               brpl4 : $0748           1864
               brpl5 : $074c           1868
               brpl6 : $074f           1871
               brpl7 : $0753           1875
               brpl8 : $0756           1878
               brvc1 : $075e           1886
AS65 Assembler for R6502 [1.42].                                     Page  234
---------------------------- test_functional.asm -----------------------------

               brvc2 : $0761           1889
               brvc3 : $0765           1893
               brvc4 : $0768           1896
               brvc5 : $076c           1900
               brvc6 : $076f           1903
               brvc7 : $0773           1907
               brvc8 : $0776           1910
               brvs1 : $06de           1758
               brvs2 : $06e1           1761
               brvs3 : $06e5           1765
               brvs4 : $06e8           1768
               brvs5 : $06ec           1772
               brvs6 : $06ef           1775
               brvs7 : $06f3           1779
               brvs8 : $06f6           1782
               brzc1 : $06fe           1790
               brzc2 : $0701           1793
               brzc3 : $0705           1797
               brzc4 : $0708           1800
               brzc5 : $070c           1804
               brzc6 : $070f           1807
               brzc7 : $0713           1811
               brzc8 : $0716           1814
               brzs1 : $067e           1662
               brzs2 : $0681           1665
               brzs3 : $0685           1669
               brzs4 : $0688           1672
               brzs5 : $068c           1676
               brzs6 : $068f           1679
               brzs7 : $0693           1683
               brzs8 : $0696           1686
                 br1 : $0619           1561
                br11 : $0655           1621
                br12 : $065a           1626
                br13 : $065f           1631
                br14 : $0670           1648
                 br2 : $061e           1566
                 br3 : $0623           1571
                 br4 : $0634           1588
               carry : $0001              1
           check_ram : <macro>
              chkadd : $35a2          13730
              chkdad : $346f          13423
               ckad1 : $35b7          13751
            cmp_flag : <macro>
        code_segment : $0400           1024   *
            data_bss : $0209            521
        data_bss_end : $027b            635
        data_segment : $0200            512   *
             decmode : $0008              8
         dec_rti_ret : $344c          13388
     disable_decimal : $0000              0   *
     disable_selfmod : $0000              0   *
            eor_flag : <macro>
             ex_adci : $0212            530
             ex_andi : $0209            521
             ex_eori : $020c            524
             ex_orai : $020f            527
             ex_sbci : $0215            533
                fASL : $0239            569
                 fai : $0034             52
                faid : $003c             60
AS65 Assembler for R6502 [1.42].                                     Page  235
---------------------------- test_functional.asm -----------------------------

                 fao : $0030             48
                faod : $0038             56
             far_ret : $090f           2319
                  fc : $0001              1
                fINC : $0256            598
                fLDx : $021d            541
                fLSR : $0245            581
                  fn : $0080            128
                 fnc : $0081            129
                 fnv : $00c0            192
                 fnz : $0082            130
                fnzc : $0083            131
                fROL : $0239            569
               fROLc : $023f            575
                fROR : $0245            581
               fRORc : $024b            587
                  fv : $0040             64
                 fvz : $0042             66
                  fz : $0002              2
                 fzc : $0003              3
              I_flag : $0003              3   *
               indAN : $003c             60
               indEO : $0044             68
               indOR : $004c             76
                indt : $0032             50
                ind1 : $0026             38
             ind_ret : $0964           2404
              intdis : $0004              4
                inwt : $003a             58
                inw1 : $0030             48
               irq_a : $000a             10
            irq_trap : $37ab          14251
               irq_x : $000b             11
             jsr_ret : $099a           2458   *
    load_data_direct : $0001              1   *
           load_flag : <macro>
               minus : $0080            128
                  m8 : $00ff            255
                 m8i : $00fb            251
                nbr1 : $0628           1576
               nbr11 : $0664           1636
               nbr12 : $0667           1639
               nbr13 : $066a           1642
               nbr14 : $066d           1645
                nbr2 : $062b           1579
                nbr3 : $062e           1582
                nbr4 : $0631           1585
           next_test : <macro>
            nmi_trap : $379d          14237
              overfl : $0040             64
            psb_back : $0429           1065
            psb_bwok : $040e           1038
            psb_forw : $041a           1050
            psb_fwok : $0438           1080
            psb_test : $0433           1075
         ptr_ind_ret : $3720          14112
         ptr_tst_ind : $371e          14110
         ROM_vectors : $0001              1   *
                rASL : $0221            545
           ram_chksm : $0201            513
             ram_top : $ffff             -1   *
           range_adr : $04e6           1254   *
AS65 Assembler for R6502 [1.42].                                     Page  236
---------------------------- test_functional.asm -----------------------------

           range_end : $0581           1409
            range_fw : $0453           1107
          range_loop : $0446           1094
            range_ok : $0575           1397
            range_op : $04e5           1253
              report : $0000              0   *
              reserv : $0020             32
            res_trap : $37a3          14243
                rINC : $0251            593
                rLSR : $022d            557
                rROL : $0221            545
               rROLc : $0227            551
                rROR : $022d            557
               rRORc : $0233            563
                sba2 : $0204            516
               sbiy2 : $005a             90
                sbi2 : $0056             86
                 sb2 : $0012             18
               set_a : <macro>
             set_abs : <macro>
            set_absx : <macro>
              set_ax : <macro>
              set_ay : <macro>
            set_stat : <macro>
               set_x : <macro>
               set_y : <macro>
               set_z : <macro>
              set_zx : <macro>
               start : $0400           1024
             success : <macro>
                tadd : $3327          13095
               tadd1 : $3339          13113
                tand : $2d21          11553
               tand1 : $2d43          11587
              tand10 : $2e5b          11867
              tand11 : $2e78          11896
              tand12 : $2e97          11927
              tand13 : $2eb7          11959
              tand14 : $2ed5          11989
              tand15 : $2ef1          12017
               tand2 : $2d65          11621
               tand3 : $2d85          11653
               tand4 : $2da5          11685
               tand5 : $2dc7          11719
               tand6 : $2de9          11753
               tand7 : $2e05          11781
               tand8 : $2e21          11809
               tand9 : $2e3e          11838
                tasl : $22c5           8901
               tasl1 : $22df           8927
               tasl2 : $2409           9225
               tasl3 : $2428           9256
               tasl4 : $2589           9609
               tasl5 : $25ab           9643
               tasl6 : $272d          10029
               tasl7 : $274c          10060
               tasl8 : $28ad          10413
               tasl9 : $28cf          10447
                tdad : $338a          13194
               tdad1 : $339c          13212
               tdad2 : $33ac          13228
               tdad3 : $33ae          13230
AS65 Assembler for R6502 [1.42].                                     Page  237
---------------------------- test_functional.asm -----------------------------

               tdad4 : $33c8          13256
               tdad5 : $33cd          13261
               tdad6 : $33f1          13297
               tdad7 : $3405          13317
                tdec : $2a7b          10875
               tdec1 : $2a9e          10910
              tdec10 : $2aca          10954
              tdec11 : $2aed          10989
              tdec12 : $2b81          11137
              tdec13 : $2ba7          11175
              tdec14 : $2c30          11312
              tdec15 : $2c55          11349
              tdec16 : $2cea          11498
              tdec17 : $2d13          11539
               tdec2 : $2b2a          11050
               tdec3 : $2b50          11088
               tdec4 : $2bdf          11231
               tdec5 : $2c04          11268
               tdec6 : $2c91          11409
               tdec7 : $2cba          11450
                teor : $2f19          12057
               teor1 : $2f3b          12091
              teor10 : $3053          12371
              teor11 : $3070          12400
              teor12 : $308f          12431
              teor13 : $30af          12463
              teor14 : $30cd          12493
              teor15 : $30e9          12521
               teor2 : $2f5d          12125
               teor3 : $2f7d          12157
               teor4 : $2f9d          12189
               teor5 : $2fbf          12223
               teor6 : $2fe1          12257
               teor7 : $2ffd          12285
               teor8 : $3019          12313
               teor9 : $3036          12342
            test_bne : $0594           1428
           test_case : $0200            512
            test_far : $36ef          14063
            test_ind : $3727          14119
            test_jsr : $375d          14173
           test_near : $0932           2354
            test_num : $002b             43   *
                tinc : $2a55          10837
               tinc1 : $2a74          10868
              tinc10 : $2aa4          10916
              tinc11 : $2ac3          10947
              tinc12 : $2b57          11095
              tinc13 : $2b79          11129
              tinc14 : $2c08          11272
              tinc15 : $2c29          11305
              tinc16 : $2cbe          11454
              tinc17 : $2ce3          11491
               tinc2 : $2b00          11008
               tinc3 : $2b22          11042
               tinc4 : $2bb7          11191
               tinc5 : $2bd8          11224
               tinc6 : $2c65          11365
               tinc7 : $2c8a          11402
               tldax : $1638           5688
              tldax1 : $165a           5722
              tldax2 : $167c           5756
AS65 Assembler for R6502 [1.42].                                     Page  238
---------------------------- test_functional.asm -----------------------------

              tldax3 : $169d           5789
              tldax4 : $179b           6043
              tldax5 : $17c0           6080
              tldax6 : $1804           6148
              tldax7 : $1810           6160
               tlday : $16e9           5865
              tlday1 : $170b           5899
              tlday2 : $1742           5954
              tlday3 : $1763           5987
              tlday4 : $1839           6201
              tlday5 : $185a           6234
              tlday6 : $187b           6267
                tldx : $0e54           3668
               tldx1 : $0e77           3703
               tldx2 : $0e9a           3738
               tldx3 : $0ebe           3774
               tldx4 : $0f0f           3855
               tldx5 : $0f1c           3868
                tldy : $0f51           3921
               tldy1 : $0f74           3956
               tldy2 : $0f97           3991
               tldy3 : $0fba           4026
               tldy4 : $1008           4104
               tldy5 : $1015           4117
                tlsr : $22f9           8953
               tlsr1 : $2313           8979
               tlsr2 : $2447           9287
               tlsr3 : $2466           9318
               tlsr4 : $25cd           9677
               tlsr5 : $25ef           9711
               tlsr6 : $276b          10091
               tlsr7 : $278a          10122
               tlsr8 : $28f1          10481
               tlsr9 : $2913          10515
                tora : $3111          12561
               tora1 : $3133          12595
              tora10 : $324b          12875
              tora11 : $3268          12904
              tora12 : $3287          12935
              tora13 : $32a7          12967
              tora14 : $32c5          12997
              tora15 : $32e1          13025
               tora2 : $3155          12629
               tora3 : $3175          12661
               tora4 : $3195          12693
               tora5 : $31b7          12727
               tora6 : $31d9          12761
               tora7 : $31f5          12789
               tora8 : $3211          12817
               tora9 : $322e          12846
                trap : <macro>
             trap_cc : <macro>
             trap_cs : <macro>
             trap_eq : <macro>
             trap_mi : <macro>
             trap_ne : <macro>
             trap_pl : <macro>
             trap_vc : <macro>
             trap_vs : <macro>
                trol : $232d           9005
               trolc : $2361           9057
              trolc1 : $237b           9083
AS65 Assembler for R6502 [1.42].                                     Page  239
---------------------------- test_functional.asm -----------------------------

              trolc2 : $24c3           9411
              trolc3 : $24e2           9442
              trolc4 : $2655           9813
              trolc5 : $2677           9847
              trolc6 : $27e7          10215
              trolc7 : $2806          10246
              trolc8 : $2979          10617
              trolc9 : $299b          10651
               trol1 : $2347           9031
               trol2 : $2485           9349
               trol3 : $24a4           9380
               trol4 : $2611           9745
               trol5 : $2633           9779
               trol6 : $27a9          10153
               trol7 : $27c8          10184
               trol8 : $2935          10549
               trol9 : $2957          10583
                tror : $2395           9109
               trorc : $23c9           9161
              trorc1 : $23e3           9187
              trorc2 : $253f           9535
              trorc3 : $255e           9566
              trorc4 : $26dd           9949
              trorc5 : $26ff           9983
              trorc6 : $2863          10339
              trorc7 : $2882          10370
              trorc8 : $2a01          10753
              trorc9 : $2a23          10787
               tror1 : $23af           9135
               tror2 : $2501           9473
               tror3 : $2520           9504
               tror4 : $2699           9881
               tror5 : $26bb           9915
               tror6 : $2825          10277
               tror7 : $2844          10308
               tror8 : $29bd          10685
               tror9 : $29df          10719
               tstax : $16c0           5824
              tstax1 : $181e           6174
               tstay : $172f           5935
              tstay1 : $1786           6022
              tstay2 : $17e5           6117
              tstay4 : $1849           6217
              tstay5 : $1868           6248
              tstay6 : $188a           6282
                tstx : $0ee4           3812
               tstx1 : $0f2a           3882
                tsty : $0fdf           4063
               tsty1 : $1023           4131
               tst_a : <macro>
             tst_abs : <macro>
            tst_absx : <macro>
              tst_ax : <macro>
              tst_ay : <macro>
            tst_stat : <macro>
               tst_x : <macro>
               tst_y : <macro>
               tst_z : <macro>
              tst_zx : <macro>
                zero : $0002              2
           zero_page : $000a             10   *
                zpAN : $001e             30
AS65 Assembler for R6502 [1.42].                                     Page  240
---------------------------- test_functional.asm -----------------------------

                zpEO : $0022             34
                zpOR : $001a             26
                 zps : $0013             19
                 zpt : $000c             12
                 zp1 : $0015             21
                zp7f : $0019             25
              zp_bss : $0013             19
          zp_bss_end : $005c             92
            __6502__ : $0001              1

404 labels used

6108 lines read, no errors in pass 1.
------------------ Memory Usage Map ('x'=used, '-'=unused) -------------------

0000 : ----------xxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0040 : xxxxxxxxxxxxxxxx xxxxxxxxxxxx---- ---------------- ---------------- 
0200 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0240 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxx----- 
0400 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0440 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0480 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
04c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0500 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0540 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0580 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
05c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0600 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0640 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0680 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
06c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0700 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0740 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0780 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
07c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0800 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0840 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0880 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
08c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0900 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0940 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0980 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
09c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0a00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0a40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0a80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0ac0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0b00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0b40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0b80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0bc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0c00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0c40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0c80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0cc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0d00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0d40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0d80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0dc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0e00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0e40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0e80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0ec0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0f00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
AS65 Assembler for R6502 [1.42].                                     Page  241
---------------------------- test_functional.asm -----------------------------

0f40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0f80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
0fc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1000 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1040 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1080 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
10c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1100 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1140 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1180 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
11c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1200 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1240 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1280 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
12c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1300 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1340 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1380 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
13c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1400 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1440 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1480 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
14c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1500 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1540 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1580 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
15c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1600 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1640 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1680 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
16c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1700 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1740 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1780 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
17c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1800 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1840 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1880 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
18c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1900 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1940 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1980 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
19c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1a00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1a40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1a80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1ac0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1b00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1b40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1b80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1bc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1c00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1c40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1c80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1cc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1d00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1d40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1d80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1dc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1e00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1e40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1e80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
AS65 Assembler for R6502 [1.42].                                     Page  242
---------------------------- test_functional.asm -----------------------------

1ec0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1f00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1f40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1f80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
1fc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2000 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2040 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2080 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
20c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2100 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2140 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2180 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
21c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2200 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2240 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2280 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
22c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2300 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2340 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2380 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
23c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2400 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2440 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2480 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
24c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2500 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2540 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2580 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
25c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2600 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2640 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2680 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
26c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2700 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2740 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2780 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
27c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2800 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2840 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2880 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
28c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2900 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2940 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2980 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
29c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2a00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2a40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2a80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2ac0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2b00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2b40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2b80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2bc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2c00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2c40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2c80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2cc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2d00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2d40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2d80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2dc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2e00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
AS65 Assembler for R6502 [1.42].                                     Page  243
---------------------------- test_functional.asm -----------------------------

2e40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2e80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2ec0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2f00 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2f40 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2f80 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
2fc0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3000 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3040 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3080 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
30c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3100 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3140 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3180 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
31c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3200 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3240 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3280 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
32c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3300 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3340 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3380 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
33c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3400 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3440 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3480 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
34c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3500 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3540 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3580 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
35c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3600 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3640 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3680 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
36c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3700 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3740 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3780 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
37c0 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 
3800 : xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxx----------- 
ffc0 : ---------------- ---------------- ---------------- ----------xxxxxx 

No errors in pass 2.
Wrote binary from address $000a through $ffff.
Total size 65526 bytes.
Program start address is at $0400 (1024).
